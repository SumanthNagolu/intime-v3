Campaigns workspace we currently have is inclomplete and missing links like buttons and all. 

We can have 9 tabs under each campaign.. Dashboard/Summary , Sequences, Prospects, Leads, Activities, Documents, Notes, Analytics, History

** Each tab purpose and functionality ..
1. Dashboard -->

2. Sequences --> 

3. Prospects --> 
4. Leads --> 
5. Activities --> 
6. Documents --> 
7. Notes --> 
8. Analytics --> 
9. History --> 

*** User flows for campaigns
I'll help you understand the campaigns system in your InTime v3 application. Let me explore the database schema, relations, and user flows.

[24 tools called]

Perfect! I'll create a comprehensive overview of how the campaigns system works in your InTime v3 application.

## ğŸ“Š Campaign System Overview

Based on the codebase, here's a complete understanding of how campaigns work, their database structure, and end-user flows.

---

## ğŸ—„ï¸ Database Schema & Relations

### Core Tables

#### 1. **`campaigns`** (Main table)

```
campaigns
â”œâ”€â”€ id (UUID)
â”œâ”€â”€ org_id (Multi-tenant isolation)
â”œâ”€â”€ owner_id â†’ user_profiles.id
â”œâ”€â”€ name
â”œâ”€â”€ campaign_type (lead_generation, re_engagement, event_promotion, etc.)
â”œâ”€â”€ goal
â”œâ”€â”€ status (draft, scheduled, active, paused, completed)
â”œâ”€â”€ target_criteria (JSONB) - Industry, company size, regions, etc.
â”œâ”€â”€ channels (TEXT[]) - linkedin, email, phone
â”œâ”€â”€ sequences (JSONB) - Multi-step email/LinkedIn sequences
â”œâ”€â”€ budget_total, budget_spent
â”œâ”€â”€ target_leads, target_meetings, target_revenue
â”œâ”€â”€ audience_size, prospects_contacted, prospects_opened, prospects_responded
â”œâ”€â”€ leads_generated, meetings_booked, revenue_generated
â”œâ”€â”€ start_date, end_date
â”œâ”€â”€ approval_status, compliance_settings
â””â”€â”€ timestamps
```

#### 2. **`campaign_prospects`** (Enrolled contacts)

```
campaign_prospects
â”œâ”€â”€ id (UUID)
â”œâ”€â”€ campaign_id â†’ campaigns.id
â”œâ”€â”€ lead_id â†’ leads.id (optional, if sourced from existing lead)
â”œâ”€â”€ first_name, last_name, email, phone, linkedin_url
â”œâ”€â”€ company_name, company_industry, company_size, title
â”œâ”€â”€ primary_channel (email, linkedin, phone)
â”œâ”€â”€ sequence_step (current position in sequence)
â”œâ”€â”€ sequence_status (pending, in_progress, stopped, completed)
â”œâ”€â”€ stop_reason (reply, booking, unsubscribe, manual)
â”œâ”€â”€ first_contacted_at, last_contacted_at
â”œâ”€â”€ opened_at, clicked_at, responded_at
â”œâ”€â”€ response_type, response_text
â”œâ”€â”€ converted_to_lead_at
â”œâ”€â”€ converted_lead_id â†’ leads.id
â”œâ”€â”€ meeting_booked_at
â”œâ”€â”€ engagement_score (0-100)
â””â”€â”€ status (enrolled, contacted, engaged, responded, converted, unsubscribed)
```

#### 3. **`campaign_sequence_logs`** (Activity tracking)

```
campaign_sequence_logs
â”œâ”€â”€ id (UUID)
â”œâ”€â”€ campaign_id â†’ campaigns.id
â”œâ”€â”€ prospect_id â†’ campaign_prospects.id
â”œâ”€â”€ channel (email, linkedin, phone)
â”œâ”€â”€ step_number
â”œâ”€â”€ action_type (sent, opened, clicked, replied, bounced, etc.)
â”œâ”€â”€ action_at
â”œâ”€â”€ subject, content_preview
â”œâ”€â”€ link_clicked
â”œâ”€â”€ call_duration_seconds, call_outcome
â”œâ”€â”€ response_text, sentiment
â””â”€â”€ metadata (JSONB)
```

#### 4. **`lead_sourcing_credits`** (Cross-pillar tracking)

```
lead_sourcing_credits
â”œâ”€â”€ id (UUID)
â”œâ”€â”€ lead_id â†’ leads.id
â”œâ”€â”€ sourced_by â†’ user_profiles.id
â”œâ”€â”€ source_pillar (recruiting, bench_sales, ta, sales, academy)
â”œâ”€â”€ target_pillar
â”œâ”€â”€ assigned_to â†’ user_profiles.id
â”œâ”€â”€ credit_points, bonus_points
â”œâ”€â”€ status (pending, converted, lost)
â””â”€â”€ conversion tracking fields
```

#### 5. **`leads`** table (Extended with campaign fields)

```
leads (existing table with campaign additions)
â”œâ”€â”€ campaign_id â†’ campaigns.id
â”œâ”€â”€ campaign_prospect_id â†’ campaign_prospects.id
â”œâ”€â”€ cross_pillar_type
â”œâ”€â”€ urgency (low, normal, high, urgent)
â”œâ”€â”€ interest_level (hot, warm, cold)
â”œâ”€â”€ hiring_needs, pain_points
â”œâ”€â”€ BANT qualification fields:
â”‚   â”œâ”€â”€ budget_status, budget_notes
â”‚   â”œâ”€â”€ authority_status, authority_notes
â”‚   â”œâ”€â”€ need_status, need_notes
â”‚   â””â”€â”€ timeline_status, timeline_notes
â”œâ”€â”€ next_action, next_action_date
â””â”€â”€ lead_score (0-100)
```

### ğŸ”— Relationship Diagram

```
campaigns (1) â”€â”€â†’ (many) campaign_prospects
    â†“                        â†“
    â”‚                   converted_lead_id
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ leads â†â”€â”€â”˜
                     â†“
            lead_sourcing_credits
```

---

## ğŸ¯ How Campaigns Work: End-User Flows

### **Flow 1: Create & Launch Campaign (A01-run-campaign)**

**URL:** `http://localhost:3000/employee/crm/campaigns`

#### Step-by-Step Process:

**1. Navigate to Campaigns**
- Click "Campaigns" in the sidebar (under CRM section)
- See list of active, scheduled, draft, and completed campaigns
- View key metrics: Total campaigns, active campaigns, leads generated, meetings booked

**2. Create New Campaign (5-step wizard)**

**Step 1: Campaign Setup**
- Name: `"Q4 FinTech Startup Outreach"`
- Type: Lead Generation, Re-engagement, Event Promotion, Brand Awareness, or Candidate Sourcing
- Goal: Generate qualified leads, Book meetings, Drive event registrations, etc.
- Owner: Assign to yourself or team member

**Step 2: Target Audience**
- **Audience Source**: New prospects, Existing leads, Dormant accounts, or Import CSV
- **Prospect Criteria**:
  - Industries: FinTech, Banking, Healthcare, etc. (multi-select)
  - Company Size: 51-200, 201-500, etc.
  - Regions: North America West/East, Europe, APAC
  - Funding Stage: Series A, B, C+
  - Target Titles: VP Engineering, CTO, Director
- **Exclusions**:
  - â˜‘ Exclude existing clients
  - â˜‘ Exclude recently contacted (90 days)
  - â˜‘ Exclude competitors
- **Estimated Audience**: System calculates ~2,450 prospects

**Step 3: Channel Setup**
- Select channels: LinkedIn, Email, Phone, Event, Direct Mail
- **Email Sequence** (5-step example):
  - Day 0: Initial outreach
  - Day 3: Follow-up #1
  - Day 7: Case study
  - Day 12: Value add
  - Day 18: Final touch
- **Stop Conditions**: Reply, booking, unsubscribe, link click
- **Compliance**: GDPR, CAN-SPAM, CASL enabled
- **Send Time**: Business hours, respect timezone, daily limit (100/day)

**Step 4: Schedule & Budget**
- Start Date: 12/09/2025
- End Date: 01/31/2026
- Budget: $250 (LinkedIn credits)
- Targets:
  - 50 qualified leads
  - 10 discovery calls
  - $75,000 revenue

**Step 5: Review & Launch**
- Preview complete campaign summary
- Pre-launch checklist validation
- Click "Launch Campaign"

#### What Happens When Launched:

1. **Campaign record created** in database
2. **Prospect list generated** (2,450 people matching criteria)
3. **Campaign prospects enrolled** (unique email constraint)
4. **Sequences activated** and scheduled
5. **First batch queued** for start date
6. **Notifications sent** to Pod Manager
7. **Campaign goes active** on start date
8. **Automated sends begin** respecting timezones and limits

---

### **Flow 2: Monitor Campaign Performance (A02-track-campaign-metrics)**

**URL:** `http://localhost:3000/employee/crm/campaigns/{campaignId}`

#### Analytics Dashboard Shows:

**1. Key Metrics**
- **Reach**: 1,847 contacted (75% of 2,450)
- **Engagement**: 42.3% open rate (target 35%)
- **Conversion**: 8.7% response rate (target 8%)
- **Leads**: 32 generated (64% of 50 target)
- **Meetings**: 6 booked (60% of 10 target)
- **Pipeline**: $48,000 value ($75K target)

**2. Conversion Funnel**
```
Prospects â†’ Contacted â†’ Opened â†’ Responded â†’ Leads
  2,450       1,847       782        161        32
 (100%)      (75%)      (42%)       (9%)      (1%)
```

**3. Channel Breakdown**
| Channel  | Sent  | Open% | Click% | Response | Leads |
|----------|-------|-------|--------|----------|-------|
| LinkedIn | 892   | N/A   | N/A    | 11.2%    | 18    |
| Email    | 1,847 | 42.3% | 8.5%   | 6.8%     | 14    |

**Best Performer:** LinkedIn (11.2% response rate)

**4. Sequence Performance**
- Step 1 (Initial): 45% open, 3.2% response
- Step 2 (Follow-up): 38% open, 2.1% response
- **Step 3 (Case Study): 52% open, 4.5% response â­ Top Performer**
- Step 4 (Value): 35% open, 1.8% response
- Step 5 (Final): 28% open, 0.8% response

**5. A/B Test Results**
- Variant A: "Scaling your engineering team in 2025?" â†’ 41.2% open, 2.9% response
- **Variant B: "Quick question about [Company] hiring" â†’ 49.1% open, 3.6% response ğŸ†**
- Winner: Variant B (+19% opens, +24% responses)

**6. Cost Analysis**
- Budget Spent: $156 / $250 (62%)
- **Cost per Lead: $4.88** (target <$10) âœ…
- **Cost per Meeting: $26.00** (target <$50) âœ…
- **Projected ROI: 92x**

**7. AI Recommendations**
- Increase LinkedIn budget (65% higher response)
- Use winning subject line from A/B test
- Focus on Series B companies (2x conversion)
- Optimize send times (Tuesday 10-11 AM peak)

---

### **Flow 3: Convert Response to Lead (A03-generate-lead-from-campaign)**

**Trigger:** Prospect responds positively to campaign

#### Conversion Process:

**1. View Response**
- Navigate to campaign â†’ Prospects tab â†’ Filter: "Responded"
- See conversation thread with prospect
- **Engagement Score**: 85/100 ğŸ”¥
- **Lead Signals**:
  - âœ… Explicit interest
  - âœ… Defined hiring need (3-4 engineers)
  - âœ… Timeline (Q1)
  - âœ… Pain point identified
  - âœ… Requested meeting
  - âœ… Decision maker (VP Engineering)

**2. Click "Convert to Lead"**
- Modal opens with pre-filled data from campaign prospect
- **Contact Info**: Auto-populated from prospect record
- **Company Info**: TechStart Inc, FinTech, Series B, 120 employees

**3. Qualify Lead (BANT)**
- **Budget**: Unknown âšª
- **Authority**: Decision Maker (VP Engineering) ğŸŸ¢
- **Need**: Defined (3-4 senior engineers) ğŸŸ¢
- **Timeline**: Short (Q1 2026) ğŸŸ¢
- **BANT Score**: 3/4 â†’ Qualified âœ…

**4. Set Interest Level**
- â—‹ Hot (Ready to buy, urgent need) â† Selected
- â—‹ Warm (Interested, 1-3 months)
- â—‹ Cold (Future potential, 3+ months)

**5. Add Details**
- Hiring Needs: "3-4 Senior Software Engineers"
- Urgency: High
- Pain Points: "Struggling to find quality candidates through traditional channels"
- Next Action: Schedule discovery call
- Follow-up Date: Tomorrow

**6. Convert**
- Click "Convert to Lead âœ“"
- **System creates**:
  - Lead record with all qualification data
  - Follow-up task for tomorrow
  - Activity log entry
  - Notification to Pod Manager (if hot lead)
- **Updates campaign_prospect**:
  - `converted_to_lead_at` = NOW()
  - `converted_lead_id` = new lead ID
  - `status` = 'converted'
- **Campaign metrics update**:
  - `leads_generated` increments
  - Real-time dashboard refresh

---

## ğŸ”„ Complete Campaign Lifecycle

### 1. **Draft â†’ Scheduled** (Setup phase)
- Recruiter creates campaign in wizard
- Defines audience, channels, sequences
- Sets budget and targets
- Campaign status: `draft` or `scheduled`

### 2. **Scheduled â†’ Active** (Launch)
- Start date arrives
- Campaign status changes to `active`
- First batch of emails/LinkedIn messages queued
- Prospects enrolled with status `pending`

### 3. **Active** (Running)
- **Automated sends**:
  - Day 0: Step 1 sends to all prospects
  - Day 3: Step 2 sends to those who didn't respond
  - Day 7: Step 3 sends (case study)
  - Continues through sequence
- **Stop conditions**:
  - Prospect replies â†’ sequence stops, status = `responded`
  - Prospect unsubscribes â†’ sequence stops, status = `unsubscribed`
  - Prospect books meeting â†’ sequence stops, status = `converted`
- **Tracking**:
  - Every send logged in `campaign_sequence_logs`
  - Opens, clicks, replies tracked
  - Engagement score calculated
  - Campaign metrics updated in real-time

### 4. **Response Handling**
- Positive response â†’ Recruiter converts to lead (Flow 3)
- Neutral response â†’ Add to nurture sequence
- Negative response â†’ Mark as not interested
- Auto-reply/OOO â†’ Continue sequence after delay

### 5. **Lead Conversion**
- Lead created with campaign attribution
- Campaign prospect linked to lead
- Lead score auto-calculated (0-100)
- BANT qualification captured
- Follow-up tasks created

### 6. **Active â†’ Paused** (Optional)
- Recruiter can pause campaign
- All scheduled sends halt
- Can resume later

### 7. **Active â†’ Completed** (End)
- End date reached OR targets met
- Campaign status = `completed`
- Final metrics calculated
- Performance report generated
- Lessons learned documented

---

## ğŸ“ˆ Key Features for End Users

### 1. **Multi-Channel Orchestration**
- Run LinkedIn + Email + Phone simultaneously
- Coordinate touchpoints to avoid over-contacting
- Respect timezone for optimal delivery

### 2. **Intelligent Sequencing**
- 5-7 step automated sequences
- Dynamic branching based on engagement
- A/B testing for subject lines and content
- Auto-stop on positive signals

### 3. **Real-Time Analytics**
- Live conversion funnel
- Channel performance comparison
- Sequence step analysis
- Cost per lead/meeting tracking
- ROI projections

### 4. **Lead Scoring & Qualification**
- **Engagement signals** (40 points): Opens, clicks, replies
- **Company fit** (30 points): Industry, size, funding stage
- **Response quality** (30 points): Sentiment, hiring mentions, meeting requests
- **Total score**: 0-100, auto-calculated

### 5. **Compliance & Deliverability**
- GDPR, CAN-SPAM, CASL compliant
- Unsubscribe links in all emails
- Bounce handling
- Send rate limiting
- Domain warming

### 6. **Cross-Pillar Lead Attribution**
- Track which pillar sourced the lead
- Credit system for cross-team referrals
- Commission tracking on conversions

---

## ğŸ¨ UI/UX Highlights

- **Dashboard Cards**: Total campaigns, active, leads, meetings
- **Quick Filters**: All, Active, Drafts, Lead Gen, Sourcing
- **Bulk Actions**: Pause/Resume/Delete multiple campaigns
- **Export**: CSV, PDF reports for sharing with managers
- **Keyboard Shortcuts**: `n` for new campaign, `p` for pause, `e` for edit

---

This is a **full-featured campaign management system** that allows recruiters to:
1. Build targeted prospect lists
2. Launch multi-channel outreach sequences
3. Track engagement in real-time
4. Convert hot responses to qualified leads
5. Optimize performance with AI recommendations
6. Attribute lead generation credit across teams

The system is designed for **scale** (handling thousands of prospects), **automation** (reducing manual work), and **data-driven optimization** (A/B testing, analytics).