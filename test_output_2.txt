
 RUN  v2.1.9 /Users/sumanthrajkumarnagolu/Projects/intime-v3

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should complete full student question flow
[MockOpenAI] Prompt: classify this question: "what is a coverage in policycenter?"

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should complete full student question flow
GoTrueClient@sb-gkwhxmvugnjwwwiufmdy-auth-token:1 (2.83.0) 2025-11-22T12:07:20.572Z Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should complete full student question flow
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should complete full student question flow
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (bd209260-6149-441e-b1f2-1d5db60cebf2, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813240571, {"question": "What is a coverage in PolicyCenter?", "studentId":..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 270, 2025-11-22 12:07:20.968805+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should handle conversation context
[MockOpenAI] Prompt: classify this question: "what is rating in policycenter?"

 × tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should complete full student question flow 383ms
   → expected 0 to be greater than 0
stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should handle conversation context
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should handle conversation context
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (40c99c77-c912-41e6-978c-358b00de9ff1, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813240953, {"question": "What is rating in PolicyCenter?", "studentId": "d7..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 257, 2025-11-22 12:07:21.344454+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should handle conversation context
[MockOpenAI] Prompt: classify this question: "can you explain that in more detail?"

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should handle conversation context
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should handle conversation context
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (a38d8b4f-a568-4f3b-96b7-b5088255e049, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813240953, {"question": "Can you explain that in more detail?", "studentId"..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 254, 2025-11-22 12:07:21.679694+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should route different question types correctly
[MockOpenAI] Prompt: classify this question: "how do i configure rating in policycenter?"

 ✓ tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should handle conversation context 647ms
stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should route different question types correctly
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should route different question types correctly
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (de4c75f1-dce2-457b-8016-0fedc873511d, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813241599, {"question": "How do I configure rating in PolicyCenter?", "stud..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 242, 2025-11-22 12:07:21.968447+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should route different question types correctly
[MockOpenAI] Prompt: classify this question: "help me create a resume for a guidewire job"

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should route different question types correctly
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should route different question types correctly
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (29726ff4-fb4d-44f1-9905-9b4f18a73f6e, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813241895, {"question": "Help me create a resume for a Guidewire job", "stu..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 256, 2025-11-22 12:07:22.281792+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[MockOpenAI] Prompt: classify this question: "i dont understand rating at all"

 × tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should route different question types correctly 609ms
   → expected 'code_mentor' to be 'resume_builder' // Object.is equality
stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to fetch student progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813242207"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to update progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813242207"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Logging interaction for: escalation-test-1763813242207

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[MockOpenAI] Prompt: classify this question: "i dont understand rating at all"

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Supabase INSERT error: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813242207"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to fetch student progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813242507"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to update progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813242507"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Logging interaction for: escalation-test-1763813242507

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[MockOpenAI] Prompt: classify this question: "i dont understand rating at all"

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Supabase INSERT error: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813242507"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to fetch student progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813242834"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to update progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813242834"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Logging interaction for: escalation-test-1763813242834

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[MockOpenAI] Prompt: classify this question: "i dont understand rating at all"

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Supabase INSERT error: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813242834"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to fetch student progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813243164"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to update progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813243164"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Logging interaction for: escalation-test-1763813243164

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[MockOpenAI] Prompt: classify this question: "i dont understand rating at all"

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Supabase INSERT error: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813243164"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to fetch student progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813243501"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to update progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813243501"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Logging interaction for: escalation-test-1763813243501

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Supabase INSERT error: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813243501"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[MockOpenAI] Prompt: classify this question: "i dont understand rating at all"

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to fetch student progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813243847"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CodeMentorAgent] Failed to update progress: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813243847"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Logging interaction for: escalation-test-1763813243847

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate
[CoordinatorAgent] Supabase INSERT error: {
  code: '22P02',
  details: null,
  hint: null,
  message: 'invalid input syntax for type uuid: "escalation-test-1763813243847"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should meet response time targets
[MockOpenAI] Prompt: classify this question: "what is policycenter?"

 ✓ tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Escalation Flow > should detect repeated questions and escalate 1984ms
stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should meet response time targets
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should meet response time targets
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (e38195a7-7d3d-4887-9191-64b1882629d1, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244188, {"question": "What is PolicyCenter?", "studentId": "d7efc7b7-f4e..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 273, 2025-11-22 12:07:24.59909+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[MockOpenAI] Prompt: classify this question: "question 0"
[MockOpenAI] Prompt: classify this question: "question 1"
[MockOpenAI] Prompt: classify this question: "question 2"
[MockOpenAI] Prompt: classify this question: "question 3"
[MockOpenAI] Prompt: classify this question: "question 4"
[MockOpenAI] Prompt: classify this question: "question 5"
[MockOpenAI] Prompt: classify this question: "question 6"
[MockOpenAI] Prompt: classify this question: "question 7"
[MockOpenAI] Prompt: classify this question: "question 8"
[MockOpenAI] Prompt: classify this question: "question 9"

 ✓ tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should meet response time targets 325ms
stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (2a88bae5-6f0a-43a7-ae0a-2f3626efa6a5, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244513, {"question": "Question 4", "studentId": "d7efc7b7-f4ee-4ca3-9ea3..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 235, 2025-11-22 12:07:24.885437+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (350a4766-5c9f-4abb-9aef-695978746b71, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244513, {"question": "Question 2", "studentId": "d7efc7b7-f4ee-4ca3-9ea3..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 250, 2025-11-22 12:07:24.902115+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (c5dbcae0-173d-4866-ae6b-0dd226a62fcf, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244513, {"question": "Question 6", "studentId": "d7efc7b7-f4ee-4ca3-9ea3..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 236, 2025-11-22 12:07:24.914953+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (71abbe7d-f2ad-4b4e-8204-83f4be705446, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244513, {"question": "Question 8", "studentId": "d7efc7b7-f4ee-4ca3-9ea3..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 248, 2025-11-22 12:07:24.920578+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (23f0aedd-84b4-4f5f-b848-17d17659ec86, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244513, {"question": "Question 1", "studentId": "d7efc7b7-f4ee-4ca3-9ea3..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 249, 2025-11-22 12:07:24.924999+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (f7c2a5f3-ae2c-453e-9ea1-f296798e59ea, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244513, {"question": "Question 3", "studentId": "d7efc7b7-f4ee-4ca3-9ea3..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 252, 2025-11-22 12:07:24.933471+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (9f93003e-1708-4cb8-bd36-84d90bafec0b, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244513, {"question": "Question 0", "studentId": "d7efc7b7-f4ee-4ca3-9ea3..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 263, 2025-11-22 12:07:24.939087+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (a1959b0c-c8f5-4693-9faa-2faca80056ed, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244513, {"question": "Question 5", "studentId": "d7efc7b7-f4ee-4ca3-9ea3..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 261, 2025-11-22 12:07:24.933987+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (e917fec2-9545-4833-82a6-90757a7f4c11, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244513, {"question": "Question 7", "studentId": "d7efc7b7-f4ee-4ca3-9ea3..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 269, 2025-11-22 12:07:24.94126+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (0b006ff4-de35-4725-b945-6d89edb904df, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244513, {"question": "Question 9", "studentId": "d7efc7b7-f4ee-4ca3-9ea3..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 271, 2025-11-22 12:07:24.947442+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[MockOpenAI] Prompt: classify this question: "test question"
[MockOpenAI] Prompt: classify this question: "test question"
[MockOpenAI] Prompt: classify this question: "test question"
[MockOpenAI] Prompt: classify this question: "test question"
[MockOpenAI] Prompt: classify this question: "test question"
[MockOpenAI] Prompt: classify this question: "test question"
[MockOpenAI] Prompt: classify this question: "test question"
[MockOpenAI] Prompt: classify this question: "test question"
[MockOpenAI] Prompt: classify this question: "test question"
[MockOpenAI] Prompt: classify this question: "test question"

 ✓ tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Performance Benchmarks > should handle concurrent requests 353ms
stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (ef1553ef-7047-4a68-b6a7-f458dfa3aa2d, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244866, {"question": "Test question", "studentId": "d7efc7b7-f4ee-4ca3-9..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 204, 2025-11-22 12:07:25.202363+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (2b039f5e-cd8e-40db-b40d-13d09b9abdc8, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244866, {"question": "Test question", "studentId": "d7efc7b7-f4ee-4ca3-9..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 215, 2025-11-22 12:07:25.222292+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (b19c913f-aa6c-447a-b444-f0c55da7515f, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244866, {"question": "Test question", "studentId": "d7efc7b7-f4ee-4ca3-9..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 210, 2025-11-22 12:07:25.235193+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (25b39c42-6487-428b-a501-205f6757af82, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244866, {"question": "Test question", "studentId": "d7efc7b7-f4ee-4ca3-9..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 234, 2025-11-22 12:07:25.252733+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (b5cdac4b-b095-4948-a787-dba1ab897b86, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244866, {"question": "Test question", "studentId": "d7efc7b7-f4ee-4ca3-9..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 260, 2025-11-22 12:07:25.258547+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (5cf2e9cb-2ba5-4978-8f60-d49a32525f26, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244866, {"question": "Test question", "studentId": "d7efc7b7-f4ee-4ca3-9..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 232, 2025-11-22 12:07:25.257291+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (a59cdeef-0564-4898-9f98-c361b1236499, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244866, {"question": "Test question", "studentId": "d7efc7b7-f4ee-4ca3-9..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 240, 2025-11-22 12:07:25.264815+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (7bd311f9-499b-4490-8563-f3540e4382df, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244866, {"question": "Test question", "studentId": "d7efc7b7-f4ee-4ca3-9..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 248, 2025-11-22 12:07:25.280224+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (529ac3a6-09e1-436b-9d22-eec64a81afad, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244866, {"question": "Test question", "studentId": "d7efc7b7-f4ee-4ca3-9..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 264, 2025-11-22 12:07:25.290054+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (84a7154d-2cd3-4b29-8d79-8fa482b01fdc, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813244866, {"question": "Test question", "studentId": "d7efc7b7-f4ee-4ca3-9..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 261, 2025-11-22 12:07:25.294619+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Database Consistency > should maintain data integrity across interactions
[MockOpenAI] Prompt: classify this question: "first question"

 ✓ tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Cost Tracking > should track cumulative costs accurately 342ms
stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Database Consistency > should maintain data integrity across interactions
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Database Consistency > should maintain data integrity across interactions
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (422d5d30-db70-4832-accc-5486bde94a91, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813245207, {"question": "First question", "studentId": "d7efc7b7-f4ee-4ca3-..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 219, 2025-11-22 12:07:25.559024+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Database Consistency > should maintain data integrity across interactions
[MockOpenAI] Prompt: classify this question: "second question"

stdout | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Database Consistency > should maintain data integrity across interactions
[CoordinatorAgent] Logging interaction for: d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2

stderr | tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Database Consistency > should maintain data integrity across interactions
[CoordinatorAgent] Supabase INSERT error: {
  code: '23514',
  details: 'Failing row contains (b398e879-5cea-4fea-9428-9de2a2c01f25, 6c5d8791-1b95-4e45-8b38-53c2ed5913aa, d7efc7b7-f4ee-4ca3-9ea3-6a837226f0b2, coordinator, conv-1763813245207, {"question": "Second question", "studentId": "d7efc7b7-f4ee-4ca3..., {"cost": 0.0010500000000000002, "answer": "This is a test respon..., null, null, gpt-4o-mini, 100, 0.000020, 248, 2025-11-22 12:07:25.861255+00).',
  hint: null,
  message: 'new row for relation "guru_interactions" violates check constraint "guru_interactions_agent_type_check"'
}

 × tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Database Consistency > should maintain data integrity across interactions 620ms
   → expected 0 to be greater than or equal to 2

⎯⎯⎯⎯⎯⎯⎯ Failed Tests 3 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should complete full student question flow
AssertionError: expected 0 to be greater than 0
 ❯ tests/integration/guidewire-guru-flow.test.ts:177:36
    175| 
    176|       expect(interactions).toBeTruthy();
    177|       expect(interactions?.length).toBeGreaterThan(0);
       |                                    ^
    178| 
    179|       const interaction = interactions![0];

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯

 FAIL  tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Complete Question Flow > should route different question types correctly
AssertionError: expected 'code_mentor' to be 'resume_builder' // Object.is equality

Expected: "resume_builder"
Received: "code_mentor"

 ❯ tests/integration/guidewire-guru-flow.test.ts:235:36
    233|         });
    234| 
    235|         expect(response.agentUsed).toBe(testCase.expectedAgent);
       |                                    ^
    236|       }
    237|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/3]⎯

 FAIL  tests/integration/guidewire-guru-flow.test.ts > Guidewire Guru Integration Flow > Database Consistency > should maintain data integrity across interactions
AssertionError: expected 0 to be greater than or equal to 2
 ❯ tests/integration/guidewire-guru-flow.test.ts:344:36
    342|         .eq('student_id', testUserId);
    343| 
    344|       expect(interactions?.length).toBeGreaterThanOrEqual(2);
       |                                    ^
    345| 
    346|       // Verify metadata consistency

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/3]⎯

 Test Files  1 failed (1)
      Tests  3 failed | 5 passed (8)
   Start at  07:07:19
   Duration  6.37s (transform 61ms, setup 107ms, collect 86ms, tests 5.63s, environment 289ms, prepare 37ms)

