{
  "chapter": "ch11",
  "chapter_title": "InsuranceSuite Integration",
  "lesson_count": 21,
  "total_slides": 683,
  "total_words": 40360,
  "full_text": "--- ch11/lesson-01 ---\nIntroduction to Integration\n\nLesson\nobjectives ¢ Identify common Integration Mechanisms\n\nused in InsuranceSuite\n\n¢ Describe integration mechanisms commonly\nused by technical consultants\n\n¢ List resources available to technical\nconsultants\n\ni InsuranceSuite integration mechanisms: Overview [Fj\n\n¢ InsuranceSuite implementations use\na wide variety of industry-standard yay cient /\nmechanisms to share information Web Browser\nwith external systems, including:\n\nJava EE\nApplication Server\n\n* Batch processes*\n« Database tables\n\n+ Web Services*\n\nExternal\nSystems\n—_\n\nGuidewire\n\n. i ia\nMessaging Database\n\n« Plugins*\n\n* Details provided in a separate lesson\n\ni Integration mechanism: Batch processes Gi\n\nG BK &\n\n=\nExchange Rate System\n\nExchange Rate\n\n¢« Abatch process is a background process that performs a periodic task\nindependent of a user\n\n« Example: Exchange Rate batch process queries an external system for exchange rates on a\nschedule\n\n¢ May execute logic entirely within InsuranceSuite or interact with other systems\n\n¢ Anexternal system calling an InsuranceSuite API may trigger a batch process to\nrun\n\ni Integration Mechanism: Integration tables\n\nGF —f—a\n\n—\nGuidewire Database External\nApplication Tables System\n\nAn integration table is a database table that both systems can access\n* Query for near real-time\n* Batch process for delayed and/or scheduled\n¢ Data access technologies -JDBC, Spring, Hibernate\n\ni Integration Tables for file-based exchange\n\n=\n> > Sal\n\n[= Le externa\nSystem\n\ni\n\nGuidewire\n\nApplication Integration File\n\nTable\n\nIntegration table for file-based exchange:\n¢ For file-based data exchange, write data to the integration table first\n* Then, generate the file from the integration table, for example, with a batch process, later\n\ni Integration Mechanism: Web services Gi\n\n¢ Web services are information\nexchange systems that use the\nInternet for direct application-to-\napplication interaction\n\n* Typically, exchange of information is\nsynchronous and blocking\n\n+ The process calling the API halts any\nfurther action until the API has responded\nto the request\n\n* Guidewire supports two types:\n\n+ RESTful (Representational State\nTransfer)\n\n+ SOAP (Simple Object Access Protocol)\n\n* InsuranceSuite applications can\n\nboth publish and/or consume web\nservices\n\n¢ Publish example below:\n\n+ lAccountAPI web service with doesexist\nmethod\n\nlAccountAPI External\nWeb Service System\n\nDoes Account 4713 exist?\n\n=\n\nfalse\n\ni Integration Mechanism: Messaging Gi\n\nMessage Message Queue\nGY —_&\n————\n\nResponse me\n\nGuidewire External\nApplication System\n\n* One system sends a message to another system, which is placed in a queue, and\nat a later point in time, the other system processes the message\n\n* Typically, the target system provides an asynchronous, unequivocal acknowledgement when it\nreceives or processes the message\n\n* Common messaging technologies:\n« JMS\n« MQSeries\n\ni Messaging in InsuranceSuite: An example\n\nio\n\n« Asynchronous messaging with an event-based model.\n\nCheck data\n\nMi\n\nyw &\n\nReply with check number Check Printing\nSystem\n\n* Subscription model to guarantee at-least-once delivery of all messages\n\ni Integration Mechanism: Startable plugins\n\nStartable Plugin\n\noe a=\n\nSystem\n\n¢ Astartable plugin is a mechanism that listens for requests from an external\nsystem that communicates with InsuranceSuite via a technology such as:\n\n« JMS Messaging\n\n¢ Triggered by an incoming external request and typically processes the message\nasynchronously\n\n« Example: BillingCenter accepting payment information from external systems\n\ni Integration Mechanism: Predefined plugins Gi\n\nSucceedAuthentication\nServicePlugin\n\nGuidewire TrainingApp Authenticate 8\n“aapplegate\" Fa authenticate\nUsername | sapplegate —==\"_ —<—<$<<—$—>p\nPassword |v mn\nKeep me loggedin\n\n¢ Apredefined plugin is a Gosu class which implements a set of methods called by\ninternal code and related to fundamental application behavior\n\n« For example, the authentication plugin implements methods that define how authentication is\nexecuted\n\n¢ Predefined plugins may or may not interact with other systems\n\n« When predefined plugins interact with other systems, they are typically outbound and\nsynchronous\n\ni Summary of integration mechanisms Gi\n\nMechanism Triggered by Example\n\nGetting exchange rates from an external\nexchange rate system\n\nBatch processes\n\nDatabase tables Data exchange between systems\n\nExternal application checks to see if a given\naccount exists in Guidewire\n\nWeb services External application call\n\nSending check information to check\nChanges to business data printing system and receiving check\nnumber in response\n\nReceiving payment information from an\nexternal financial system\n\nStartable plugins Receipt of incoming request\n\nInternal code related to \" 9\nPredefined plugins iF) fundamental application [einem Cin alle her i, ELSON iS CED\nbehavior\n\nin LDAP system\n\ni Contrasting integration mechanisms Ga\n\noo\n&\nE\na\n\nvo\n\nLT)\n\nJ\n\n©\n—\n\no\n\nx\nwi\n\n©\npe)\n\n©\na\n\nAsynchronous\n\nScheduled\n\nData Exchange Direction\nOutbound Inbound\n\nWeb Services a Web Services &\n\nPredefined\nPlugins*\n\nMessaging Startable (g 7)\nPlugins Vie\nDatabase Tables Database Tables Cnt\n\nBatch\nProcesses**\n\ni The training environment\n\n¢ This course make the following assumptions:\n* You are working in development mode\n« EnablelnternalDebugTools parameter in config.xml has been set to true\n« You are using the Dynamic Code Evolution Virtual Machine (DCEVM)\n¢ All Guidewire applications are located in the C:\\GW directory\n¢ The training environment also provides the following resources:\n* TrainingApp\n« ExternalApp\n\ni TrainingApp for integration students Gi\n\nDetails A\nLawsuits\n\nPerson Info | Phone & Addresses Bank Accounts —_ Analysis\n\nName Lawsuits Date Plaintiff\nFullName Rebecca Stevens\nPrefix\n\nFirstName Rebecca\n\nDate Plaintiff\n\nMiddle Name\n\n* TrainingApp is a modified version of ContactManager\n+ Not sold as a genuine Guidewire product\n+ Used exclusively by Guidewire Education\n*  TrainingApp has resources for integration students, including:\n+ Example integration points\n+ Admin screens that display data relevant to integration\n\n+ Admin screens that demo internal integration functionality\n\ni ExternalApp for integration students\n\n+ | Bteraltpp\n\n[ webapps on9/i6\n\nDi gnbbee\n\nGB jnve-campessip 5\nLW projectverionproperties 1078/16826°\nGi reavmene roni9n2:\n\n« ExternalApp is a modifi ied version of ContactManager that simulates a variety of\nexternal systems\n\n298M Shortcut\n\n* Not sold as a genuine Guidewire product\n« Used exclusively by Guidewire Education\n\n¢ You will not configure ExternalApp\n\n* You'll simply start it, stop it, and build integration points to it\n\ni Guidewire integration documentation Gi\n\n¢ Guidewire Integration Guide * Guidewire Configuration Guide\n\n¢ For questions specific to integration * Occasionally needed for some\nmechanisms integration steps\n* Guidewire Gosu Reference * Also documents functionality of every\n| Studio editor (including some that are\n\n¢ For questions specific to Gosu exclusive to integration)\n\n* Guidewire Rules Guide * Generated documentation\n+ Useful for integration points that require + Data and security dictionaries\n\nrules, especially messaging\n* GosuDocs\n\n« Javadocs\n\ni Deploying integration resources Ga\n\nResource Name New\nRESTART RESTART\nRESTART RESTART\nRESTART RESTART\nALT + SHIFT +L ALT + SHIFT +L\nALT + SHIFT +L / RELOAD ALT + SHIFT + L/ RELOAD\nRESTART RELOAD\nRESTART RELOAD\n\nGosu Enhancement RESTART RELOAD\n\n* Inadevelopment environment, resources require different actions to be deployed\n+ ALT + SHIFT + L: reloads PCF and displaykey changes without restarting the Server\n\n+ RELOAD: In Studio, Run> Reload Changed Classes\n\n+ Deploying Gosu changes in a local development environment only works if DCEVM is installed on your\ndevelopment machine\n\n* Restarting the server always deploys all changed resources\n\nQuestion\n\n_ _ Information exchange between systems that use the Internet for direct\n¢\n\n; application-to-application interactions are known as:\n\n“ A) Messaging\n\nB) Batch Processes\nC) Web Services\n\nSS eee eee ee eee estes\n\nGi\n\nAnswer\n\nInformation exchange between systems that use the Internet for direct\n¢~ ~ application-to-application interactions are known as:\n\n? A) Messaging\nB) Batch Processes\nC) Web Services\n\nThe correct answer is C) Web Services.\n\nSS eee ene ee soe Sse\n\nGi\n\nQuestion\n\nFor each of the InsuranceSuite integration mechanisms, identify its\ntypical “timing” (synchronous, asynchronous, or scheduled) and initial\n,’ direction (outbound or inbound):\n\n¢\n4\n\nPredefined plugins\nWeb services\nMessaging\n\nStartable plugins\n\nmoom>\n\nBatch processes\n\nSS eee eee ee eee estes\n\nAnswer Gi\n\n_— — For each of the InsuranceSuite integration mechanisms, identify its\nPa typical \"timing\" (synchronous, asynchronous, or scheduled) and initial\ndirection (outbound or inbound):\n\nPredefined plugins — Synchronous and outbound\nWeb services — Synchronous and inbound\nMessaging — Asynchronous and outbound\n\nStartable plugins — Asynchronous and inbound\n\nSS eee ene ee soe Sse\n\nmoo >\n\nBatch processes — Scheduled and outbound\n\nLesson\nobjectives ¢ Identify common technologies and strategies\nreview used for integration\n\n¢ Describe mechanisms commonly used by\ntechnical consultants\n\n¢ List resources available to technical\nconsultants\n\n--- ch11/lesson-02/slide-01.png ---\nGosu for Integration\n\n--- ch11/lesson-02/slide-02.png ---\nLesson\nobjectives ¢ Describe the general capabilities of a Gosu\n\nclass and its properties\n* Describe common Gosu features used for\nintegration, such as:\n+ Logging\n+ Exception handling\n+ Annotations\n\n+ Sequence utility\n\n--- ch11/lesson-02/slide-04.png ---\ni Packages\n\n* Packages organize related artifacts in a hierarchy\n¢ Classes, Enhancements and other files\n¢ All packages reside under .../configuration/gsrc folder\n* Guidewire recommends the following naming conventions:\n\n« <company_code>.<product_code>.mechanism.<functional_area>\n\n+ Examples v Di gsre\n* si.ta.classes.utilities > BB com.guidewire.pl\n> gw\n* si.ta.enhancements.entity > Bai libraries\n* Class/file names must be unique within v Bil classes\nthe package v Bil entity\n© AsBContactSummary\nutilities\n\nenhancements.entity\n\n--- ch11/lesson-02/slide-05.png ---\ni Access modifier keywords Ga\n\n« Use access modifier keywords to set the level of access to a top-level type (class,\ninterface, enumeration), or a type member (method, variable, or property)\n\nue, Description Applies to | Appliesto | Visiblein | Visiblein | Visible in | Visible Gosu default for\ntop-level | type class package subclass | byall\n— types members\n\npublic Fully accessible Yes Top-level types\nMethod\nProperty\nprotected Accessible only by types with - Yes Yes Yes Yes -\nsame package and subtypes\ninternal Accessible only in same Yes Yes Yes Yes - ~ =\npackage\nprivate Accessible only by declaring - Yes Yes - - - Variable\n\ntype that defines it\n\n--- ch11/lesson-02/slide-06.png ---\ni Other modifier keywords G\n\nOther Description\n\nModifier\n\nkeyword\n\nOverride Apply the override modifier to a method or property override function myMethod(\nimplementation to declare that the subtype overrides the myParameter : String )\n\nimplementation of an inherited method or property with the\nsame signature.\n\nAbstract Indicates that a type is intended only to be a base type of other —_ abstract class Vehicle {\ntypes. }\nFinal Specifies that the value of a property, local variable, or class exampleABC {\n\nparameter cannot be modified after the initial value is assigned. _ final var_name : String = \"John”}\nThe final modifier cannot be combined with the abstract\nmodifier on anything.\n\nStatic Gosu classes can define a variable stored once per Gosu class, private static var _name : String\nrather than once per instance of the class. This modifier can also\nbe used with properties and methods. If a class variable is static,\nit is referred to as a static variable.\n\n--- ch11/lesson-02/slide-07.png ---\ni Gosu classes\n\n¢ AGosu class (.gs file) describes an object properties and behaviors ©\n* Gosu classes are similar to classes in other object-oriented languages\n\n* To create a class, use the class keyword, followed by the class name, and then\n\ndefine its constructor, variables, properties, and methods\n\n« Meaningful name with Pascal case\n(First letter of each word is capitalized)\n\n* Optionally include access modifier as required/desired\n\n¢ Non-static classes are instantiated using the new keyword\n\nAccess is public by default\n\nPass any constructor arguments in parentheses\n\nGi\n\n© MySampleClass.gs x\n1 package si.ta.classes\n\n{\n\nclass Mys\n\nconstruct () {\n}\n\neIKVHewoN\n\n}\n\n® Gosu Scratchpad x\n\nae\n1 uses si.ta.classes.MySampleClass\n2 var myInstance = new MySampleClass ()\n\n--- ch11/lesson-02/slide-08.png ---\ni Extending a class Gi\n\n@©squere.gs x\nclass Square extends Rectangle implements ILineAndFill {\n\n9 construct () {\n\nsuper ()\n9 4}\n\n260\n29.1 Q override function calculateArea() : int {\n30, 's\n\nAccess to\ninherited\nproperties\n\naa return (4 * Width)\n42, }\n\nThe subclass can access to all non-private properties and methods declared in the\nsuperclass\n\n--- ch11/lesson-02/slide-09.png ---\ni Gosu methods\n\n* Declare a method using the function\nkeyword\n\n* Methods describe object behavior and\nfeatures\n\n* Optionally include access modifier as\nrequired/desired\n\n+ Access is public by default\n« Method name in Camel Case\n\n* Optionally describe parameters and return type\n(String, int, etc)\n\n* The this keyword refers to the instance of\nthe class from which the method is called\n\n| @©pectangle.os x |\n\n1\n2\n\n3\n\n33\n34\n35\n36\n37\n38\n39\n\npackage acme.ta.classes\n\nclass Rectangle {\n\nfunction calculateArea(): int {\nreturn (width * height)\n}\n\nfunction addToWidth(valueToAdd: int): void {\nthis. width = this. width + valueToAdd\n}\n\n--- ch11/lesson-02/slide-10.png ---\ni Block argument expression Ga\n\n> F @\n\nuses trainingapp.base.QueryUtil\n\n¢ Ablock is an\nexpression BIE var axanccotact ~\nof logic passed to |“ sPanecouts =\namethodasan © eee |\nargument a\n\noar (a\n& | Debugger] [EI console +*| )= wx 2 |e\n\nACME Credit Union\nNational Bank\n\n* The block | | Block part | Description\n\nconsists of four 1 \\ Identifies that the following is a block\n\nparts: 2 elementname A name representing each element of the array\n3 > Identifies the start of the condition\n4 condition A condition, which relates to the element\n\n--- ch11/lesson-02/slide-11.png ---\nDeclaring Gosu properties\n\n¢ Approach 1: Define getter and\nsetter methods\n\n¢ Best practice has variable names begin\nwith an underscore “_”\n\n¢ Approach 2: Use shorthand syntax\ne Use as keyword\n\n* Getter and setter are automatically\ncreated for you\n\n* They do not appear in the class\n\n¢ Both approaches are essentially\nequivalent, but developerhas more\n\ncontrol with the first approach ===>\n\n=:\n\nclass UserPreferen\n\n//1) Bepreach\nvar _heightInleters : BigDecimal\n\nreturn (this. heightInMeters / 0.0254) .round (MathContext.DECIMAL32) as double\n} else {\nreturn 0.0\n\n(height: BigDecimal) {\n\nif (this. heightInMeters != null) {\nthis. heightInMeters = (height * 0.0254) as double\n} else {\nthis. heightInMeters = 0\ny\n1\n//// epecach 2: Use syntax ////\nvar weight : BigDecimal as Weight\n\n--- ch11/lesson-02/slide-12.png ---\n| Property initialization G\n\nGosu enables a standard compact syntax for property initialization during object\ncreation\n\n« For example, suppose you have the following Gosu code:\n\nuses trainingapp.classes.Rectangle\n\nvar myRectangle = new Rectangle()\nmyRectangle.Height = 5\nmyRectangle.Width = 7\nmyRectangle.Label = \"Rectangle Area”\n\n« You can optionally use Gosu object initializers to simplify this code:\n\nuses trainingapp.classes.Rectangle\n\nvar myRectangle = new Rectangle() {\niHeight = 5,\n:Width = 7,\ntLabel = \"Rectangle Area\"\n\n}\n\n--- ch11/lesson-02/slide-13.png ---\ni Feature literals for property reference Gi\n\n* Statically refer to the features of a given type in the Gosu type system with feature\nliterals\n\n¢ Various kinds of feature references\n\n« Syntax: type#Feature\n\n« Property: ABContact#Address When it\n\n* Method: ABContact#addContactNote needs to be\n+ Uses type safe,\n\n¢ Bind argument values in method reference use feature\n\n* Supports chaining literals!\n\n--- ch11/lesson-02/slide-15.png ---\ni Logging\n\n>\n\n4 44\n\n“1\n\npackage trainingapp.classes [5\n\nuses gw.api.system.PLLoggerCategory\nuses gw.api.util.DisplayableException\nuses org.sif4).Logger\n\nclass Rectangle {\nconstruct () {\n}\nprotected var logger : Logger= PLLoggerCategory. CO!\n\nfunction enlarge(factor: int): String {\nif (factor <= 0) {\nlogger. info(\"Rectangel.enlarge() invalid factor \" + factor)\nthrow new DisplayableException (\"Requires a factor greater than 0\")\n)\n\nUses the slf4j API, in conjunction with Apache log4j-2 libraries and internal Guidewire libraries\n\n+ Itis possible for both internal Guidewire code or custom integration code to define additional logging\ncategories that do not show in the logging configuration file\n\n+ Itis also possible for third-party components, such as Apache, to provide their own logging categories\n\n* Each Guidewire application has its own unique categories as well\n\n--- ch11/lesson-02/slide-16.png ---\ni Exception handling\n\n* Gosu supports the full feature set for Java\nexception handling, including try/catch/finally\n\n5 * function hendleAnExceptionExemple(parml : int) (\nblocks E acti\n+ Exceptions are unchecked in Gosu 2 var x = 100\n2 var 2 =x / perm\n* You should add exception handling as —> } cate semelasrmenczacestion) {\nnecessary —> ) finany {\n4 }\n5 1\n\n+ Handle catch exceptions with try...catch...finally\n\nblocks\nu\n\n* Behavior is identical to Java exception handling 1s fence handleAnExceptionExample(parml : int) {\n16\n\n; i g f(permi == 0)(\nUnhandled exceptions are passed up the stack phe fo ow lege nctxcepeion ( as 0%)\n. 19 }\n* You can also throw exceptions as necessary 20 var x = 100\n\n2. var z =x / parm\n22 }\n\n--- ch11/lesson-02/slide-17.png ---\ni Annotation support = G\n\npackage trainingapp.classes\n\nuses...\n\n1 class Rectangle {\nconstruct () {\n\nGosu annotations are a simple syntax to provide metadata or behavior to a class,\nconstructor, method, or property\n\n+ Use the @ symbol followed by the annotation name\n* Often, an argument list within parentheses follows an annotation\n\n--- ch11/lesson-02/slide-18.png ---\ni Sequence utility\n\n¢ A Guidewire class that is used to generate unique, sequential numbers\n¢ Useful for business cases requiring numbers that are sequential or unique\n\n* Guidewire database stores sequence information\n* For each sequence, it maintains a record of the last number provided\n\n* The database provides the next number in the given sequence\n\n--- ch11/lesson-02/slide-19.png ---\ni Sequence utility syntax G\n\ngw.api.system.database.SequenceUtil.next(minVal, seqKey)\n* next method is used to request numbers\n* minVal is the minimum value for the first number in the sequence\n* seqKey is a unique name for the sequence\n© sequenceUtiltyExamples.gs\n\npackage trainingapp.demo.gosu\nuses gw.api.system.database.SequenceUtil\n\nclass SequenceUtilityE\n\npublic static function print Numbers (seqString : String) : void {\nvar firstNum = SequenceUtil.next(1, seqString)\nprint (seqString + \"-\" + firstNum)\nvar nextNum = SequenceUtil.next(1, seqString)\nprint (seqString + \"-\" + nexcium)\n\n--- ch11/lesson-02/slide-20.png ---\nSequence utility in action\n\nGosu Scratchpad\nI\n\n=:\n\npublic static function\n\nvar firstilum = SequenceUtil.next(1, seqString)\nprint (seqString + \"-\" + firstiium)\nvar nextilum = SequenceUtil.next(1, seqString)\nprint (seqString + \"-\" + nexttium)\n\niB\n\n(seqString : String) : void {\n\n> ¥F 8\n\nWt\n\nVv\n\nDebugger| [E] Console +\"\n\nuses trainingapp.demo.gosu.SequenceUtilityExamples\n\nvar seqUtil = SequenceUtilityExamples\nseqUtil.printTvoSequenceNumbers (\"abc\")\nseqUtil.printTvoSequenceNumbers (\"abc\")\nseqUtil.printTvoSequenceNumbers (\"xy2\")\n\nv\n\nH2 database view\n\nas\n\nx\n\n2\n\neet} cattnabe\"\n\nabe-3 1»\nae\" ean ‘abc’\n\nxye-1 yo\"\nxyz-2 } cat xyz’\n\nFun | Run eleded | Ato compete | Cea Sat statement\n\n‘SELECT*\n\nFROM AB_SEQUENCE\n\n‘SELECT*\n\nFROM AB_SEQUENCE:\n\nPUBLICID |BEANVERSION |SEQUENCENUMBER |ID |SEQUENCEKEY\nabt 3 4 1 abe\n‘ab2 1 2 2 me\n\n(2 rows, 16 ms)\n\nGi\n\n--- ch11/lesson-02/slide-21.png ---\ni Demonstration G\n\nCreate a custom class\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-02/slide-23.png ---\nQuestion\n\nan What is a package?\n7\n4\n\nSS eee eee ee eee estes\n\n--- ch11/lesson-02/slide-24.png ---\nAnswer\n\nae What is a package?\n\n¢\n4\n\nA package is a group of classes gathered together either because they execute a\ncommon business task, or because access to the classes must be limited only to the\nclasses in the package, or both.\n\nSS eee ene ee soe Sse\n\n--- ch11/lesson-02/slide-25.png ---\nQuestion\n\n,- — AGosu class is named Circle. Each instance must have a property for\nPa the circle's radius. This value can be accessed and conditionally\nmodified by methods in the Circle class and by methods in other classes.\nHow many elements must you create to implement this?\n\nSS eee eee ee eee estes\n\nGi\n\n--- ch11/lesson-02/slide-26.png ---\nAnswer Gi\n\n_- — AGosu class is named Circle. Each instance must have a property for\nPa the circle's radius. This value can be accessed and conditionally\nmodified by methods in the Circle class and by methods in other classes.\nHow many elements must you create to implement this?\n\nThree.\n1. Aprivate variable named _ radius.\n2. Aget method that retrieves the value of _radius.\n\n3. Aset method that sets the value of _radius.\n\nSS eee ene ee soe Sse\n\n--- ch11/lesson-02/slide-27.png ---\nQuestion\nThe Circle class extends the Oval class and implements the ICurveLine\naan interface.\nv7 1. Can Circle override methods from Oval?\n\n2. Can Circle override methods from |CurveLine?\n\nSS eee eee ee eee estes\n\nGi\n\n--- ch11/lesson-02/slide-28.png ---\nAnswer Gi\n\nThe Circle class extends the Oval class and implements the ICurveLine\n7 interface.\n\n? 1. Can Circle override methods from Oval?\n\n2. Can Circle override methods from ICurveLine?\n\n1. Yes\n\nFrom a keyword standpoint, yes. If Circle implements the ICurveLine interface,\nthen Circle must implement all the methods of the ICurveLine interface using the\nkeyword \"override\". However, because |CurveLine is an interface, the Circle class\nis actually just declaring the implementations of the methods. There are no\nmethod implementations in an interface, so there is nothing to \"override\" from an\nOOP standpoint.\n\nSee eseeseeseseeseses\nNh\n\n--- ch11/lesson-02/slide-29.png ---\nQuestion\n\n_— — Whatis the purpose of an annotation?\n\n¢\n¢\n4\n\nSS eee eee ee eee estes\n\n--- ch11/lesson-02/slide-30.png ---\nAnswer\n\n_- — Whatis the purpose of an annotation?\n\n¢\n¢\n4\n\nAn annotation provides metadata about the element being annotated.\n\nSS eee ene ee soe Sse\n\n--- ch11/lesson-02/slide-31.png ---\nQuestion\n\n,- — Howdoyou calla static method from a class?\n\n¢\n¢\n4\n\nSS eee eee ee eee estes\n\n--- ch11/lesson-02/slide-32.png ---\nAnswer Gi\n\n,- — Howdoyou calla static method from a class?\n¢\n\n¢\n4\n\nYou call a static method by referencing the method name from the class. You must\neither reference the fully qualified name of the class or import the class using the uses\nkeyword followed by the reference to the package path.\n\nSS eee ene ee soe Sse\n\n--- ch11/lesson-02/slide-33.png ---\nQuestion G\n\n_- — Why put logic in a Gosu class as opposed to an entity enhancement?\n\n¢\n¢\n4\n\nSS eee eee ee eee estes\n\n--- ch11/lesson-02/slide-34.png ---\nAnswer Gi\n\nae Why put logic in a Gosu class as opposed to an entity enhancement?\n\n¢\n4\n\nLogic that is reusable and generic must be in a Gosu class.\n\nLogic that is intrinsically connected with an entity must be inserted into an\nEnhancement.\n\nSS eee ene ee soe Sse\n\n--- ch11/lesson-02/slide-35.png ---\nLesson\nobjectives * Describe the general capabilities of a Gosu\nreview class and its properties\n\n* Describe common Gosu features used for\nintegration, such as:\n+ Logging\n+ Exception handling\n+ Annotations\n\n+ Sequence utility\n\n--- ch11/lesson-02/slide-36.png ---\ni Student exercise\n\nCreate a custom class\n\n--- ch11/lesson-03/slide-01.png ---\nGosu Queries\n\n--- ch11/lesson-03/slide-02.png ---\nLesson\nobjectives\n\n¢ Describe a query object\n\n¢ Identify various types of query restrictions\n\n¢ Write Gosu queries to retrieve objects from a\nGuidewire application\n\n¢ lIterate through the results of query\n\n--- ch11/lesson-03/slide-03.png ---\nQuery basics\n\n--- ch11/lesson-03/slide-04.png ---\n| Query objects G\n« AGosu query specifies the entity and criteria associated with the entity to retrieve\nfrom the Guidewire application\n« Use Gosu queries to retrieve one or more objects\n+ Referenced by foreign key relationships\n+ NOT in an array relationship <>\n* Query object specifies the query criteria al Ses)\n« Which entity to query\n« What restrictions to apply\n\nab_abcontact\n¢ Results object is a set of entity instances fetched from te = 1 ot\nGuidewire application\n\ny\n* How many? 0)\n\n« How to order?\n\n--- ch11/lesson-03/slide-05.png ---\n| Steps to execute a basic query\n\n1. Create the query object using the make method\n2. Create the results object using the select method\n\n3. Process the results of the query as needed\n\n--- ch11/lesson-03/slide-06.png ---\n| Step 1: Create the query object\n\n1 uses gw.api.database.Query\n2\n3 var output =\"\n—> 4 var queryObj = Query.make(entity.ABContact)\n\n* Query is a class in the gw.api.database package\n\n* make (EntityName) is a method that requires a named entity type\n\n--- ch11/lesson-03/slide-07.png ---\n| Step 2: Create the results object Gi\n\n1 uses gw.api.database.Query\n\n2\n\n3 var output = \"\"\n\n4 var queryObj = Query.make(entity.ABContact)\n— 5 var resultsObj = query0bj.select ()\n\n¢ Create the result object with select method\n\n* However, results are not fetched until they are referenced\n\n--- ch11/lesson-03/slide-08.png ---\n| Step 3: Process results\n\nuses gw.api.database.Query\n\nvar output = \"\"\nvar queryObj = Query.make(entity.ABContact)\nvar resultsObj = queryObj.select()\n\nfor(anABContact in resultsObj) {\n\noutput += anABContact.DisplayName + \"\\n\"\n}\nprint (output)\n\nwODInnswne\n\ni\n\n¢ Use a for loop to iterate through the result set\n\nStan Newton\n\nBo Simpson\n\nBo Simpson\nWilliam Weeks\nWilliam Andy\nWilliam William\n\n¢ DisplayName property improves the readability of the console output\n\n--- ch11/lesson-03/slide-09.png ---\n| Viewing approximation of SQL query Gi\n\n* toString approach\n\nOutput from console\noO\n\nuses gw.api.database.Query\n\nvar output = \"\"\n\nvar queryObj = Query.nake(entity.ABContact)\noutput += queryObj.tostring()\n\nvar resultsOb} = queryObj. select ()\n\nprint (output)\n\nSELECT /* ab:T:Gosu clase redefiner; */ FROM ab_abcontact gRoot WHERE gRoot.Retired = 0\n\n* withLogSQL approach\n\nOutput from log\n\n2028-05.\nFROM ab abcontact gRoot WHERE gRoot Retired = 0 [\n\nuses gw.api.database. Query\n\nvar output = \"\"\n\nvar queryObj = Query.make (entity. ABContact) .withLogSQL (true)\nvar resultsObj = query0b}. select ()\n\nfor(anaBContact in resultsOb3) {\noutput += anABContact.DisplayName + \"\\n\"\n\nv\n\nprint (output)\n\n18:48:37,836 INFO Executing sql = SELECT /* KeyTable:ab_abcontact; */ gRoot.ID col0, gRoot.Subtype colt\n\n--- ch11/lesson-03/slide-10.png ---\nQuery restrictions\n\n--- ch11/lesson-03/slide-11.png ---\n| compare method Gi\n\n* Comparison predicates are columns in SQL Where clause\n* queryObj.compare (type#Feature, operator, value)\n¢ When applied to string fields, the values in the field must match exactly the\ncomparison value\n\n* compare method is overloaded, meaning it has one or more method signatures\n\nuses gw.api.database.Query\nuses gw.api.database.Relop\n\nvar queryOb; ery. make (entity.ABPerson)\n\n(ABPersonéLastName, Relop.Zquals, \"Andy\")\n\nrsonélumDependents, Relop. Great:\n\nqueryOb3 (ABPersonéPreferred, Relop.Equals, true)\n\nvar myDate = '01/01/2018' .toDate()\nqueryOb}. compare (ABPersonéCreateTime, Relop. Gre:\n\nrhanOrEquals, myDate)\n\n—P 15 queryOb}.compare (ABPerson#TaxStatus, Relop.£quel\n\n--- ch11/lesson-03/slide-12.png ---\n| null values for query restrictions a\n\nuses gw.api.database.Query\nuses gw.api.database.Relop\n\n1\n\n2\n\n3\n\n4 var queryNull = Query.make(entity.ABPerson)\n\n5 var queryNotNull = Query.make(entity.ABPerson)\n6\n\n7\n\n8\n\n// ABE IS NULL\n—> queryNull.compare (ABPerson#Score, Relop.Equals, null)\n9\n10 // ABPerson where Score IS NOT NULL\n\n—==—11 queryNotNull.compare (ABPerson#Score, Relop.NotEquals, null)\n\n¢ Entities can have elements that allow for null values\n\n¢ If there is no value, the database leaves the field as null unless the element\nspecifies a default value\n\n¢ Restriction queries can compare for null or not null values\n\ngw.api.database.Query ANS! SQL\ncompare(entity.Property, Equals, null) where table.columnName IS NULL\ncompare(entity.Property, NotEquals, null) where table.columnName IS NOT NULL\n\n--- ch11/lesson-03/slide-13.png ---\n| Multiple restrictions ANDed together\n\nuses gw.api.database.Query\nuses gw.api.database.Relop\n\nvar output =\"\n\nvar queryObj = Query.make(ABPerson)\n\n// Last name\n\nqueryObj.compare (ABPerson#LastName, Relop.Equals,\n// £\nqueryObj. compare (ABPerson#FirstName, Relop.Equals,\n\nOIHHFwWN HE\n\ntt\n\nRestrictions are inherently ANDed together\n\n--- ch11/lesson-03/slide-14.png ---\n| Multiple restrictions ORed together Gi\n\n1 uses gw.api.database.Query\n\n2 uses gw.api.database.Relop\n\n3\n\n4 var output = \"\"\n\n5 var queryObj = Query.make(ABPerson)\n\n6 // Last na or First e\n\n7 queryObj.or(\\ criteria -> {\n\n8 criteria.compare (ABPerson#LastName, Relop.Equals, \"Andy\")\n\n9 criteria.compare (ABPerson#FirstName, Relop.Equals, \"William\")\n10 )\n\nor method requires block that specifies criteria to OR together\n\n--- ch11/lesson-03/slide-15.png ---\nAdditional restriction options Gi\n\n¢ See the Predicate\nMethods Reference in\nthe Gosu Reference\nGuide:\n\n®\nGuidewire ClaimCenter\n\n* between Gosu Reference Guide\n\n* compareIgnore\n\n* contains\n* subselect\n* startsWith\n\nGicuipewire\nAdapt and succeed\n\n--- ch11/lesson-03/slide-17.png ---\nCounting results Gi\n\n1 uses gw.api.database.Query\nZ Result count: 116\n3) var output = \"\"\n4 var queryObj = Query.make(ABPerson)\n5 var resultsOb}j = queryObj.select ()\n—> 6 var count = resultsObj.Count\n7 output += \"Result count: \" + count\n8 print (output)\n\n¢ Other methods:\n* resultsObj.HasElements (uses Count under the covers)\n\n* resulstsObj.iterator.hasNext (performs very poorly)\n\n* Depending on the requirement, there may be better performing alternatives...\n\n--- ch11/lesson-03/slide-18.png ---\n| Taking a peek without retrieving any data a\n\n* .Count is often used to answer questions such as:\n¢ Will this query return anything?\n¢ Will this query return too much?\n* These methods perform better and are more reliable than .count :\n* isEmpty does fast check to see if query has any results\n* getCountLimitedBy (x) returns number if results if less than x, otherwise x\n\n¢ Peeking is a waste of time and cycles if you intend to process the entire result set\n\n--- ch11/lesson-03/slide-19.png ---\n| Querying for one result G\n\n1 uses gw.api.database.Query\n\n2 uses gw.api.database.Relop\n\n3\n\n4 var output = \"\"\n\n5 var queryObj = Query.make(ABCompany)\n\n6 queryObj.compare (ABCompany#Name, Relop.Equals, “Albertson's\")\n— 7 var resultsObj = queryObj.select () .AtMostOneRow\n\n8 output += resultsObj.EmailAddress1\n\n9 print (output)\n\nAtMostOneRow is a property that...\n\ninfo@Albertsons.com\n\n+ Ifa single item exists, returns that single row\n* If no item exists, returns null\n\nIf multiple items exist, throws an exception\n\n--- ch11/lesson-03/slide-20.png ---\n| Sorting results\n\n¢ Ordering methods all take an object that implements the IquerySelectColumns\ninterface in the package as their one argument\n\nGi\n\n* The Paths .make method yields an object access path from the primary entity to a simple,\nforeign key, database-backed property\n\n« Access path cannot include virtual properties, methods, or calculations\n\nuses gw.api.database.Query\nuses gw.api.database.QuerySelectColumns\nuses gw.api.path. Paths\n\nvar queryObj = Query.make(ABPerson)\nvar resultsObj = queryObj.select()\n\nresultsObj.orderBy (QuerySelectColumns.path(Paths.make(ABPerson#PrimaryAddress, Address#State) ))\n\nresultsOb}. thenBy (QuerySelectColumns. path (Paths.make (ABPersonéLastName) ))\nresultsObj. thenBy (QuerySelectColumns.path (Paths .make (ABPerson#FirstName) ) )\nfor(anPerson in resultsObj) {\n\nprint (anPerson.PrimaryAddress.State +\": \" + anPerson.DisplayName)\n}\n\n2 Marc Lauria\n: Adelle Lynn\n\n2 Lorine Mccallion\n\n1: Alexa Purves\n\n: James Andersen\n\n: Samantha Andrews\n\n3 Eric Andy\nWilliam Andy\n\n1: Stefani Arrowsmith\n: Domonique Dames\n\n: John Dan\n\n: William Dan\nHarper David\n\n: William David\n\n--- ch11/lesson-03/slide-21.png ---\n| Demonstration G\n\nQueries with restrictions\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-03/slide-23.png ---\n| Filter entities on database\n\nReturn only what you need\n\nEntities can use up memory and processing time\n\nRequest the database only for entities that are essential to the current action\n* Perform filtering at the database rather than in memory\n* Avoid where() method\n¢ Avoid first(), last(), firstWhere(), and lastWhere() methods\n\nUse dot notation carefully\n\n--- ch11/lesson-03/slide-24.png ---\n| Filter at the database rather than in memory Gi\n\nAnti-Pattern\n\nBest Practice\n\nwor], H®\n\n10\nai\n12\n43\n\nvar targetPoli Policy\n// Performance suffers because\n// the query loads all s\n\nvar claimQuery = Query.make(Claim)\nfor (claim in claimQuery.select()) (\nif (claim.Policy == targetPolicy) {\n\nvar targetPolicy : Policy\n\nvar claimQuery = Query.make(Claim)\n\nclaimQuery.compare (Claim#Policy, Equals, targetPolicy)\nfor (claim in claimQuery.select()) {\n\n--- ch11/lesson-03/slide-25.png ---\n| Avoid where()\n\nAnti-Pattern\n\nBest Practice\n\n5 var resultContainer = Query.make(Address)\n\n6 «select () .toCollection() .where(\n\n7 \\ elt -> elt.Postalcode == \"90292-6043\" )\n\n10 var queryObject = Query.make (Address)\n\n11 // Apply qualifying where clause\n\n12 queryObject. compare (Address#PostalCode, Equals, \"90292-6043\")\n13 var selectObject = queryObject.select ()\n\n14 var resultIterator = selectObject.iterator()\n\nis for (address in resultIterator) {\n\n16 // do something with each address\n\n17\n\n--- ch11/lesson-03/slide-26.png ---\n| Avoid first(), last(), firstWhere(), and lastWhere() [Fj\n\nvar queryAddresses = Query.make (Address)\n\nvar selectAddressesList = queryAddresses.select () .toList ()\n\n. selectAddressesList.sortBy(\\ addr -> addr.PostalCode)\n¢ Anti-Pattern\n\nss = selectAddressesList.firstWhere(\\ addr -> addr.City\n\n\"Chicago\"\n\nFOR lastWh\n\nQ: Sort by Postal Code in ndi\n\nselectAddressesList .sortByDescending(\\ addr -> addr.PostalCode)\n\n1 vax lasta\n\nselectAddressesList.lastwhere(\\ addr -> addr.City\n\nQuery for addre.\n\nvar queryAddresses = Query.make (Address)\nqueryAddresses.compare ( Address#CityDenerm, Equals, \"Chicago\")\nvar selectAddressesList = queryAddresses.select() .toList ()\n\n¢ Anti-Pattern\n\nselectAddressesList.sortBy( \\ addr -> addr. PostalCode)\n\nss = selectAddressesList. first ()\n\nselectAddressesList.sortByDescending(\\ addr -> addr.PostalCode)\n\n--- ch11/lesson-03/slide-27.png ---\nAvoid first(), last(), firstWhere(), and Gi\nlastWhere() (continued)\n\nuses gw.api.database.Query\nuses gw.api.database.QuerySelectColumns\nuses gw.api.path. Paths\n\n¢ Best Practice var queryAddresses = Query.make (Address)\nqueryAddresses.compare( Address#CityDenexzm, Equals, \"Chicago\")\nvar selectAddresses = queryAddresses.select ()\n\nvar fix selectAddresses.orderBy (QuerySelectColumns. path (\nPaths.make(Address#PostalCode) )) .FirstResult\nvar la = selectAddresses.orderByDescending (QuerySelectColumns. path (\n\nPaths.make (Address#PostalCode) )) .FirstResult\n\n--- ch11/lesson-03/slide-28.png ---\n| Count entities on database\n\n¢ Let the database count entities\n* Avoid countWhere()\n¢ Avoid toCollection()\n\n« Avoid iteration over entities from database to count\n\n--- ch11/lesson-03/slide-29.png ---\n| Avoid countWhere() Fi\n\n4 var claim : Claim\n5\n¢ Anti-Pattern 6 claim.Activities.countWhere(\\ a ->\n7 a.ActivityPattern.Code \"notification\"\n8 && a.Status == ActivityStatus.7C_OPEN)\nai var claim : Claim\n12 var actPattern : ActivityPattern\n13\n. 14 var count = Query.make(Activity)\n¢ Best Practice 1s . compare (Activity#ActivityPattern, Equals, actPattern)\n16 .compare (Activity#Status, Equals, ActivityStatus.TC_OPEN)\n17 «join (Activity#Claim)\n18 -compare (Claim#ClaimNumber, Equals, claim.ClaimNumber)\n\n19 -select () .Count\n\n--- ch11/lesson-03/slide-30.png ---\n| Avoid toCollection()\n\n¢ Anti-Pattern 6 var count = Query.make(Claim) .select () .toList () .count\n\ne Best Practice 4 var count = Query.make(Claim) .select() .Count\n\n--- ch11/lesson-03/slide-31.png ---\n| Avoid iteration over entities from database to [,\n\ncount\n\n¢ Anti-Pattern\n\nBOw mI V Ho\n\na\n\n¢ Best Practice 4\n\nvar results = Query.make(Claim) .select ()\nvar nCount: int = 0\n\nfor (c in results.iterator()) {\nnCount = nCount + 1\n\n}\n\nreturn nCount\n\nvar count = Query.make(Claim) .select() .Count\n\n--- ch11/lesson-03/slide-32.png ---\nQuestion\n\n_ _ Which approach is used to record a more specific version of the SQL for\nOo” a query?\n“ 1\n\n. queryObj.toString\n2. queryObj.withLogSQL (true)\n\nSeo e Soe esses see see\n\nGi\n\n--- ch11/lesson-03/slide-33.png ---\nAnswer\n\n__ Which approach is used to record a more specific version of the SQL for\n7 a query?\n, A. queryObj.toString\n\nB. queryObj.withLogSQL\n\nThe correct answer is B. queryObj.withLogSQL (true)\n\nSoo eS eee soe ese ese\n\nGi\n\n--- ch11/lesson-03/slide-34.png ---\nQuestion\n\n_— — Whatis the difference between a query object and results object?\n\n¢\n¢\n¢\n\nSeo e Soe esses see see\n\n--- ch11/lesson-03/slide-35.png ---\nAnswer fa\n\n_- — Whatis the difference between a query object and results object?\n\n¢\n¢\n¢\n\nA) Aquery object specifies the entity and the query criteria.\n\nB) Aresults object is a set of one or more entity instances fetched from the\nGuidewire application.\n\nC) This distinction is helpful for understanding the concept of a query and of set of\nresults. In practice, query results are fetched from the Guidewire application when\nthey are counted, iterated over, or when one object is retrieved.\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-03/slide-36.png ---\nQuestion\n\n,- — Which query restriction uses a block of compare methods?\n\n¢\n¢\n¢\n\nSeo e Soe esses see see\n\n--- ch11/lesson-03/slide-37.png ---\nAnswer fa\n\n,- — Which query restriction uses a block of compare methods?\n\n¢\n¢\n¢\n\nThe OR restriction uses the or method with a block of compare methods such as:\nvar queryObj = Query.make(ABCompany).withLogSQL (true)\nqueryObj.or(\\ criteria -> {\ncriteria.compare(ABCompany#Score, Relop.LessThan, 50 )\n\ncriteria.compare(ABCompany#InspectionRequired, Relop.Equals, true)\n\nSoo eS eee soe ese ese\n\n7)\n\n--- ch11/lesson-03/slide-38.png ---\nQuestion\n\n_ _ What happens if you use the AtMostOneRow property in a query, and the\nOo” query returns more than one object?\n¢\n\nSeo e Soe esses see see\n\nGi\n\n--- ch11/lesson-03/slide-39.png ---\nAnswer\n\nWhat happens if you use the AtMostOneRow property in a query, and the\n~ query returns more than one object?\n\n4\n¢\n¢\n¢\n\nAn exception is thrown when a query that uses the AtMostOneRow property, returns\nmore than one object.\n\nSoo eS eee soe ese ese\n\nGi\n\n--- ch11/lesson-03/slide-40.png ---\nLesson\n\nobjectives ¢ Describe a query object\nreview ¢ Identify various types of query restrictions\n\n¢ Write Gosu queries to retrieve objects from a\nGuidewire application\n¢ lIterate through the results of query\n\n--- ch11/lesson-03/slide-41.png ---\n| Student exercise\n\nQuery the assigned user contact\n\n--- ch11/lesson-04/slide-01.png ---\nBundles and Database Transactions\n\n--- ch11/lesson-04/slide-02.png ---\nLesson\nobjectives\n\n¢ Describe bundle context\n\nDifferentiate between read-only and writable\nbundles\n\nUtilize API methods for creating and\ncommitting bundles\n\nAdd and/or edit entity instances in a bundle\nReference original values for edited entity\ninstance fields\n\nUnderstand bundle best practices for\nintegration\n\n--- ch11/lesson-04/slide-04.png ---\n| Bundles Gi\n\ng\n\naBankAcount\n\naFlagEntry\n\nXN\n\naLegalCase\n\n* To manage database transactions, Guidewire applications group entity instances\nin groups called bundles\n\n¢ A bundle is an in-memory container for entity instances that represent rows in the\ndatabase\n\n« Includes new entity instances, changed entity instances, and retired entity instances\n\n--- ch11/lesson-04/slide-05.png ---\n| Entity instances\n\n¢ Java objects that represent\n\n¢ To view an existing entity instance —eon\n\nDatabase\n\nab_abcontact\n\ndatabase rows\n\nthe application must read data from —Butingsmeseab_abi78\nthe database and place the entity “®t as\ninstance into a bundle\n\nHealth South ab:73 56\n\n* To modify an existing entity instance the application must:\n\n1.\n\nRead entity instance from the database into the application\nserver\n\nPut them in a bundle\nModify them in the bundle\n\n. Commit the bundle of changes back to the database\n\nGi\n\nApplication Server\n\n= +g\n\nt\n\nGenerated Java class\n\nlo\n\n--- ch11/lesson-04/slide-06.png ---\n| How are entity instances read? a\n\n« Viaa query Database Application Server\nb\n+ Via accessors from an existing entity\ninstance a @S,\n* aBContact.PrimaryAddress Burlingame Saab ab:78 134 > [sz\n+ Returns a single address entity instance “”*\"*°\"* oben ad\nHealth South ab:73 56\n* aBContact.BankAccounts t\n\n+ Returns an array of bank account entity instances\n¢ But performing a query for every accessor would be far too\n\nexpensive | y\n* Each one is cheap but they add up @\n* The solution is two levels of caching\n\n¢ The first level is the bundle which represents local cache\n* The second level is the application server global cache\n\nGenerated Java class\n\n--- ch11/lesson-04/slide-07.png ---\n| Accessor Flow — claim.Policy\nBundle\n(local)\nApp Server\n(global)\n\nNetwork Boundary\n\nDatabase\n\n--- ch11/lesson-04/slide-08.png ---\n| Accessor Flow — claim.Policy (continued)\nBundle\n(local)\nApp Server\n(global)\n\nNetwork Boundary\n\n-_ - lessscsscscsses, |\n\n--- ch11/lesson-04/slide-09.png ---\n| Accessor Flow — claim.Policy (continued)\n\nBundle\n(local)\n\nSS\n\nApp Server\n(global)\n\nNetwork Boundary\n\nDatabase\n\n--- ch11/lesson-04/slide-10.png ---\n| Accessor Flow — claim.Policy (continued)\n\nBundle\n(local)\n\nApp Server\n(global)\n\nNetwork Boundary\n\nDatabase\n\n--- ch11/lesson-04/slide-11.png ---\n| Accessor Flow — claim.Policy (continued)\nBundle\n(local)\nApp Server -——\n(global)\n\nNetwork Boundary\n\nDatabase\n\n--- ch11/lesson-04/slide-12.png ---\n| Accessor Flow — claim.Policy (continued)\n\nBundle\n(local)\n\nSN\nAS\n\nApp Server\n(global)\n\nNetwork Boundary\n\nDatabase\n\n--- ch11/lesson-04/slide-13.png ---\n| Accessor Flow — claim.Policy (continued)\nBundle\n(local)\nApp Server\n(global)\n\nNetwork Boundary\n\n-_ - lessscsscscsso: |\n\n--- ch11/lesson-04/slide-14.png ---\n| Accessor Flow — claim.Policy (continued)\n\nBundle\n(local)\n7\n¢\nApp Server\n(global)\n\nNetwork Boundary\n\n- - essscoscssess: |\n\n--- ch11/lesson-04/slide-15.png ---\n| Accessor Flow — claim.Policy (continued)\n\nBundle\n(local)\nRl\n4\nApp Server\n(global)\n\nNetwork Boundary\n\n-_ - lessscsscscsso: |\n\n--- ch11/lesson-04/slide-16.png ---\n| Bundle types\n\n¢ Entity instances retrieved from a database\nquery\n\n* Foreign key entity or array key entities\nreferenced by an entity instance in a read-\nonly bundle\n\nr\n\n—>\n=>\n\nJ\n%\n\nGi\n\nEntity instances that are being edited or\nretired in the user interface, an application\nprocess, or in code\n\nEntity instances you intend to create or\nmodify in the database must first exist or be\nadded in a writable bundle\n\nForeign key entity or array key entities\nreferenced by an entity instance already ina\nwritable bundle G mo\n\nv\ng-5\n\n--- ch11/lesson-04/slide-17.png ---\n| Bundle context Gi\n\n¢ Application creates current bundle to —*_— Integration code creates bundle\ncreate, read, update, and/or retire explicitly\ndata\n\n* Contains entity instances available\nto the current code context\n\n* Code determines bundle contents\n¢ New bundles are writable\n\n¢ Read-only or writable\n\nmm lgrY\n\n--- ch11/lesson-04/slide-18.png ---\n| Committing a bundle\n\nBundle\n\n* Commits are transactional\n+ All DB changes occur in a transaction, and succeed or fail as a group\n\n+ A failure of any entity instance in the bundle to successfully commit will cause changes or additions to\nany entity instance in the bundle to be rolled back\n\n+ In most situations bundle commits are automatic unless you are controlling the bundle\n+ Because you created the bundle\n\n* Or you've taken over control of the Current bundle\n\n--- ch11/lesson-04/slide-19.png ---\n| Automatic bundle processing\n\nExplicit bundle manipulation is not required\nIn:\n\nBusiness rules\n\nWorkflows\n\nCertain plugins\n\nChanges made through the user Interface\n\nIn the above contexts, bundle manipulation On\nis handled by the application ny\nChanges, Additions, Retires are committed\n\nto the database at an appropriate time\ndepending on context\n\n--- ch11/lesson-04/slide-20.png ---\n| Manual bundle processing\n\n* Your code must explicitly manage\nbundles for:\n\n« Web services that make DB changes\n* Batch processes that make DB changes\n\n* Modifications to entities returned from\nqueries\n\n* Certain plugins\n\n--- ch11/lesson-04/slide-21.png ---\n| Gosu capabilities with bundles Gi\n\nCreate new bundles « Remove an entity instance from a bundle\nModify entity instances in writable * Modify entity instances in a read-only\nbundles bundle\n\nIdentify whether an entity instance in a * Copy a newly created entity instance\nbundle has changed since it was read from one bundle to another\n\nfrom the DB + From a bundle perspective new entity\n\nCopy unchanged entity instances from instances are treated as “changed”\n\none bundle to another\n\nCommit a bundle\n\n--- ch11/lesson-04/slide-22.png ---\nWorking with bundles\n\n--- ch11/lesson-04/slide-23.png ---\n| Committing the current bundle\n\n* gw.transaction.Transaction.getCurrent ()\n* Gets current bundle\n\n* bundle.commit ()\n* Commits every entity instance in the bundle\n\n¢ Make sure that the Commit is appropriate for the\nprogramming context\n¢ The Current bundle contains data known to the current context,\n\nsuch as entity instances being presented/changed in the user\ninterface\n\n* Committing data inappropriately can cause data integrity problems\n\nLAY\n\nPLL /\n\nOYG\n\nWR\n\nXY\n\nWA\nWw\n\n9\n\nVY \\\n\n--- ch11/lesson-04/slide-24.png ---\n| Create a new bundle: runWithNewBundle Gi\n\n* gw.transaction.Transaction.runWithNewBundle(\\ newBundle -> {\n\nodeBloc: Nol\n\n* Create a new bundle, no user specified\n« Requires permissive user credential context\n\n* gw.transaction.Transaction.runWithNewBundle(\\ newBundle -> {\n\nCodeBlock } , user ) <>\nAy\n\n* Create a new bundle with specified user\n¢ New bundles are always writable\n* tis not necessary or desirable to commit the bundle\n\n« runWithNewBundle block automatically commits the bundle at the end of the method by\ndesign\n\n--- ch11/lesson-04/slide-25.png ---\n| runWithNewBundle and new entity instance Gi\n\n¢ Any entity instantiated within the block\ncontext will automatically be added to <+. Ss\nthe bundle belonging to the block, and =>\npersisted to the database at the eé.\nconclusion of the block @\n\ngw. transaction. Transaction. runWithNewBundle(\\ newBundle -> {\n— var newEntity = new ABPerson()\nnewEntity.LastName = \"Jones\"\n}, username)\n\n--- ch11/lesson-04/slide-26.png ---\n| Create a new bundle: newBundle Gi\n\n* gw.transaction.Transaction.newBundle () <S\n\n* Creates a new bundle\n\nNo code block\n\n« No user, so requires permissive user credential context\n\n« Commit is not automatic\nbundle. commit ()\n\n* Call commit to save a new\nentity instance or changed\nentity instance\n\n>\n\nuses trainingapp.base.QueryUtil\nuses gw.transaction.Transaction\n\nvar targetPerson = QueryUtil.findPerson(\"ab:5\")\nvar newBundle = Transaction. nevBundle()\ntargetPerson = newBundle.add(targetPerson)\ntargetPerson.MiddleName = \"John\"\n\nnewBundle. commit ()\n\n--- ch11/lesson-04/slide-27.png ---\n| Copying an entity instance\n\nol\n\n* Copying entity instance from read-only to writable bundle:\n* origEntity = writableBundle.add(origEntity)\n\n* Copying entity instance into a new bundle: NI YZ <\n\n* origEntity = newBundle.add(origEntity)\n\nto, LEW,\nOe ROY\nSN\n\ncd\n\nWAU\n\nPL Li\nP77\nmam\nq\n-\n\n1 uses trainingapp.base.QueryUtil\n2 uses gw.transaction.Transaction\n\nvar targetPerson = QueryUtil. findPerson(\"ab:5\")\nvar newBundle = Transaction. newBundle()\n——> 6 targetPerson = newBundle.add(targetPerson)\n7 targetPerson.MiddleName = \"John\"\nnewBundle.commit ()\n\n--- ch11/lesson-04/slide-28.png ---\nQuery results and Bundles G\n\n——p 3\n\nODIKHUKMS\n\n10\nii\n12\n13\n14\n15\n16\n17\n18s\nme 19\n\ngw.transaction.Transaction. runWithNewBundle(\\newBundle -> {\n\nvar query0bj = gw.api.database.Query.make(ABCompany)\nqueryObj.compare (ABCompany#Name, Equals, \"Albertson's\")\nvar targetCompany = queryOb}.select () .AtMostOneRow\n\n// targetCompany must be copied from read-only bundle\n// to\ntargetCompany = newBundle.add(targetCompany)\n\new bundle\n\n// Set the Inspection fields as appropriate\ntargetCompany.InspectionRequired = true\ntargetCompany.InspectionDate = gw.api.util.DateUtil.currentDate()\n\n// runWithNewBundle() executes an implicit commit; user ca\n// is requ\n\next\n\ned wh\n\nyn none is supplied\n}, username)\n\n--- ch11/lesson-04/slide-29.png ---\nQuery results and Bundles (alternative syntax) Gi\n\np> 21 var newBundle = gw.transaction.Transaction. newBundle()\n22\n23 var queryObj = gw.api.database.Query.make(ABCompany)\n24 queryObj.compare (ABCompany#Name, Equals, \"Albertson's\")\nyay var targetCompany = queryObj.select () .AtMostOneRow\n26\n27 // targetCompany must be copied from read-only bundle\n28 // to new bundle\n\nmm 29 targetCompany = newBundle.add(targetCompany)\n30\n31 Inspection fields as appropriate\n32 targetCompany.InspectionRequired = true\n33 targetCompany.InspectionDate = gw.api.util.DateUtil.currentDate()\n34\n35 // requires an explicit commit; user c\n\n36 // so it req\n=> 37 newBundle.commit ()\n\nres a service\n\n--- ch11/lesson-04/slide-30.png ---\n| Foreign keys and array keys Gi\n\n* References from a parent to a foreign key or array key cause the referenced entity\ninstance(s) to be loaded into the same bundle as the parent\n\nworgVHsYH\n\ngw.transaction. Transaction. runWithNewBundle(\\newBundle -> {\nvar queryObj = gw.api.database.Query.make(ABCompany)\nquery0bj.compare (ABCompany#Name, Equals, \"Albertson's\")\n\nvar targetCompany = query0bj.select () .AtMostOneRow\n\nW/\n\n// to new bundle\ntargetCompany = newBundle.add(targetCompany)\n// Set the In fields as ar ate\n\ntargetCompany.InspectionRequired = true\ntargetCompany.InspectionDate = gw.api.util.DateUtil.currentDate()\n\nvar primaryContactPerson = targetCompany.PrimaryContact\nprimaryContactPerson.Emailaddress1 = \"inspectors@albertsons.com\"\n\n}, username)\n\n--- ch11/lesson-04/slide-31.png ---\n| Example: new entity instances Gi\n\n« Any entity (keyable bean) instantiated within the block context will automatically\nbe added to the bundle belonging to the block, and persisted to the database at\nthe conclusion of the block\n\n3 gw. transaction. Transaction. runWithNewBundle(\\ newBundle -> {\n> 4 var newAddress = new Address ()\n\n5 newAddress.City = \"Marina Del Rey\"\n\n6 newAddress.State = State.TC¢_CA\n\n7 }, username)\n\n¢ lf you use the alternative syntax, you'll have to pass in the bundle to the\nconstructor of the entity, so the entity will be created in the new bundle\n\n8 var newBundle = gw.transaction.Transaction.newBundle()\n9\nmmm i0 var newAddress = new Address (newBundle)\n11 newAddress.City = \"Marina Del Rey\"\n12 newAddress.State = State.TC_CA\n13\n\n14 newBundle. commit ()\n\n--- ch11/lesson-04/slide-32.png ---\n| Copying entity instances to bundle restrictions Gi\n\nse te\nwy wy\nNI r a Sd a\nUnmodified i i Unmodified\noO : i\n\nG—o\n\nModified H\n\nNew in First\n\nNew in Second\n\n--- ch11/lesson-04/slide-34.png ---\n| Original values Gi\n\n¢ Prior to the commit, Gosu retains a copy of each entity instance read from the\ndatabase\n\n¢ Several properties and methods let you work with the original data in the entity\ninstance\n* entityName.Changed\n+ Returns true if any property on the entity instance has changed\n* entityName. isFieldChanged (Entity#FieldName)\n+ Returns true if a property has changed since the entity instance was read from database\n\n* entityName.getOriginalValue (Entity#FieldName.getPropertyInfo()as\nIEntityPropertyInfo)\n\n+ Returns property value read from database\n\n--- ch11/lesson-04/slide-35.png ---\n| Using original values example Gi\n\nprivate static function createABCompanyNoteForInspection(targetCompany: ABCompany, inspectionDat\nvar hasInspectionDateChanged = targetCompany. isFieldChanged (ABCompanyéInspectionDate)\nif (nasInspectionDateChanged) {\nvar newNote = new ContactNote ()\nnewllote. Subject = \"Change to inspection date”\nnewNlote.ContactNoteType = typekey.ContactNlotelype. 7¢_DATA_UPDATE\nvar originalInspectionDate = targetCompany.getOriginalValue (ABCompany#InspectionDate.getPropertyInfo() as IEntityPropertyInfo)\nnewNote.Body = String. format(\"Inspection date updated from #s to #s \", {originalInspectionDate, targetCompany.InspectionDate})\nreturn newNote\n} else\nreturn null\n\nContactNote {\n\nEdit Note\n\nContact Note Type Update Contact Data a\nConfidential? Yes (¢) No\n\nSubject Change to inspection date\nBody Inspection date updated\n\nfrom 2014-12-12 to 2015-01-\n1\n\n--- ch11/lesson-04/slide-37.png ---\n| Updating the Database Gi\n\nNo Current Bundle for integration resources\nUse Transaction. runWithNewBundle(/ bundle ->{}) or\nTransaction.newBundle ()\nIf you expect to update large numbers of entities:\n“Large number of entities” is a relative term\nConsider using paging with regular commits\nKeep bundle sizes as small as practicable\nBe careful about how you use accessors\n\nUse Query best practices\n+ Do filtering at the database rather than in memory — Let the DB do what it’s good at\n\n+ See “Guidewire Query API” lesson for more information\n\n--- ch11/lesson-04/slide-38.png ---\n| Updating the Database in a Batch Process\n\n¢ Simple minded approach:\n\n6 gw.transaction.Transaction. runWithNewBundle(\\ newBundle -> {\n7 queryResults.each(\\ oneResult -> {\n\n8 var tyToM = newBundle.add(oneResult)\n\n9 //\n\n10 )\n\n11 }, username)\n\n* Two main problems:\n\n« Memory\n\n¢ Bundle performance\n\nEvery new accessor retrieves an entity into the bundle\nUsing accessors from those entities retrieves more entities\n\nBundles can grow very large\n\n--- ch11/lesson-04/slide-39.png ---\n| A Better Approach: Paging Plus Regular Commits\n\n¢ Better approach:\n\n— var pageSize = 10000\n—> var chunkSize = 250\nresults. set PageSize (pageSize)\nfor( entities in com.google.common.collect.Iterables.partition(results, chunkSize) )\ngw.transaction.Transaction. runWithNewBundle( \\ bundle -> {\nfor( e in entities) {\n\nvar Modify = bundle.add(e)\n\n}\n}, username )\n\n¢ Page size: 10,000\n¢ Bundle size: 250\n\n{\n\n--- ch11/lesson-04/slide-40.png ---\n| Paging Plus Regular Commits — Considerations Gi\n\n¢ Optimal page and bundle sizes will vary with specific tables, queries, DB’s, and\nenvironments\n\n* There is no one size fits all\n* Performance testing can be very revealing\n¢ Still likely to be slow for big queries\n« Paging doesn’t work well with some types of modification\n\n* Modifying columns you queried on repositions the cursor\n\n--- ch11/lesson-04/slide-41.png ---\n| Paging with Modifications\n\nApp\nserver\n\n--- ch11/lesson-04/slide-42.png ---\n| Paging with Modifications (continues\n\nApp\nserver\n\n|\nI\nI\n\n--- ch11/lesson-04/slide-43.png ---\n| Paging with Modifications (continues\n\nApp\nserver\n\n|\nI\n\n--- ch11/lesson-04/slide-44.png ---\n| Paging with Modifications (continues G\n\nApp\nserver\n1\n\nDatabase\n\nSkipped\nrows\n\n--- ch11/lesson-04/slide-45.png ---\n| Demonstration G\nGosu bundles\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-04/slide-47.png ---\nQuestion\n\n_- — Whatis a bundle?\n\n¢\n¢\n¢\n\nSeo e Soe esses see see\n\n--- ch11/lesson-04/slide-48.png ---\nAnswer\n\n_- — What is a bundle?\n¢\n\n¢\n¢\n\nA Guidewire bundle is a set of in-memory entities that are saved to the database as a\nunit. Each bundle corresponds to one database transaction.\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-04/slide-49.png ---\nQuestion G\n\n_ _ For each of the following, identify if its an example of auto commit or\n7’ manual commit?\n\n, A) Queried entities that must be modified\nB) Code executed from the UI in edit mode\nC) Code executed in business rules\n\nD) Code executed from the UI in read-only mode\n\nSeo e Soe esses see see\n\n--- ch11/lesson-04/slide-50.png ---\nAnswer Gi\n\n_ _ For each of the following, identify if its an example of auto commit or\n7’ manual commit?\n\n¢ A) Queried entities that must be modified\nB\nCc\nD\n\nCode executed from the Ul in edit mode\n\nCode executed in business rules\n\nSwv\n\nCode executed from the UI in read-only mode\n\n&\n\nManual commit\n\nwy\n\nAuto commit\nCc\nD\n\nAuto commit\n\nwv\n\nManual commit\n\n=\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-04/slide-51.png ---\nQuestion G\n\n_- — What kind of entities are initially put into read-only bundles?\nPa Under what circumstance would you need to copy one of those entities\n: to a writable bundle and how is this done?\n\nSeo e Soe esses see see\n\n--- ch11/lesson-04/slide-52.png ---\nAnswer Gi\n\n_— — What kind of entities are initially put into read-only bundles?\nPa Under what circumstance would you need to copy one of those entities\n: to a writable bundle and how is this done?\n\nEntities that are the result of a query are put into read-only bundles, and entities\nreferenced by foreign key are put into a read-only bundle if the referencing entity is\nalso in a read-only bundle.\n\nYou need to copy these entities to a writable bundle if you need to modify them, which\nis done via the bundle's add method.\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-04/slide-53.png ---\nLesson\nobjectives\nreview\n\n¢ Describe bundle context\n\nDifferentiate between read-only and writable\nbundles\n\nUtilize API methods for creating and\ncommitting bundles\n\nAdd and/or edit entity instances in a bundle\nReference original values for edited entity\ninstance fields\n\n--- ch11/lesson-04/slide-54.png ---\n| Student exercise\n\nCreate a contact summary note\n\n--- ch11/lesson-05/slide-01.png ---\nGosu Templates\n\n--- ch11/lesson-05/slide-02.png ---\nLesson\nobjectives\n\nUse Gosu Templates to extract data for any type\nof text format\n\n--- ch11/lesson-05/slide-03.png ---\n| Gosu Template Gi\n\nau .\n(publicID),(bankName) publicID,ab:68\nab:68,FastCash — G& —> bankName,FastCash\n\nGosu\nTemplate\n\n« AGosu Template generates dynamic, formatted text, based on input parameters\n« Always evaluates to a string\n\n« Accepts any number of input parameters\n\n¢ Evaluates parameters and derived values into text\n\n¢ Supports scriptlet syntax for API calls and control of flow\n\n--- ch11/lesson-05/slide-04.png ---\n| Steps to create a Gosu Template Gi\n\n* To create a new Gosu Template: See\n\nGosu Program [Ei New Gosu Template x\n¢ Right-click the parent package © eet —> Name: |BankAccountDataTemplate\n+ Select New > Gosu Template @ GxModa : OK] {Cancel\n\n+ Provide a name for the template See Soviet\n\n+ <entity/description>Template\n\n¢ All Gosu Template files have a .gst extension\n\n@® BankAccountDataTemplate.gst |\n\na <#@ params(contactID : String, aBankAccount : BankAccount) #>\ncontact, ${contact1D}\nbankName , ${aBankAccount .BankName}\n\n4 routingNumber, ${aBankAccount.RoutingNumber}\n\n5 accountNumber, ${aBankAccount .AccountNumber}\naccountType, ${aBankAccount .AccountType}\n<# if (aBankAccount.AccountType == BankAccountType.TC_SAVINGS) { &>\nageOfMessage ,<@¢ageOfMessageInSecondsté>\n\n3 <t) &>\n\n--- ch11/lesson-05/slide-05.png ---\n| Gosu Template syntax: parameters Gi\n\n@ BankAccountDataTemplate.gst\n\nbankName , ${aBankAccount.BankName}\nroutingNumber , ${aBankAccount.RoutingNumber}\naccountNumber , ${aBankAccount.AccountNumber}\naccountType ,${aBankAccount.AccountType}\n7 <8 if (aBankAccount.AccountType == BankAccountType.TC_ SAVINGS) { &>\n8 ageOfMessage ,<@@ageOfMessageInSeconds@é@>\n<% } &>\n\n¢ Input parameter declaration syntax\n* <%@ params ( paraml : type, param2 : type, ..) %>\n\n¢ White space and line breaks are rendered in the Gosu Templates\n\n--- ch11/lesson-05/slide-06.png ---\n| Gosu Template syntax: expressions Gi\n\n@ BankAccountDataTemplate.gst |\n: String, aBankAccount : BankAccount) %>\n\n3 5 BankAccount . BankName}\n4 routingitumber, ${aBankAccount.RoutingNumber}\n5 accountNumber , ${aBankAccount.AccountNumber}\naccountType , ${aBankAccount .AccountType}\n<® if (aBankAccount.AccountType == BankAccountType. TC SAVINGS) { %>\nageOfMessage ,<@@ageOfMessageInSecondst@@>\n<t } >\n\n* Template expression syntax\n* ${param1} orf <%= paraml %>\n* Static text is outside of a template expression, template parameter, or template\nscriptlet\n* contact, is treated as static text\n¢ For example, if contactID is ab:5, this renders as contact,ab:5\n\n--- ch11/lesson-05/slide-07.png ---\n| Gosu Template syntax: scriptlets Gi\n\n@ BankAccountDataTemplate.gst |\n\n1 <8@ params(contactID : String, aBankAccount : BankAccount) %>\n2 contact ,${contactID}\n3 bankName , ${aBankAccount.BankName}\nroutingNumber , ${aBankAccount.RoutingNumber}\naccountNumber , ${aBankAccount.AccountNumber}\naccountType , ${aBankAccount .AccountType}\n\n¢ Evaluate scriptlet syntax\n* <% if (something=true) { %> .. <% } %>\n\n¢ Text within <% and %> compiled and evaluated as Gosu code at run-time\n\n* Scoped within scriptlet tags, e.g. conditional logic, variable assignments, loops,\netc.\n\n--- ch11/lesson-05/slide-08.png ---\n| Generating String output using Gosu Template Gi\n\ncontact, ab:9\nbankliane, ACME Credit Union\nuses gw.api.database.Query routinglfumber, 123-999\n; accountiiunber, 112233468\nuses gw.api.database.Relop cceounstype, checking\nuses trainingapp.messaging. bank. BankAccountDataTemplate\nbanidiane, ACME Credit Union\n\nvar queryOb} = Query.make(ABPerson) routinglfumber, 225-999\nqueryOb}. compare (ABPerson#PublicID, Relop.Zquals, \"ab:98\") accountiiumber, 554433221\naccountType, savings\n\nvar targetPerson = queryObj. select () .AtMostOneRow See ee seas omiessayeraseconde>\n\nfor(bankAccount in targetPerson.BankAccounts) {\n=> 10 var payload = BankAccountDataTemplate. renderToString(targetPerson.PublicID, bankAccount)\nprint (payload)\n12 }\nSyntax: var payload = TemplateName. renderToString (paramList)\n* TemplateName: the Gosu Template class name\n\n* TemplateName.renderToString(paramList): returns a serialized string\n\n--- ch11/lesson-05/slide-09.png ---\n| Deploy code changes Gi\n\nNew Gosu Template Modified Gosu Template\n\nBME Tools VCS Window Help\n\nD> Run ‘Server’ Shift+F10\nIW, Debug ‘Server’ Shift+F9\nKE Run ‘Server’ with Coverage\n\nD Run... Alt+Shift+F10\nWE Debug... Alt+ Shift+F9\n\n7m Attach to Local Process...\n[> Edit Configurations...\n\n2] Import Test Results >\n| Stop ‘Server’ Ctrl+F2\n\nFREY tools ves Window Help\nD> Run ‘Server’\n@& Debug ‘Server’\nW Run ‘Server’ with Coverage\nD> Run...\nWE Debug...\n7 Attach to Local Process...\n[> Edit Configurations...\n2B] Import Test Results\nIl Stop ‘Server’\nEF show Running List\nStop Background Processes\n\n--- ch11/lesson-05/slide-10.png ---\n| Demonstration G\n\nOutput a String payload\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-05/slide-12.png ---\nQuestion G\n\n_— — |dentify if each statement about Gosu Templates is True or False.\n\n4\n, A\nB\nCc\n\nIt can take any number of input values.\n\nIt can make use of conditional statements and for loops.\n\nwv\n\nIt can include values from both the object that triggered the message event and\nobjects related to the triggering object.\n\nD\n\nz=\n\nIt can be used only for message payload generation.\n\nSe Soe Se sees esse ese\n\n--- ch11/lesson-05/slide-13.png ---\nAnswer\n\n_— — |dentify if each statement about Gosu Templates is True or False.\n\nY\n, A\nB\nCc\n\nwere\n\nD\n\nz=\n\nCc\n\nww\n\nSoo eS oe ese Sse ese\n\nD)\n\nIt can take any number of input values.\nIt can make use of conditional statements and for loops.\n\nIt can include values from both the object that triggered the message event and\nobjects related to the triggering object.\n\nIt can be used only for message payload generation.\nTrue\nTrue\n\nTrue - Gosu Templates can do this either by having the related objects passed to it\nor by having the triggering object passed to it and using its foreign keys to\nnavigate to the related objects\n\nFalse\n\n--- ch11/lesson-05/slide-14.png ---\nLesson\nobjectives Use Gosu Templates to extract data for any type\nrevi eW of text format\n\n--- ch11/lesson-05/slide-15.png ---\n| Student exercise\n\nGenerate a String message payload\n\n--- ch11/lesson-06/slide-01.png ---\nXML Modeler and Strongly Typed XML\n\n--- ch11/lesson-06/slide-02.png ---\nLesson\nobjectives ¢ Describe key XML concepts— XML elements,\n\nXSD, and Serialization\n\n¢ Import and export strongly typed XML using\nGosu and an XSD\n\n« Use XML models to extract data in XML\nformat\n\n« Use XML Modeler to create XML models\n\n--- ch11/lesson-06/slide-03.png ---\nXML Review\n\n--- ch11/lesson-06/slide-04.png ---\n| XML: Review\n\n1\n2\n3\n4\n5\n6\n7\n8\n9\n\n636\n\n<?xml version=\"1.0\"?>\n\n<config xmlns=\"http://guidewire.com/config\">\n<param name=\"CurrencyURL\" value=\"\">http://acme.x.com</param>\n<database name=\"TADatabase\" dbtype=\"h2\" autoupgrade=\"true\">\n<param name=\"jdbcURL\" value=\"jdbce:h2:file:ta/db/ta\"/>\n<param name=\"jdbcURLtest\" value=\"jdbc:h2:file:ta/db/test\"/>\n<param name=\"stmtPool.enabled\" value=\" false\"/>\n</database>\n<security sessiontimeoutsecs=\"10800\"/>\n\n</config>\n\nExtensible Markup Language (XML) is a hierarchy\ndata structure designed to transport and store data\n\n--- ch11/lesson-06/slide-05.png ---\n| XML elements\n\nOI HUVsrwW\n\n10\n\n<param name=\"CurrencyURL\" value=\"\">http://acme.x.com</param>\n<database name=\"TADatabase\" dbtype=\"h2\" autoupgrade=\"true\">\n<param name=\"jdbcURL\" value=\"jdbc:h2:file:ta/db/ta\"/>\n<param name=\"jdbcURLtest\" value=\"jdbc:h2:file:ta/db/test\"/>\n<param name=\"stmtPool.enabled\" value=\" false\"/>\n</database>\n\n<security sessiontimeoutsecs=\"10800\"/>\n\nXML elements have:\n\n« Acase sensitive name\n\n* An opening and closing declaration\n\n* One or more optional attribute name/value pairs\n\nContents can be Empty, have Text, and/or Child elements\n¢ Line 3 is Text\n\n¢ Line 4 is Children (5-7)\n\n* Line 10 is Empty\n\n--- ch11/lesson-06/slide-06.png ---\n| XML element class\n\n1\n2\n3\n4\n\n<?xml version=\"1.0\"?>\n\n<config xmlns=\"http://guidewire.com/config\">\n<param name=\"CurrencyURL\" value=\"\">http://acme.x.com</param>\n<database name=\"TADatabase\" dbtype=\"h2\" autoupgrade=\"true\">\n\nv\n\n<config...>\n\n<param...>\n\n<database...>\n\nRepresent elements from XML\nImport XML\n\nGet information about each\nelement\n\nCreate and modify elements\nExport XML\n\n--- ch11/lesson-06/slide-07.png ---\n| XSD (XML Schema Definition) G\n\n1\n2\n\n4\n5\n6\n8\n\n12\n13\n14\n90\n\n<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n<xsd:schema xmlns:xsd=\"http: //www.w3.org/2001/XMLSchema\" ... >\n<xsd:element name=\"config\" >\n<xsd:complexType>\n<xsd:choice minOccurs=\"1\" maxOccurs=\"unbounded\">\n<xsd:element name=\"param\"\nminOccurs=\"0\" maxOccurs=\"unbounded\"/>\n</xsd:choice>\n</xsd:complexType>\n</xsd:element>\n<xsd:schema/>\n\nAn XSD (XML Schema Definition) describes\n\nthe structure for elements in one or more\n\nXML documents\n\n¢ Informs how an XML document can be structured ell\n¢ Used to validate the structure of a document\n\n--- ch11/lesson-06/slide-08.png ---\n| Serialization G\n\nTOU 01010010 TN\n11001001\n——_—| ——_—\n\nfile.xml 01100100\n\nfile-clone.xml\n\n¢ XML serialization converts XML elements into a sequence of bits to be later\ndeserialized\n\n¢ Serialization logic can be complex for certain data types such as hexadecimal\nvalues or images\n\n--- ch11/lesson-06/slide-10.png ---\n| Untyped and strongly typed XML G\n— Untyped = Strongly typed\n\nIf no XSD exists, then the parsed\n\nIf an existing XSD validates and\nXML is untyped\n\ninforms the XML, then the parsed\nXML is strongly typed\n\nIe)\n\n| |\nxso <>,\n\n--- ch11/lesson-06/slide-11.png ---\n| Strongly Typed XML G\n\nmy cy\nfile.xsd file.xml\n\n¢ [fan existing XSD validates and informs the XML, then the parsed XML is strongly\ntyped\n* XML is validated against the XSD during import and export\n* XSD must be known to Guidewire\n* XSD parses the XML document\n\n--- ch11/lesson-06/slide-12.png ---\n| Making an XSD available to Guidewire Gi\n\n. : : [ilProject |\nconfiguration.gsre Soa vation\n« Put the XSD file in any subdirectory of gsrc & Epconfig\n&@- Ei deploy\n¢ Subdirectories become part of the package name - Diete\n@- Bgsre\n¢ There is no way to inject an XSD into the El acme\ntype system at run time ° ames\n* The XSD must be known to the application during Oe es\nstartup be\n. . Pry @- [y TestesP\nVarious definitions cause Gosu ae | N\nto create new types i) [Ey base XSD\n= FE] demo\n+ <xsd:element /> bpd el\n* <xsd:complexType /> SE\n\n* <xsd:attribute />\n\n--- ch11/lesson-06/slide-13.png ---\n| Parsing a strongly typed XML file\n\nPaul Monroe [Sj\n\nHas Children? = false\nHas Child Elements? = true\n\n* Syntax to call the parse method on the XSD type: i sy ane ta conade cr\n\n2121 W. Camden Drive Suite 17 Los Angeles CA\n\n* xsdFileName.rootElement.parse (xmlToParse) A\n\n+ xsdFileName: fully qualified name\n+ rootElement: the XSD root element\nDeclared elements and\n\nattributes in the XSD are\navailable as Gosu types\n\n+ Use dot notation to reference the\nelement types and attributes\n\nuses java.io.File\nuses demo.ta.xml.policyholder.PolicyHolder\n\nvar file = new File(\"./training/policyholder.xml\")\nvar xml = PolicyHolder.parse(file)\n\nprint (xml. FullName +\n+ \"Has Children? = \" + xml.Children + \"\\n\"\n+ \"Has Child Elements? = \" + xml.$Children.HasElements\n\nss entry\nvar addresses = xml.AllAddresses.Entry\naddresses.each(\\addr -> print (addr.AddressLine1\n+ (addr.AddressLine2 == null 2? \"\" : \" \" + addr.AddressLine2)\n+\" \" + addr.city\n+\" \" + addr. State)\n\n--- ch11/lesson-06/slide-14.png ---\n| Generate XML using an XSD Gi\n\n¢ Syntax to use an XSD to generate XML:\n\n1 uses gw.api.database.Query\n2 uses gw.api.database.Relop\n\n« xsdFileName: fully qualified name 3 uses gw.xml.XmlSerializationOptions\n—> < uses trainingapp.demo.xsd.policyholder.PolicyHolder\n\n* new xsdFileName.rootElement\n\n+ rootElement: the XSD root element\nvar queryObj = Query.make(ABPerson)\n\n¢ Declared elements and attributes 7 queryOb}.compare (ABPerson#PublicID, Relop.Equals, \"ab:98\")\n. . -ryObj. select () .AtMostOneRow\nin the XSD are available as a\n\nGosu types —pit0 ;\n11 xml.FullName = targetPerson.DisplayName\n\n+ Use dot notation to reference the 12 ym) .EmailAddressi = targetPerson.EmailAddressi\nelement types and attributes —p var sOpts = new XnlSerializationOptions() {\n\n:Sort = false,\n16 :Validate = false\n\n<?xml version=\"1.0\"2>\n<PolicyHolder xmlns=\"http: //acmePolicyPerson/ab/gx/sa.\n\n<fullName>Eric Andy</FullName> a7 }\n<EmailAddress1>eandy@albertsons.com</EmailAddress1> 8 //\n</Policy#older> 19 var payload = xml.asUIFString(sOpts)\n\n20 print (payload)\n\n--- ch11/lesson-06/slide-15.png ---\nXML Modeler\n\n--- ch11/lesson-06/slide-16.png ---\n| XML model\n\nmnt vereione\"1.0°2>\n‘BankAccount. mminse\"hetp://guidevire,con/ab/qn/trainingapp nessaging bank, bankaccountuminodel”>\nR < > <AecountType>\n\n<Description>Checking</Description>\n\n</aecountType>\n<Bankllane>ROME Credit Union</Bankliane>\ncta| ‘<Routingliumber>123-939¢/Routinglfumber>\n\n<aBContact>\n\n<PublicID>ab: 98</PublicID>\n</aBContact>\n\n« An XML (GX) model generates dynamic XML based on an input object\n¢ Accepts a single input object and can specify:\n* XML-formatted values from that object\n* XML-formatted values from related objects\n¢ Use model anytime XML must be generated\n\n+ Message payload, web service data, etc\n\n--- ch11/lesson-06/slide-17.png ---\n| XML model base types\n\n« Each model has a base type, which determines:\n* The type of object you must pass to the model\n\n* The data you can include in the model\n\n* Properties ° Properties ° Properties\ne Virtual e Seen as\ne Database getProperty\nbacked method\ne Related\n\nentities\n\n--- ch11/lesson-06/slide-18.png ---\n| XML Modeler editor G\n\n@ BankAccountModel.gx * |\n\n¢ XML Modeler editor = mon\ncreates XML models gL Asa\n\n> ABContac - enti. ASContact\n¢ File extension is .gx\n\n* Steps to create\n\n1. Create XML model Fields to add, based on input entity\n\n<2 version=\"1.0\"2>\n<BankAccount xmins=\"trainingapp.xmlmodels.bankaccountmodel\">\n\n2. Add fields to the model ~PublictD-javalang Strings PublelD~\n<BankName>java.lang.String</BankName>\n\n3. Use the model to <AccountType>typekey. BankAccountType</AccountType>\ngenerate the XML output “RontingNombersjve ang Sting RowtngNomber>\n<ABContact>\n« Sample XML tab shows <PublicID>java.lang String<PublicID>\n<EmailAddress1>java.lang.String</EmailAddress1>\ngenerated model output <Active>java ang. Boolean</Active>\n\n</ABContact>\n</BankAccount> Sample XM Schema\n([SanpERWE) Scheme |\n\n--- ch11/lesson-06/slide-19.png ---\n| Create the XML model G\n\n5 eee * To create a new XML\nGosu Program\nOGneram 5 Model:\n\n‘emmiplate =i GX Model x | |\nSo = 1. Right-click the parent\n[SE GxModel Class to model: k\nD& Web Service Collection _| Search by Name | Project package\n\nInclude non-project classes 2. Select New > GX\nQ BankAccount x Model\n\n3. Specify the Entity\n\n(© = BankAccountDataTemplate (\n(© BankAccountDataTemplate (\n\n+ System will automatically\n\n© & BankAccountEnhancement (t filter\n© % BankAccountEnhancement (trai 3. .\nene 4. Specify a model name\n\nBankAccountModel « Automatic naming is:\n\n[ox] Cancel <entity>Model\n\n--- ch11/lesson-06/slide-20.png ---\n| Add fields to the XML model\n\n(& BankAccountModel.gx\n\n2. Click Add\n\n1. Select field\n\n* Steps to add fields:\n\nFilter Depth: 2\n\nPubliciD - jov\n\nAdd >>\n\n1. Select field remeron nc ver\n\n2. Click Add >> button pene .\n\n3. Select property type\n\n4. Select XML model (if applicable) sbES Esta Lanes\n\n+ Avoid selecting fields multiple levels\n\ndown in an XML model\n\n+ ABContact.AssignedUser.Credential.Active <PublicID>java.lang.String</PublicID>\n. <BankName>java.lang.String</BankName> Co]\n* Create a separate model for the entity <Accounttype>typekey.BankAccountType</AccountType> (Foxe) [He\n\n<AccountNumber>java.lang.String</AccountNumber>\n\n* Sub-object field appear as nested Atzcane Rome\n\n<PublicID>java.lang.String</PublicID>\n\nelement in sample XML <EmailAddress1>java lang String-/EmailAddress1>\n\n<Active>java.lang.Boolean</Active>\n</ABContact>\n\n¢ Restart the server <BankAccount>\n\n--- ch11/lesson-06/slide-21.png ---\nGenerating XML output using XML model Gi\n\n<?xml version=\"1.0\"2>\n<BankAccount. xnlns=\"http: //guidewire.con/al\n\n* Syntax crotictipanecrheniat\n<BankName>First Savings Bank</BankName>\n= <hecountTypereavinge</RecountType>\n* var xml = new modelName.modelType (param1) rere henecsesaasasoie noceetunber>\n. -<Routingliunber>225-998¢/Routinglunber>\n* modelName: fully qualified name <aBContact>\n<PublicID mnlns=\"netp://guidewize.con/:\n+ i 3: ‘ss as=\"nvtp://guidewire.:\n* modelType: the XML model input type ‘ie\n‘<Activeptruec/Active>\n* var payload = xml.asUTFString aaa\n</aconvact>\n+ Serializes the generated xml object as UTF-encoded </BankAccount>\nstring uses gw.api.database.Query\n\nuses gw.api.database.Relop\nuses trainingapp. xmlmodels.bankaccountmodel.BankAccount\n\nvar queryObj = Query.make(ABPerson)\nqueryOb}. compare (ABPerson#PublicID, Relop.fquals, \"ab:98\")\nvar targetPerson\n\nfor(bankAce in targetPerson.BankAccounts) {\nvar xml = new BankAccount (bankAcc)\nvar payload = xml.asUTFString()\n\nprint (payload)\n,\n\n--- ch11/lesson-06/slide-22.png ---\n| Customizing XML model output with GXOptions Gi\n\nSyntax\n\n<oxml version=\"1.0\"2>\n\n<BankAccount xnlns=\"http: //guidewire.com/al\n<PublicID>ab: 4</PublicID>\n<Bankllame>First Savings Bank</Bankllame>\n\n* var xml = new modelName.modelType “<hecountType>savings</AccountType>\n\n<Accountitunber>$54433221</AccountNunber>\n\n(param1,new GXOptions() {:optionl = value}) <Routingliunber>225-999¢/RoutingMunber>\n\nAlternate constructor can be used to:\n\n* Incremental: export only those\n\nproperties that have changed\n\n* Verbose: export properties, even\n\nif their value is null\n\n¢ SuppressExceptions: suppress\n\nexceptions thrown during XML\nconstruction\n\nen\n\n<aBContace>\n<PublicID xmlns=\"hetp://guidewire.cow/é\nsemen <EmailAddresst xsi:nil=\"true” mmlns=\"ht\nnecp://quidewire.\n\n1 uses gw.api.database. Query <Activertrue</Active>\nuses gw.api.database.Relop </Credential>\nuses gw.api.gx.GXOptions </Aasigneddser>\n: <yaBContact>\n4 uses trainingapp.xmlmodels.bankaccount </:,tyxcccunts\n\nvar queryObj = Query.make(ABPerson)\nqueryObj.compare (ABPerson#PublicID, Relop.quels, \"ab:98\")\nvar targetPerson = queryObj.select() .AtMostOneRow\n10 for(bankAcc in targetPerson.BankAccounts) {\nvar xml = new BankAccount (\nbankAcc,\nnew GXOptions() {:Incremental = false, :Verbose = true})\na var payload = xml.asUIFString()\n15 print (payload)\n}\n\n--- ch11/lesson-06/slide-23.png ---\n| Optimizing XML model output performance\n\n* To achieve the best performance,\n\nmake sure you use an\n\nXMLSerializationOptions object to turn\n\noff sorting and validation\n\n* Serialization is noticeably faster with\n\nthese options set\n\n<oxml version=\"1.0\"2>\n\n<BankAccount xmlns=\"http://g\n<PublicID>ab: 4</PublicID>\n\n</BankAccount>\n\n3\n\nWir\n\nGi\n\nuses gw.api.database.Query\n\nuses gw.api.database.Relop\n\nuses gw.api.gx.GxOptions\n\nuses gw.xml.XmlSerializationOptions\n\nuses trainingapp. xmlmodels.bankaccountmodel.BankAccount\n\nvar qu -make(ABPerson)\nqueryObj.compare (ABPerson#PublicID, Relop. Equals,\nvar targetPerson = queryObj.select () .AtMostOneRow\n\n\"ab:98\")\n\nvar gx0pts = new GXOptions() {\nIncremental = true,\nhose = true,\n\n:SuppressExceptions = true\n\n}\n\nvar sOpts = new XmlSerializationOptions() {\n:Sort = false,\n:Validate = false\n\n}\n\nvar xml = new BankAccount (bankAcc, gx0pts)\nvar payload = xml.asUTFString(sOpts)\nprint (payload)\n\n--- ch11/lesson-06/slide-24.png ---\n| XML models labels\n\nLabels enable an XML model's properties\n\nto be filtered\n\n+ When an instance of the model is created only a\nsubset of its properties are converted to XML\n\n+ Different properties can be included based on context\n\nUse case:\n\n+ System A needs to include the key property and the\n\nABContact normal property called SysA\n\n+ System B needs to include the key property and the four\nBankAccount normal properties called SysB\n\n+ With labels a single XML model can be used\n\nProperties can be assigned multiple labels\n\nMultiple systems use the same property\n\nGi\n\n1. Select field\nKey Property\n\n<< Remove\nRecategorize\n\nEdit Labels\n\n3. Add label(s)\n\nOK Cancel\n\n--- ch11/lesson-06/slide-25.png ---\n| Using XML model labels G\n\n© Andy\n\n¢ Add labels to the properties inthe XML = »= ierj0b3 = query. naze B78)\n\nqueryOb}. compare (ABPersonéPublicID, Relop.=quals, \"ab:98\")\nmodel\n\nvar targetPerson = queryObj-Seléct ()-AtiostineRow\n// Output eaci\nfor (bankAce in targetPerson.BankAccounts) {\n\nrialization options, and labels\n\nnsole\n\n¢ Pass label parameter to the constructor\n\nvar oxopts = new GxOptions() {\n:Incremental = false,\n:Verbose = true,\n:SuppressExceptions = false\n}\n\nvar sOpts = new XmlSerializationOptions() {\n\n<BankAccount xmins=\"http: //guidewire.com/ab,\n<PublicID>ab: 4</PublicID>\n<aBContact>\n<PublicID xnins=\"!\n<EmailAddressi xsi\n\n<Credential>\n<Active>true</Active> Sort = false,\n</Credenvial> :Validate = false\n</AssignedUser> }\nvar labelSysA = BankAccount.Label.Sysa\n\n</aBContact>\n</BankAccount> SysA\n\n<BankAccount xnlns=\"http: //guidewize.com/ab/\n<Accountiumber>S54433221</AccountNumber>\n<AccountType>savings</AccountType>\n<Bankllame>First Savings Bank</BankName>\n<RoutingNumber>225-999</Routinglumber>\n\n<PublictD>ab: 4</PublicID>\n</BankAccount> SysB\n\nvar labelSysB = BankAccount.Label.SysB\n// Create payload and display to console\n\nvar xmlSysA = new BankAccount(bankAcc, gx0pts, {labelSysA})\nvar xmlSysB = new BankAccount(bankAcc, gxOpts, {lebelSysB})\nvar payloadSysA = xmlSysA.asUTFString(s0pts)\n\nvar payloadSysB = xmlSysB.asUTFString(s0pts)\n\nprint (payloadsysA)\n\nprint (payloadSysB)\n\n--- ch11/lesson-06/slide-26.png ---\n| XML model properties\n\n¢ Every model has boolean properties\nspecific to XML models\n\n* $ShouldSend: has at least one Normal\nproperty in the model changed?\n\n+ $HasExceptions: were any exceptions\nthrown while generating the XML?\n\n+ True, even if GXOption SuppressExceptions\nis set to true\n\n<BankAccount xmlns=\"http://guidewire.c\n\n<AccountType>checking</AccountType> <——\n\n<PublicID>ab:4</PublicID>\n</BankAccount>\n\n|\n\nvar queryOb} = Query.make(ABPerson)\nqueryOb}.compare (ABPerson¢PublicID, Relop. Equals, \"ab:98\")\nvar targetPerson = queryObj.select () .AtMostOneRow\n\n‘Transaction. run¥#ithNevBundle(\\newBundle -> {\ntargetPerson = newBundle.add(targetPerson)\n\n:SuppressExceptions = false\n\n}\nvar labelSysAl:\n\nBankAccount.Label.default_label\nvar xmlSysAll = new BankAccount(bankAcc, gxOpts, {labelSysAl1})\nif (xmlSysA11.$ShouldSend ¢¢ !xmlSysAll.$HasExceptions) {\nvar sOpts = new XmlSerializationOptions() {\n:Sort = false,\n:Validate = false\n,\nvar payloadSysAll = xmlSysAll.asUTFString(sOpts)\nprint (payloadSysAll)\n\n--- ch11/lesson-06/slide-27.png ---\n| Deploy code changes Gi\n_—RestartServer. Generate XmiClasses\n\nNew XML Model Modified XML Model\n\nTools VCS Window Help Codegen Analyze Refactor Build Run T\nD> Run ‘Server’ Shifts F10 JA. Generate Metadata Classes\nIW, Debug ‘Server’ Shift+F9\n\nGenerate Page Configuration Classes\n\nBea Serre Covers {Generate Permission Classes\nD Run... Alt+Shift+F10 -\n\nG Local Classes\nWE Debug... Alt+ Shift+F9\n\n7m Attach to Local Process...\n[> Edit Configurations...\n\n2] Import Test Results >\n| Stop ‘Server’ Ctrl+F2\n\n® Generate Everything\n\n--- ch11/lesson-06/slide-28.png ---\n| Demonstration G\n\nCreate an XML model\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-06/slide-30.png ---\nQuestion G\n\n_— — |dentify if each statement about an XML model is True or False.\n\n“ A)\nB)\n©)\nD)\n\nE)\n\nSe Soe Se sees esse ese\n\nIt can take any number of input values.\nIt has a published XSD.\nIt can make use of conditional statements and for loops.\n\nIt can include values from both the object that triggered the message event and objects\nrelated to the triggering object.\n\nIt can be used only for payload generation\n\n--- ch11/lesson-06/slide-31.png ---\nAnswer Gi\n\naa Identify if each statement about an XML model is True or False.\n\nc A) Itcan take any number of input values. False — XML models always have a single input,\nwhich is the object upon which to base the XML to be generated.\n\nB) Ithasapublished XSD. True\nC) Itcan make use of conditional statements and forloops. False\n\nD)_ Itcan include values from both the object that triggered the message event and objects\nrelated to the triggering object. True — XML models can do this by including fields from the\nrelated objects in the XML model.\n\nE) Itcan be used only for payload generation False — XML models can be used anywhere.\n\nSoo eS oe ese Sse ese\n\n--- ch11/lesson-06/slide-32.png ---\nLesson\nobjectives ¢ Describe key XML concepts— XML elements,\nreview XSD, and Serialization\n\n¢ Import and export strongly typed XML using\nGosu and an XSD\n\n« Use XML models to extract data in XML\nformat\n\n« Use XML Modeler to create XML models\n\n--- ch11/lesson-06/slide-33.png ---\n| Student exercise G\n\nUse an XML model to generate an XML\nmessage payload\n\nGenerate an XML message payload\nusing an XSD\n\n--- ch11/lesson-07/slide-01.png ---\nIntegration Views\n\n--- ch11/lesson-07/slide-02.png ---\nLesson\nobjectives\n\n¢ Define the purpose of Integration Views\n\nConfigure an Integration View schema,\nmapping, and filter\n\nGenerate JSON output\n\nGenerate XML output\n\n--- ch11/lesson-07/slide-04.png ---\n| Why use an Integration View?\n\n¢ Produce external views of the\nGuidewire domain model\n\n* Schemas and mappings are explicitly\nnamed and versioned\n\n+ Different versions of the same schema\nand/or mappings can co-exist\n\n¢ Output format is explicitly designed in\nthe schema\n\n¢ Simple design approach\n\n¢ Define the output schema first and then\nmap the data to that output\n\nGi\n\nSs s\nes\n\nExternal\nView\n{\n\n}-06-20T04:00:00.0002\",\n\nm Andy\",\n“primaryAddress™ : {\nTaddressType” : “home”\n}\n)\n\n--- ch11/lesson-07/slide-05.png ---\n| Integration View components Gi\n\n¢ An Integration View has the following\n\ncomponents: _ Ni configuration » 1% config ) [5 integration\n* Schemas\n. > apis\n+ AJSON Schema defines the structure of the data Eu filterstmta\n* Can be targeted by multiple mappings & address_minimel-1.0.9ql\n2 contact_details-1.0.gql\n* Mappings @ contactnote_details-1.0.gql\n—>v mappings.tmn.ta\n+ Describes how to transform a given source object such as an entity if) address-1.0.mapping,json\ninto a JSON or XML document that conforms to that schema & contact-1.0.mapping,json\n. ‘§ contactnote-1.0.mapping,json\n+ Targets a single JSON Schema == vB schemas\n> ppl fi Kk\n+ Filters ie\n* Optional GraphQL-style filters that whitelist the fields to actually {, address-1.0.schema,json\n\n4 atts init ntact-1.0.schs j\nmaterialize and serialize oes pean\n4) contactnote-1.0.schema,json\n\n+ These include virtual fields\n\n--- ch11/lesson-07/slide-06.png ---\n| Use case Gi\n\n\"general\",\n\n¢ Export the following contact sear eee eee 1. Define the schemas\n\nian Andy has discovered @ serious data entry issue\",\n\ndata in either JSON or XML pe ree » Create the necessary\nformat: “ete ay he ace tome, schema files to define the\n* Name “Willian Andy has a new Licence™ structure of the data\n\n* Date of Birth 2. Define the mappings\n\n+ Create the necessary\nmapping files to define the\ndomain fields to export\n\n3. Define the filters\n\n* Create the filter files to\nexport a subset of contact\ndata\n\n+ Gender\n* Primary address and its fields ts seieste\n* Contact notes and its fields\n\n« Export a subset of data\n+ Without contact notes 1\n\n* Contact notes only\n\n--- ch11/lesson-07/slide-08.png ---\n| Create a JSON Schema Gi\n\n* Create a new package under integration.schemas\n\n+ config.integration.schemas.<company_code>.<product_code>\n\n* Create a new file with the following syntax:\n\n7 A 7 > pl fi k\n\n« <mechanism>- {version} .schema. json oe Famewor\n\nv irn.ta\n address-1.0.schema,json\n4) contact-1.0.schema,json\n\n4} contactnote-1.0.schema,json\n\n6 contact-1.0.schema,json\n\n{\n\n\"$schema\": \"http: //json-schema.org/draft-04/schema#\",\n\"definitions\": {}\n\n}\n\n--- ch11/lesson-07/slide-09.png ---\n| Supported data types\n\n« JSON natively defines a small set of primitive types: string, boolean, numbers\n\n(which are interpreted as doubles), object, and array\n\n« JSON Schema (and Swagger) define an integer type, which is a number with a decimal\n\ncomponent of .0\n\n« JSON Schema (and Swagger) has a format property to describe more complex\ndata types: dates, numeric types that require a higher level of precision, binary\n\ndata, and so forth\n\n*« Custom x-gw-type property is added to map Guidewire internal types in cases\nwhere a format would be ambiguous, such as: typekeys, MonetaryAmount and\n\nCurrencyAmount\n\nType\n\nFormat\n\nx-gw-type Standard\n\nstring\nstring\n\nstring\n\ngw-money\ngw-money\n\n<none>\n\ngw.pl.currency.MonetaryAmount Guidewire\ngw.api.financials.currencyAmount Guidewire\n\n<any typekey>.* type Guidewire\n\nGi\n\n--- ch11/lesson-07/slide-10.png ---\n| Add schema definitions\n\n* Each definition must\ndefine its name, type,\nand properties\n\n* By default, JSON\nSchema properties are\nnot nullable\n\n* On output, null properties\non JsonObject are omitted\n\nGi\n\n\"$schema\" : \"http: //json-schema.org/draft-04/schema#\",\n\"x-gw-import\" : {\n\n\"address\" : \"trn.ta.address-1.0\",\n\"contactnote\" : \"trn.ta.contactnote-1.0\"\nle\n\"definitions\" : {\n\n\"ContactDetails\" : {\n\"type\" : \"object\",\n\"properties\" : {\n\"Name\" : {\n\"type\" : \"string\"\nlh\n\"DateOfBirth\" : {\n\"type\" : \"string\",\n\"format' \"date-time\"\n\"Gender\" : {\n\"type\" : \"string\",\n\"x-gw-type\" : \"typekey.GenderType\"\n}\n\n--- ch11/lesson-07/slide-11.png ---\n| Schema file import Gi\n\n* Schema import provides a mechanism for reuse of schemas, by creating a shared\nschema for common pieces and then importing that schema in order to reference\nits types\n\n¢ If Aimports B, definitions in A and B that have the same name are still two different types\n\n1 {\n\"$schema\" : \"http://json-schema.org/draft-04/schema#\",\n—> \"x-gw-import\" : {\n4 \"address\" : \"trn.ta.address-1.0\",\ns \"contactnote” : \"trn.ta.contactnote-1.0\"\n\nhe\n\n2 \"PrimaryAddress\" : {\n—p>: \"$ref\" : \"address#/definitions/AddressDetails”\n\n—>:\n\n--- ch11/lesson-07/slide-13.png ---\n| Create a mapping file\n\n* Create a new package under integration.mappings\n\nGi\n\n* config.integration.mappings .<company_code>.<product_code>\n\n* Create a new file with the following syntax:\n\n* <mechanism>-{version}.mapping. json\n\n4} contact-1.0.mapping,json |\n\n=>\n>\n\ni\n\n\"schemaName\" : \"trn.ta.contact-1.0\",\n\"import\" : {\n\"address\" : \"trn.ta.address-1.0\",\n\n\"contactnote\" : \"trn.ta.contactnote-1.\n\nje\n\"mappers\" : {...}\n\nv\n\ntrn.ta\n4) address-1.0.mapping,json\n4) contact-1.0.mapping,json\n4) contactnote-1.0.mapping,json\n\n--- ch11/lesson-07/slide-14.png ---\n| Add mappers to the mapping file\n\nEach mapper must\ndefine its:\n\nName\nschemaDefinition\nroot\n\nproperties\n\n+ The properties on an\nintegration mapper must\ncorrespond to properties\non the associated JSON\nschema definition\n\n+ Define how to get the value\nfor that property\n\n—pP27\n\n\"mappers\" : {\n\"ContactDetails” : {\n\"schemaDefinition\" : \"ContactDetails\",\n\"root\" : \"entity.ABContact\",\n\"properties\" : {\n\n“ABContact.DisplayName\"\n\n\"DateOfBirth” : {\n\"path\" : \"(ABContact as ABPerson) .DateOfBirth”,\n\"predicate\" : \"ABContact typeis ABPerson”\n\n(ABContact as ABPerson) .Gender\",\n\"predicate\" : \"ABContact typeis ABPerson\"\n\nye\n\n\"PrimaryAddress\": {\n\"path\" : \"ABContact.PrimaryAddress\",\n\"mapper\" : \"address#/mappers/AddressDetails\"\n\nMe\n\n\"ContactNotes\" : {\n\n\"ABContact.ContactNotes\",\n\n+ \"contactnote#/mappers/ContactNloteDetails\"\n\n--- ch11/lesson-07/slide-16.png ---\n| Filters G\n\n+ Filters make use of a simplified version : ! =\nof GraphQL syntax to describe the sch » pong « Pama\ndata to be fetched\n\n5 4\n\n* Serves as a whitelist of the properties that\n\nshould be included for a given invocation of\na mapping file\n\n¢ Allows reuse of a more complete\nf a\nschema/mapping for use cases that\nonly require a subset of that data aS\n\n+ Reduces implementation and maintenance « secuoseireht + saoso-a2-oer04;00100,0008\",\ncosts “Gender” : \"M\",\n\nName\" : \"William Andy\",\n\"PrimaryAddress™ : {\n\"AddressType” : “home”\n}\niB\n\n--- ch11/lesson-07/slide-17.png ---\n| Create a filter Gi\n\n* Create a new package under integration.filters\n* config.integration.filters.<company_code>.<product_code>\n\n* Create a new file with the following syntax:\naddress_minimal-1.0.gql\n\ncontact_details-1.0.gql\n\ncontactnote_details-1.0.gql\n\n« <mechanism>-{version}.gql\n\n@ contact_details-1.0.gql * | 2 contactnote_details-1.0.9q1\ni TE\nName, 2 ContactNotes {\nDateOfBirth, 3 ContactNoteType,\nGender, 4 Confidential,\nPrimaryAddress { s Subject,\n> ¢ AddressType Body\n\n} }\n\nil Eee |\n\n--- ch11/lesson-07/slide-18.png ---\n| Fragments Gi\n\n¢« AGraphQL feature that allow you to  adddress_rninimal- 1.0.94)\nquery a fragment that can be applied —! «  cetmarynadvesst\nto a given object | ++-addressParts\n¢ Useful in cases where the same sub-object —>: panacea. arts\ntype appears within multiple places in the ,\ndata you want to fetch 8 }\n—> fragment addressParts on Address {\n* For example, a Contact may have both AddressType\nPrimaryAddress and AllAddresses cael\nproperties that map to the same Address }\ntype\n\n+ Define the set of properties you want from an\nAddress once, as a fragment\n\n+ Reference that fragment in each context that\nyou want that same set of properties\n\n--- ch11/lesson-07/slide-20.png ---\n| Generate wrapper classes\n\n1. Add the fully-qualified name of the\nschema(s) in the codegen-\n\nschemas.txt file in schemas package\n\n2. From the Server drop-down in Studio,\nselect JsonSchemaCodegen\n\n* Execute by selecting Run ‘Server’ icon\n\n3. Generated wrapper classes will be\nunder\n\nconfiguration.srce.jsonschema\n\nGi\n\ntrn.ta.contact-1.0\ntrn.ta.contactnote-1.0\ntrn.ta.address-1.0\n\n2 codegen-schemas.tt\n\nBuild Run Tools VCS Wind:\n\n[i> Edit Configurations...\n(B TestServer\n\n[B Dropps\n\n[Server\n\nj=) JsonSchemaCodegen\n\nv Biljsonschema\n> Bil sita.contactv1_0\nv Bitmte\n\nv Ei address.vi_0\n© AddressDetails\nv Bai contactv1_0\n© ContactDetails\n© ContactUpdate\nv Emi contactnotev1_0\n© ContactNoteDetails\n\n--- ch11/lesson-07/slide-21.png ---\n| Example 1 — JSON Output\n\nDIR KH ewNP\n\n3\n\nuses gw.api.database.Query\nuses gw.api.database.Relop\nuses gw.api.json.JsonConfigAccess\n\n// Query for Contact\n\nvar queryObj = Query.make (ABContact)\nPublicID, Relop. Equals, \"ab:5\")\n\nqueryObj.. compare (\nvar targetObj =\n// Create IsonMapper object\n\n“Contactliotes™ : [ {\n“Body” : “William Andy has more questions related to data privacy\",\n“ContactiioteType” : “general”,\n“Subject” : “William Andy has an inguiry™ iy |\net\n\"Body\" : “William Andy has many general questions\",\n“ContactNotelype” : “general”,\n“Subject” : “William Andy has questions”\ndie\n“DaceogBirth™\n“Gender” : “M\",\n“Name” : \"William Andy\",\n“Primaryaddress” : {\nvaddressLinel” : \"345 Fir Lane,\nvAddressType” : \"hone\",\n\"City\" : “La Canada”,\n“PostalCode” : \"91352\",\n“State” : \"CAT\n\n'1980~08-06T04:00:00.0002\",\n\nvar jsonMapper = JsonConfigAccess.getMapper(\"trn.ta.contact-1.0\", \"ContactDetails\")\n\n// Create TransformResult object\n\nvar transformResult = jsonMapper.transform0bject (targetObj)\n\n// Create outpul\n\nvar payloadJSON = transformResult.toPrettyJsonString()\n\nprint (payloadJSON)\n\n--- ch11/lesson-07/slide-22.png ---\nExample 2 — XML Output\n\nOptionally generate XSD\n\n+ Execute gwb genExternalSchemas in command prompt window\n+ Default output directory\n\n<app>\\modules\\configuration\\build\\external-schemas\n\n13\n—> 16\n\nas\n\nvar payloadXML = transformResult.toxmlString()\nprint (payloadXML)\n\n‘ceontactloreDetatla>\n‘eboappaitiiam Andy as many gteerel questionsc/B0ay>\n‘Ccontactictetypengeseraic/Coneactictetype>\n\n‘cSunyeceowillian Rody hav queationsc/Subyect>\n“/fontactionedetasia>\n\n‘entacetotebetatla>\n‘cboapWiiiam Andy has discovered « serious data entry semvec/Bodi>\n‘ContactioceTypenproblenc/ContactioteType>\n\n‘chubyeceo¥Willian Rady reported an iamvec/Subyect>\n“/Contacetotedetaiia>\n\n‘GlaneDWil tam Aadyc/tane>\n\n‘cinta Canancreiey>\n‘cSeavercnc/seate>\ncyreinaryaaaress>\n<fecanannenation\n\nGi\n\ncontactnote XSD\n\nant contact dachema\n\nPom versie\n\n‘argwtianespacen\"ntp://guldevire.com/esd/tentacontactnote 1.0\"\n\nclesertrorsbefantte\"qalstsea\"\n\n--- ch11/lesson-07/slide-23.png ---\n| Example 3 — Filtered JSON output G\n\n2 uses gw.api.database.Query\n\n2 uses gw.api.database.Relop\n\n3 uses gw.api.json.JsonConfighccess\n\n4 uses gw.api.json.mapping. JsonMappingOptions\nG // Query for Contact\n\nvar queryObj = Query.make(ABContact)\n\n// Create JsonMapper object\nvar jsonMapper = JsonConfigAccess.getMapper(\"trn.ta.contact-1.0\", \"ContactDetails\")\n\n// Create JsonMappingOptions object\n\nvar mappingOpts = new JsonMappingOptions()\nmappingOpts.withFilter(\"trn.ta.contact_details-1.0\"\n\n// Create TransformResult object\n\nvar transformResult = jsonMapper.transformObject (targetOb3, mappingOpts)\n\n// Create output\n\nvar payloadJSON = transformResult.toPrettyJsonString()\n\nprint (payloadJSON) {\n\n“DateOfBirth” : \"1980-08-06T04:00:00.0002\",\n\"Gender\" : \"M\",\n\"Name\" : \"William Andy\",\n\"PrimaryAddress” : {\n“AddressType\" : “home”\n\n--- ch11/lesson-07/slide-25.png ---\n| Schema file combination\n\n* Schema combination provides a\n\nmechanism for reuse of schemas\n\n* Ability to create a schema that logically\nextends and overrides one or more other\n\nschemas\n\n* If Acombines [B, C] listed in that order in\n\nthe combine property\n+ Contents of B are merged on top of C\n\n+ Contents of A are merged on top of the\ncombined schema\n\n+ Similar names are merged together to produce a single definition\n\n* Combination cannot remove definitions\n\n* Original schemas are not touched\n\nYBa integration\napis\n\nfitertmnte\nmappings ay |\n\neve\n\n> Bademo.ta\n> Bl gw.plframework\nv Da sita\n\ncontact-1,0.schemajzon\n\n\"$schema\" : \"http://json-schema.org/draft-04/schema#\",\n\"x-gw-combine\" : [\n\"trn.ta.contact-1.0\"\nI,\n“definitions” : {\n\"ContactDetails” : {\n\"type\" : \"object\",\n\"properties\" : {\n\"AssignedUser\" : {\n\"$ref\" : \"#/definitions/AssignedUser\"\n}\n}\nh\n\"AssignedUser\" : {\n\"type\" : \"object\",\n\"properties\" : {\n\"DisplayName\" : {\n\"type\" : \"string\"\n\n--- ch11/lesson-07/slide-26.png ---\n| Mapper file combination\n\n* Mapper combination provides a\nmechanism for reuse of mappers\n\n* Combination rules used for schemas apply\n\nto mappers\n\nv Bil integration\n> Bil apis\n> Eu filters.tmn.ta\nv Ea mappings\n> Bl demota\n\nGi\n\n\"schemaName\" : \"si.ta.contact-1.0\",\n\n\"combine\" : [\n\"trn.ta.contact-1.0\"\n\nly\n\n\"mappers\" : {\n\n\"ContactDetails\" : {\n\"schemaDefinition\" : \"ContactDetails\",\n\"root\" : “entity.ABContact\",\n\"properties\" : {\n\"AssignedUser\" : {\n\"path\" : \"ABContact.AssignedUser\",\n\"mapper\" : \"#/mappers/AssignedUser\"\n}\n}\nye\n\"AssignedUser\" : {\n\"schemaDefinition\" : \"AssignedUser\",\n\"root\" : “entity.User\",\n\"properties\" : {\n\"DisplayName\" : {\n\"path\" : \"User.DisplayName\"\n\n--- ch11/lesson-07/slide-27.png ---\n| Example 4 -— JSON output using combination =\n\n3 // Create JsonMapper object\n\n—Pio var jsonMapper = JsonConfigAccess.getMapper(\"si.ta.contact-1.0\", \"ContactDetails\")\n\nJSON Output\n> “Assignedvser™ = {\n\n“Contactiiores™ = [ {\n\"Body\" : “William Andy hes more questions related to date privacy\",\n“ContactlioteType” : “general\n“Subject” : \"Willian Andy has an inquiry”\nwt\n“Body” : “William Andy has many general questions\",\n“ContactNoteType” : “general\n\"Subject\" : \"Willian Andy has questions”\nMi\n“DaveOfBirch™ : *1980-08-06T04:00:00.0002\",\n\"Gender\" : “M\",\n“Maritalscatus\" : “married”,\nWane\" : “Willian Andy\",\n“PrimaryAddress” = (\n“AddressLinel™ : \"34S Fir Lane\",\n“AddressType” : \"hone\",\n“City” : “La Canada\",\n“PostalCode : \"91352\",\nState\" : \"CAT\n\n--- ch11/lesson-07/slide-28.png ---\n| Demonstration G\nCreate a User Integration View\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-07/slide-30.png ---\nQuestion G\n\n_— — inorder to generate JSON wrapper classes, you must: (Select three)\n\n¢\no A) Add anew Run/Debug configuration whose main class is defined as:\ncom. guidewire. tools. json. JsonSchemaWrapperCodegenTool\nB) Run the server in Debug ‘Server’ mode.\nCc\nD\nE\n\nF) Add the schema fully qualified name to the codegen-schemas.txt.\n\nwv\n\nAdd a package called src.jsonschema.\nRun the JSONSchemaWrapperCodegen Tool.\n\nRestart the server after wrapper classes are created.\n\n~ a=\n\nSeo e Soe esses see see\n\n--- ch11/lesson-07/slide-31.png ---\nAnswer Gi\n\n_- — Inorder to generate JSON wrapper classes, you must: (Select three)\n\nv7 “ A) Add anew Run/Debug configuration whose main class is defined as:\ncom.guidewire. tools. json. JsonSchemaWrapperCodegenTool\nB) Run the server in Debug ‘Server’ mode.\nCc\nD\nE\n\nF) Add the schema fully qualified name to the codegen-schemas.txt.\n\nwv\n\nAdd a package called src.jsonschema.\nRun the JSONSchemaWrapperCodegenTool.\n\nRestart the server after wrapper classes are created.\n\nThe correct answers are A, D, and F.\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-07/slide-32.png ---\nQuestion\n\n/- — *-gw-type Is added in a JSON schema to map Guidewire internal types\nPa in cases where a format would be ambiguous, such as: typekeys,\nMonetaryAmount and CurrencyAmount. (True or False)\n\nSeo e Soe esses see see\n\nGi\n\n--- ch11/lesson-07/slide-33.png ---\nAnswer\n\n/- — X-gw-type Is added in a JSON schema to map Guidewire internal types\nPa in cases where a format would be ambiguous, such as: typekeys,\nMonetaryAmount and CurrencyAmount. (True or False)\n\nTrue\n\nSoo eS eee soe ese ese\n\nGi\n\n--- ch11/lesson-07/slide-34.png ---\nLesson\nobjectives ¢ Define the purpose of Integration Views\n\nreview ¢ Configure an Integration View schema,\nmapping, and filter\n* Generate JSON output\n* Generate XML output\n\n--- ch11/lesson-07/slide-35.png ---\n| Student exercise\n\nCreate a Contact Integration View\n\n--- ch11/lesson-08/slide-01.png ---\nRESTful Web Services\n\n--- ch11/lesson-08/slide-02.png ---\nLesson\nobjectives\n\n* Create a swagger schema to define an API\n\n¢ Reference an existing Integration View in the\nAPI\n\n* Create an API handler class\n\n¢ Publish an API\n\n« Use swagger-ui to test an API\n\n--- ch11/lesson-08/slide-04.png ---\n| What is the InsuranceSuite REST framework? Gi\n\n¢ A framework for defining\nRESTful web services\n\n¢ Publishing only\n\n* No client toolkit for\ninvoking APIs\n\n¢ Design approach is\nschema-first rather than\ncode-first\n\n* Based on Swagger\nschemas\n\n« Not based on JAX-RS\n\nRest API Basics\n\nTypical HTTP Verbs:\n\nGET -> Read from Database\n\nPUT -> Update/Replace row in Database\nPATCH -> Update/Modify row in Database\nPOST -> Create a new record in the database\nDELETE -> Delete from the database\n\nDatabase\n\nHTTP\nGET\nIS ee\n\nHTTP POST\n\nOo\n+ /newUser >\ns\nUi HTTP.\nPATCH\n/updateUsey,\n\nwaAzm-rg\n\nRest API\n\nRecieves HTTP\nrequests from\nClients and does\nwhatever request\nneeds. i.e create\nusers\n\n—\n\nOur Rest API queries the\ndatabase for what it needs\n\nk\n\nOur Clients, send HTTP Requests\nand wait for responses\n\nResponse: When the Rest API has what it\nneeds, it sends back a response to the\nclients. This would typically be in JSON\nor XML format.\n\n--- ch11/lesson-08/slide-05.png ---\n| REST framework components\n\n* Swagger schema\n\n* Swagger 2.0 schema definitions to define APIs\nlew\n¢ Integration View\n\n« JSON Schema draft 4 to define the input/output schemas\n\n* Can use the same schemas for integration views and/or\nREST APIs\n\n* Schema files drive request routing, validation, and\n(de)serialization\n\n+ Framework also handles standardized error codes and error\nformats, localization, pluggable authentication, pluggable Ln\nlogging, content negotiation, etc\n\nSwagger\nSchema\n\nPublish\n\n&:\n\nExternal\nRequest\n\n+ \"1980-06-20T04:00:00.0002\",\n\niilliam Andy\",\n\n“primaryAddress™ : {\n\n¢ Gosu classes “eddreastype\" + “hose”\n\n}\n\nd\negg ar 4s\n\n--- ch11/lesson-08/slide-06.png ---\n| Use case\n\nCreate an API that will allow external\nresources to:\n\nView a contact\nView a list of contact notes\nUpdate a contact\n\nAdd a note to a contact\n\nGi\nDesign approach\n\n1. Define the API schema\n\n* Create the Swagger schema for the\nAPI paths and operations\n\n2. Define the API Integration View\n\n* Create an integration view for any\ninputs and outputs\n\n3. Define the API handler class\n\n¢ Implement the API by creating a\nhandler class and its methods\n\n4. Publish and test the API\n\ne Ad it tn nithlichad sanic vam! filo\n\n--- ch11/lesson-08/slide-07.png ---\nDefine API schema\n\n--- ch11/lesson-08/slide-08.png ---\n| Create a new yam file Gi\n\n* Swagger schemas are written as yaml files\n+ Placed in sub-directories of the config/integration/apis folder\n\n* Swagger schemas can be defined in their own namespace within the apis folder, and can be nested in\narbitrary folders\n\n+ Asa best practice, customer-specific Swagger schemas should be put into a customer-specific namespace:\n\n+ apis/<company_code>/<product_code>\n\n+ Swagger schemas must always have a version attached to their v integration\nname, separated by a '-' character v apis\n* The names should be formed as > gw.pl.framework\n\nv trn.ta\n\nconta wagger.yaml\n\n* config/integration/apis/trn/ta/contact-1.0.swagger.yaml\n\n+ <name>-<version>.swagger.yaml\n\n¢ For example, for Training:\n\n+ Swagger schema named trn.ta.contact-1.0 within the application\n\n--- ch11/lesson-08/slide-09.png ---\n| Define header information\n\nbasePath\n\n+ Determines where the resources are rooted on the REST servlet\n\nREST servlet is defined in web.xml file with the default path rest\n\n+ Becomes a prefix to each of the paths\n\n+ The runtime path to the resources will\n\n<scheme>://<server>:<port>/<webapp>/<servlet>/\n<basePath>/<resource>\n\nhttp://localhost:8880/ab/rest/trn/ta/contact/v1/<resource> (resources\nare defined in paths)\n\nInsuranceSuite extensions\n\n+ Any declaration that starts with x-gw are custom InsuranceSuite\nextensions to the schema, for example:\n\nx-gw-schema-import\n\nx-gw-apihandlers\n\n:\n\nswagger: '2.0'\ninfo:\n\nversion: '1.0'\n\ntitle: \"Contact API\"\n\ndescription: \"Contact API\"\nbasePath: /trn/ta/contact/vl\nx-gw-schema-import:\n\ncontact: trn.ta.contact-1.0\ncontactnote: trn.ta.contactnote-1.0\nx-gw-apihandlers:\n- trainingapp. restapi .ContactAPIHandler\nproduces:\n- application/json\nconsumes:\n- application/json\npaths:\n\n--- ch11/lesson-08/slide-10.png ---\n| Define get operation to view a contact anditsnotes [5\n\n¢ HTTP GET requests are used to retrieve resource information only\n\n/contacts/{contactId}:\nget:\nsummary: \"Retrieves a contact details”\noperationId: getContact\nx-gw-permissions:\n~ abview\nparameters:\n- $ref: \"#/parameters/contactId\"\n~ name: filter\nin: query\ntype: string\nenum: [\"contact_details\", \"contactnote details\")\nresponses:\n\"200\":\ndescription: \"Contact details returned”\nschema:\n$ref: \"contact#/definitions/ContactDetails”\n\nWH\n\n¥\n\n¥.\n\nv\n\nparameters:\ncontactId:\nname: contactId\nin: path\ntype: string\nrequired: true\n\n--- ch11/lesson-08/slide-11.png ---\n| Define patch operation to update a contact Gi\n\n¢ HTTP PATCH requests are used to make a partial update on a resource\n\n¢ HTTP PUT requests are used to replace a resource in its entirety\n\n14 Wd\n\npatch:\nsummary: \"Updates a contact\"\noperationId: updateContact\nproduces:\n- text/plain\nparameters:\n- $ref: \"#/parameters/contactId\"\n- name: body\nin: body\nrequired: true\nschema:\n$ref: \"contact#/definitions/ContactUpdate\"\nresponses:\n*200':\ndescription: \"Contact was updated\"\nschema:\ntype: string\n\n--- ch11/lesson-08/slide-12.png ---\n| Define post operation to add a note to a contact Gi\n\n¢« HTTP POST requests are used to create new resources\n\nLW\n\n/contacts/{contactId} /note:\npost:\nsummary: \"Adds a note to a contact”\noperationId: createContactifote\nparameters:\n- $ref: \"#/parameters/contactIa\"\n~ name: body\nin: body\nrequired: true\nschema:\n$ref: \"contactnote#/definitions/ContactNoteDetails”\nresponses:\n\"201\":\ndescription: \"Note was added to the contact”\n\n--- ch11/lesson-08/slide-13.png ---\n| Parameter validation constraints Gi\n\n« Aresource may have a parameter in OED\ntheir path, body, header and query\n\n\"/destinations/{destinationId}/retry\":\npost:\n\nDepending on the type of parameter,\nconstraints can be specified to ensure\nthe request conforms to expected\nschema definition\n\nApart from standard swagger schema\n2.0 spec parameter options we also\nsupport:\n\n* x-gw-type for path, query and header\nparameters\n\n* The value of x-gw-type is an InsuranceSuite\ntypekey\n\nsummary: “Retry messages for a destination that had errors”\ndescription: \"\"\noperationid: retryHessages\nx-gw-apihandler: gw.api.rest.pl.system.v10.MessagingToolsaPIHandler\nparameters:\n- ref: “#/parameters/destinationid™\n-]name: category\njin: query\nrequired: false\n\nItype: string\n{x-gu-type:_typekey.ErrorCategory\nparameters:\ndestinationId:\nname: destinationid\nin: path\ndescription: “ID of the destination”\nrequired: true\ntype: integer\nformat: _int32\n\n--- ch11/lesson-08/slide-15.png ---\n| Integration Views and the REST API Gi\n\n¢ API inputs and outputs can be associated with a\n\nJSON schema definition and its corresponding > =\nmapper file VE filters.trn.ta\n\n= address_minimal-1.0.gql\n& contact_details-1.0.gql\n= contactnote_details-1.0.gql\n\n* The JSON schema and mapping files in\nInsuranceSuite are shared between the Integration\n\nViews framework and the REST API framework mappingstinta\n4) address-1.0.mapping,json\n¢ Both make use of the same files, with the same rules, and 4) contact-1.0.mapping,json\n\nthe same subset of json schema 4 contactnote-1.0.mapping,json\n\n> gw.pl.framework\n\nv tr.ta\n4) address-1.0.schema,json\n¢) contact-1.0.schema,json\n\n5 contactnote-1.0.schema,json\n\n--- ch11/lesson-08/slide-16.png ---\n| Integration View files to view a contact and its notes [5\n\n*« Schema file\n\n* contact-1.0.schema.json imports address and schemas > Bm apis\n* ContactDetails definition contains properties needed for ¥ En fitters:tm.ta\nresponse object = address_minimal-1.0.gql\n2 contact_details-1.0.gql\n¢ Mapper file # contactnote_details-1.0.9ql\ncoe . . mappings.tmn.ta\n* contact-1.0.mapping.json imports address and mappings  address-1.0.mapping,json\n* ContactDetails mappers defines paths to data needed for i} contact-1.0.mapping,json\nresponse object properties { contactnote-1.O.mapping,son\n\n¢ Filter files gw.pl.framework\n\ntna\n\n* contact_details-1.0.gql\n\n4) address-1.0.schema,json\n\n* contactnote_details-1.0.gql () contact-1.0.schema,json\n) contactnote-1.0.schema,json\n\n« Used to return either contact or notes information\n\n--- ch11/lesson-08/slide-17.png ---\n| Integration View files used to update a contact Gi\n\n* Schema file\n\n* ContactUpdate definition is added to the J nemne  wontect\ncontact-1.0.schema.json file \"properties\" : {\n36 \"DateOfBirth\" : {\n* x-gw-nullable = true added to \"type\" : \"string\",\nproperties to allow for null values \"format\" : \"date-time\",\n39 \"x-gw-nullable\" : true\n+ By default, on input, explicitly-null properties\nare not allowed \"DriversLicenseNumber\" : {\n\n\"type\" : \"string\",\n\"x-gw-nullable\" : true\n\n¢ Mapper file\n\n}\n\n:, . A . \"Dri Li State\" : {\n+ Not required since mapping of the input . “type” t \"etring\",\nproperties ” \"x-gw-type\" : \"typekey. Jurisdiction”\nand domain properties will be handled in the }\n\nAPI handler class } ,\n\n--- ch11/lesson-08/slide-18.png ---\n| Integration View files used to add a contact note\n\nSchema file\n* contactnote-1.0.schema.json file\nMapper file\n\n* Not required since mapping of the input\nproperties and domain properties will be\nhandled in the API handler class\n\nGi\n\n‘} contactnote-1.0.schema,json\n\nt\n\n\"$schema\" :\n\"definitions\" : {\n\n\"http: //json-schema.org/draft-04/schema#\",\n\n\"contactNoteDetails” : {\n\"type\" : \"object\",\n\"properties\" : {\n\"contactNoteType” : {\npe\" : \"string\",\ngw-type\" : \"typekey.ContactNoteType”\n\nim\n\"Confidential\" : {\n\n\"type\" : \"boolean\"\nih\n\"Subject\" : {\n\n\"type\": \"string\"\nh\n\"Body\" = {\n\n\"type\": \"string\"\n\n--- ch11/lesson-08/slide-20.png ---\n| API handler class Gi\n\nx-gv-apihandlers:\n\n* Handler classes can be specified at the root level of ~ erainingapp.reevapt .ConcactAPTHandier\nthe document and overridden at the operation level y aepticarianrdaea\n* The root document can provide a list of classes rather than « sppliasion seen\njust one; they'll be considered in order 2 Jeontacts/(contactta)\nget:\n+ Handler classes need to have a no arguments, public constructor : anemone net Seteuist\n\ndeno.restapi .DemoContactAPIHandler\n\nclass Con\n\n* Every operation defined for a published API must have an associated handler method\n\n+ For each operation:\n\nFramework will look for a public method with a name matching the operationld, for each candidate handler class\nDeclared methods are considered first, then all methods\nThere must be exactly one match\n\nMethod names cannot be overloaded\n\n--- ch11/lesson-08/slide-21.png ---\n| Parameter binding\n\nEach method parameter must match the name and\ntype of a parameter declared on the Swagger schema\n\n* Order doesn’t matter\n\n+ Don’t have to include all possible parameters\n\nclass Cont\n\nfunction getContact(contactId : String,| fi\n\n|: TransformResult {...}\n\nEach parameter to the API handler method must either be:\n\n+ A parameter declared on the Swagger schema for the associated\noperation, or\n\n* Of type gw.api.rest.RequestContext\n\nRuntime operation parameter values can always be retrieved by name\nfrom the RequestContext if they're not explicit arguments to the handler\nmethod\n\nGi\n\npaths:\n/contacts/(contactId}:\nget:\n\nsummary: \"Retrieves a contact details\"\nx-gw-apihandlers:\n~ deno. restapi .DenoContactAPIHandler\noperationId: getContact\nx-gw-permissions: <1 ites>\n\nters /contactId\"\n\nenum: [\"contact details\", \"contactnote details\")\n\n--- ch11/lesson-08/slide-22.png ---\n| Return values Gi\n\n* The API Handler method can return either\ngw.api.rest.Response, void, or any type\nthat can be serialized out at runtime\n\nfunction getContact (contactid : String, filter : String) :{TransformResult (...}\n\nclass ContactAPIHan\n\nfunction updateContact (contactId : String, body : Jsondbjq Sering{...}\n\n* Some common return types include: function «\n\nactilove (contactId : String, body : Jsorpbject) : void (...}\n* void\n\n+ If the operation returns a 204 response code (no content), the method need not return anything at all\n* TransformResult\n\n+ An operation that produces JSON and/or XML and which uses an Integration Mapping to produce that data can\nreturn a TransformResult directly\n\n* String or byte]\n+ Can return a String or byte[] that will be written out as-is.\n+ Response\n\n+ Can return a Response object that explicitly sets the response code, response body, and/or custom headers\n\n--- ch11/lesson-08/slide-23.png ---\nHandler method to view a contact and its notes\n\nfunction getContact(contactId : String, filter : String) : TransformResult (\n\nvar contact = findContactBylId(contactId)\n\n+0\", \"ContactDetails\")\n\nvar mappingOpts = new JsonMappingOptions ()\nswitch (filter) {\ncase \"contact_details\":\nnappingOpts.withFilter(\"trn.ta.contact_details-1.0\")\nbreak\ncase \"contactnote_details\":\nnappingOpts.withFilter(\"trn.ta.contactnote_details-1.0\")\nbreak\n}\nreturn jsonMapper.transformObject (contact, mappingOpts)\n} else {\nreturn jsonMapper.transformdbject (contact)\n}\n)\n\nprivate function findContactByld(contactId : String) : ABContact {\n\nvar query0b} = Query.make(ABContact)\n\nquery0bj..compare (ABContact#PublicID, Relop. Equals, contactId)\nvar target0bj = query0bj.select() .AtMostOneRow\n\nreturn target0bj\n\n--- ch11/lesson-08/slide-24.png ---\n| Handler method to update a contact Gi\n\nfunction updateContact(contactId : String, body : JsonObject) : String{\nvar contact = findContactById(contactId)\nvar contactUpdate = ContactUpdate.vrap(body)\nTransaction. runW#ithNevBundle(\\b -> {\ncontact = b.add(contact)\n\nif (body.containsKey(\"dateOfBirth\")) {\n(contact as ABPerson) .DateOfBirth = contactUpdate.DateOfBirth\n\nif (body. containsKey(\"driversLicenseNumber\")) {\n(contact as ABPerson).LicenseNumber = contactUpdate.DriversLicenselumber\n\nif (body. containsKey(\"driversLicenseState\")) {\n(contact as ABPerson).LicenseState = contactUpdate.DriversLicenseState\n}\n»\nreturn (\"Contact \" + contact.DisplayName + \" was successfully updated\")\n\n--- ch11/lesson-08/slide-25.png ---\n| Handler method to create a contact note Gi\n\nfunction c e(contactId : String, body : JsonObject) : void {\nvar contac! ‘indContactById (contactId)\nvar contactNote = ContactNoteDetails.vrap (body)\nTransaction. runW#ithNewBundle(\\b -> {\nvar newNote = new entity.ContactNote()\nnewNote.ContactNoteType = contactNote.ContactloteType\nnewNote.IsConfidential = contactNote.Confidential\nnewNote. Subject = contactNote.Subject\nnewNote.Body = contactNote.Body\ncontact.addToContactNotes (newNote)\n\n* The newNote entity instance (ContactNote) is added to the contact read-only\nentity instance (ABContact) by a foreign key field on newNote itself\n\n¢ Therefore, the read-only contact entity instance does not need to be added to or\ncommitted in the bundle\n\n--- ch11/lesson-08/slide-26.png ---\n| Deploy code changes Gi\n\n¢ New Gosu class * Modified Gosu Class\nD> Run ‘Server’\nTools VCS Window Help 9% Debug Server\nD Run ‘Server’ Shift+F10 W Run ‘Server’ with Coverage\n186 Debug ‘Server’ Shift+F9 D Run...\nE Run ‘Server’ with Coverage W Debus...\n\nAttach to Local Process...\n[> Edit Configurations...\nB] Import Test Results\n\nD Run... Alt+Shift+F10\nWE Debug... Alt+ Shift+F9\n7 Attach to Local Process...\n\n[> Edit Configurations... Il Stop ‘Server’\nImport Test Results > EF show Running List\n\nHE Stop ‘Server’ Ctrl F2 Stop Background Processes...\n\n--- ch11/lesson-08/slide-28.png ---\n| API publishing\n\nSchema files do not turn into network endpoints by default —— \"a\n\n* Must opt-in APIs to control what is exposed on the network\n\n.\n\n°\n\npublished-apis.yaml\n\n~ name: gw.pl.£f\n\njev_template-1.0\n\nFiles are added to config/integration/apis/published-apis.yaml\n\nExtension model\n\n* Customers extend the core API and publish their\nextended version, not the core one\n\n« Multiple live versions can be published, all based\non core version\n\nThe default API URL returns a list of APIs\nthat have been published\n\n* http://localhost:8880/ab/rest/apis\n\nic}\n\nJSON Raw Data\n\nSave Copy\nsapis:\nbasePath\ndescription\ndocs:\n\ntitle\n\ndescription\ndocs\ntitle\n\n® locathost:8880/ab/rest,\n\nHeaders\n\n“Dynamically lists the APIs that are available”\n“http://Locathost :8880/ab/rest/opis/swogger. json”\nwAPI List”\n\n“/contact/v1\"\n“Contact API”\n“http://Locathost :8880/ab/rest/contact/v1/swagger. json”\n“Contact API”\n\n--- ch11/lesson-08/slide-29.png ---\n| swagger-ui\n\n« InsuranceSuite bundles a swagger-ui distribution\n+ Default URL is <base servlet url>/resources/swagger-ui/\n+ http://localhost:8880/ab/resources/swagger-ui\n¢ Every API automatically gets a /swagger.json endpoint\n+ The serviet by default exists at /rest\n+ Returns the default external view of the schema\n¢ In swagger-ui manually change the endpoint to reference the desired API\n+ <basePath>/swagger.json\n\n+ The basePath declared in the schema is prepended to every path in the schema\n\n{+ swagger http:/localhost:8880/ab/rest/trn/ta/contact/v1/swagger.json\n\nExplore\n\n--- ch11/lesson-08/slide-30.png ---\nContact API\n\nClick Authorize to enter login credentials\nClick HTTP verb to test each API\n\n1. Click Try it out to test\nEnter parameter(s)\n\n2.\n3. Click Execute\n\nee CT\n\nContact API®\n\nContact API\nITP a\ndefault Vv\n\nParameters\n\nComacad sed\n\nfiter\n\nDescription\n\n_ 200\n\n- —\n\nServer response\n\ncode Details\n\n--- ch11/lesson-08/slide-31.png ---\n| Demonstration G\n\nCreate a User REST API\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-08/slide-33.png ---\nQuestion G\n\n7~ — Match the HTTP verb with its description\n\n7\n¢\n\n[verb answer Description\n\nif\n\n| PUT Delete from the database\n\n| RETRIEVE Update/Replace row in the database\nI GET Create a new record in the database\n| PATCH Read from the database\n\n| INSERT Update/Modify row in the database\n\n1 REMOVE Not an HTTP verb\n\n' POST Not an HTTP verb\n\n' REPLACE Not an HTTP verb\n\n1\n\n|||\n\nDELETE Not an HTTP verb\n\n--- ch11/lesson-08/slide-34.png ---\nAnswer Gi\n\n_- — Match the HTTP verb with its description\n\n7\n¢\n\nSve [answer Description\n\nf\n\n| PUT Update/Replace row in the database Delete from the database\n\n| RETRIEVE Not an HTTP verb Update/Replace row in the database\nI GET Read from the database Create a new record in the database\n| PATCH Update/Modify row in the database Read from the database\n\n| INSERT Not an HTTP verb Update/Modify row in the database\n\n| REMOVE Not an HTTP verb Not an HTTP verb\n\ni] POST Create a new record in the database Not an HTTP verb\n\n| REPLACE Not an HTTP verb Not an HTTP verb\n\n! DELETE Delete from the database Not an HTTP verb\n\n--- ch11/lesson-08/slide-35.png ---\nQuestion\n\n_— — What file must be updated to publish an API schema?\n\n4\now A) swagger.yaml\n\nB) published-schemas.yaml\nC) codegen-schemas.yaml\nD) published-apis.yaml\n\nE) json-apis.yaml\n\nSe Soe Se sees esse ese\n\n--- ch11/lesson-08/slide-36.png ---\nAnswer\n\n_- — What file must be updated to publish an API schema?\nook\nB\n\nc\n\nD\n\nE\n\nswagger.yaml\n\npublished-schemas.yaml\n\nwv\n\ncodegen-schemas.yaml\n\npublished-apis.yaml\n\njson-apis.yaml\n\nThe correct answer is published-apis.yaml\n\nSoo eS oe ese Sse ese\n\n--- ch11/lesson-08/slide-37.png ---\nLesson\nobjectives * Create a swagger schema to define an API\n\nreview ¢ Reference an existing Integration View in the\nAPI\n\n* Create an API handler class\n¢ Publish an API\n« Use swagger-ui to test an API\n\n--- ch11/lesson-08/slide-38.png ---\n| Student exercise\n\nCreate a Contact REST API\n\n--- ch11/lesson-09/slide-01.png ---\nSOAP Web Services\n\n--- ch11/lesson-09/slide-02.png ---\nLesson\nobjectives ¢ Describe how Guidewire applications and\n\nexternal systems can integrate with each\nother using SOAP web services\n\n* Configure Guidewire to consume an external\nSOAP web service\n\n* Configure Guidewire to publish a SOAP web\nservice\n\n--- ch11/lesson-09/slide-04.png ---\n| What is a SOAP web service Gi\n\nGi & &\n\n==\nGuidewire Web service External\napplication system\n\n* ASOAP web service is a collection of open protocols and standards used for\nexchanging XML-based data between applications\n\n* Applications can be local, distributed, or web-based\n* Open protocols and standards such as TCP/IP, SOAP, HTTP, Java, HTML, WSDL, and XML\n\n* Communication is typically synchronous\n\n--- ch11/lesson-09/slide-05.png ---\n| SOAP\n\nVehicle Request\n\n(XML)\n52\nVehicle Report\n(XML)\n\nSOAP (Simple Object Access Protocol) is an open-standard, XML-based protocol for exchanging\ninformation through a web service\n\nIs a communication protocol designed to communicate via the Internet\nCan extend HTTP for XML messaging\n\nProvides data transport for Web services\n\nCan exchange complete documents or call a remote procedure\n\nIs platform and language independent\n\n--- ch11/lesson-09/slide-06.png ---\nrN & Exchange Rate\nee System\n[5 tl 25\n\nCurrencyAPI\n\nService: CurrencyAPI\n- Method: getRate\n- Input: toCurrency (String)\n\n- Input: fromCurrency (String)\n- Output: rate (float)\n\n« AWSDL (Web Services Description Language) is an XML-based protocol that\ndefines the operations available for a web service and the required input and\noutput values\n\n* Generated by the \"publisher\"\n\n« Used by the \"consumer\" to create requests\n\n--- ch11/lesson-09/slide-07.png ---\n| WSDL binding styles\n\nWSDL bindings describes how the SOAP web service is bound to a\nmessaging protocol, particularly the SOAP messaging protocol\n\n* AWSDL SOAP binding supports four style/use models\n\n+ Guidewire supports Documentiliteral (WS-I) binding style\n\n<soapl2:binding transport=\"http://schemas.xmlsoap.org/soap/http\"\nstyle=\"document\"/>\n\n<soap12:body use=\"literal\"/>\n\n+ XSD attached to the WSDL validates XML\n\nWeb service collections (WSC) consume WSDLs that use WS-I|\ndocuments literal binding\n\n* RPCE Web Services are not supported\n\nFP\n\n(BJ ml\n\n--- ch11/lesson-09/slide-08.png ---\n| SOAP web services for InsuranceSuite integration\n\n¢ InsuranceSuite can consume SOAP web services\n\n&\n\nGet exchange rates CurrencyAPI\n\nCurrencyWSC\n\n¢ InsuranceSuite can publish SOAP web services\n\nGi & Make payment\n—— &\nme\n\nFinancialsAPI\n\n--- ch11/lesson-09/slide-10.png ---\n| Web service collections\n\nc= stockquote\n\nCN Mm c-N Mm\n| xso |\n\nstockquote stockquote related related\nWSDL XSD WSDLs (if any) —_-XSDs (if any)\n* Aweb service collection is a collection of references to an external WS-I web\n\nservice\n* It consists of one or more resources including:\n¢ Primary WSDLs and XSDs for the external web service\n\n« Any WSDLs and XSDs referenced by the primary files\n\n--- ch11/lesson-09/slide-11.png ---\n| Use case\n\nGi\n\n* Consume an external WS-I web\n\nservice that publishes a stock quote\n\ngiven a stock symbol\n\nTA\n\nCa\n\nstockquote\nWSDL\n\nstockquote\nxsD\n\n2.\n\n3.\n\na stockquote 4.\nxs9 ——_'  __\\so\n\nCreate a package for the web\nservice collection\n\nCreate a new web service\ncollection\n\nFetch the external resource\nRegenerate XML classes\n\nReference the web service\n\n= collection in Gosu\n—_)\n\nrelated\nWSDLs (if any)\n\nrelated\nXSDs (if any)\n\n--- ch11/lesson-09/slide-12.png ---\nCreate a package for the web service collection\nA\n\n¢ Guidewire naming convention recommendation\n* gsrc.<company>.<app_code>.webservice.<functional_area>\n\n¢ Example: trn.ta.webservice.stocks\n.\n\nCctitex |© Gosu Program\n\ni AlteF7 | (© Groovy Class\nFind in Bath. Cute shiter |i File\n\nReplace in Path. CtuleShifter | # Scratch Fle _CtrlsAlteShftsincet\n> Mires ae 1\n\n* To create a package:\n\nEnter new package name:\n\ntrn.ta.webservice.stocks\n\n* Right-click on the parent package -_\n\n« Select New > Package\n\n+ Enter the new package name\n\n--- ch11/lesson-09/slide-13.png ---\n| Create a new web service collection Gi\n\n* To create a new web service collection:\n\nEnter a new WS-I web service collection name\n\n¢ Right-click on the package\n\nstocknuctewse\n+ Select New > Web Service Collection once\n« Enter a new WS-I web service collection name\n> Bu tarsi EE © <<;\n> Bm trainingapp % Cut Ctriex |© Gosu Program\ntrnta.webservicestocks TD copy Ctiec | © Gosu Enhancement\n\n> Ea wsi Copy Path Ctrieshifte¢ | Gosu Template\nMS gtest Copy Reference Ctrlealteshitt+c |S GX Model\n\nplugins El Baste\n\nDF stockquotewsc.wse\n\n¢ Initially, a new web service collection has no resources —s +\n\nResources:\n\n--- ch11/lesson-09/slide-14.png ---\n| Fetch the external resource Gi\n\n* To fetch the external =\nresource:\nGi\n* Click Add New Resource Resource URL:\n\nhttp://localhost:8890/ab/ws/externalapp/webservice/StockAPI?7WSDL\n\n* Specify the resource URL =\n\n* Click Fetch\n(DE stockquotewsc.wse [ =a\n+ The external system must + [5] Setun Enviconmmest:\nbe running —)\nsources:\nURL\nhttp://localhost:8890/ab/ws/externalapp/webservice/StockAPI?WSDL | Setti PigictiRerres\nings\n\nY CA stockquotewse.wse\n> EA StockAPwsdl\n\n* Project view shows\n\nv trn.ta.webservice.stocks\n\nfetched resource v BW stockquotewse > CA soapheaders.xsd\nip Soapheaders.xsd\n¢ WSC folder ty StockAPI.wsdl\n\n* XSD and WSDL files DE stockquotewsewse\n\n--- ch11/lesson-09/slide-15.png ---\n| Reference the web service collection in Gosu Gi\n\n* Syntax to reference a web service collection API instance:\n\n* new <package_path>.wscname.wsdlname.ServiceName ()\n1 uses trn.ta.webservice. stocks. stockquotewsc. stockapi. StockAPI\n\nvar api = new StockAPI()\n\napi.Config.Http.Authentication.Basic.Username = \"externalappuser\"\napi.Config.Http.Authentication.Basic.Password = \"gw\"\napi.Config.CallTimeout = 30000\n\nvar stockQuote\nprint (stockQuote)\n\napi.getQuote (\"GWRE\")\n\n<quote>\n<name>GUIDEWIRE INC</name>\n<symbol>GWRE</synbol>\n<price>37.1</price>\n</quote>\n\n--- ch11/lesson-09/slide-16.png ---\n| Deploy code changes\n\nNew or modified web service collection\n\nBYE Tools VCS Window Help\n\nD> Run ‘Server’ Shift+F10\nI, Debug ‘Server’ Shift+F9\nRun ‘Server’ with Coverage\n\nD Run... Alt+Shift+F10\nWE Debug... Alt+ Shift+F9\n\n\\q Attach to Local Process...\n[> Edit Configurations...\nImport Test Results >\n\nI Stop ‘Server’ Ctrl+F2\n\n--- ch11/lesson-09/slide-17.png ---\n| Demonstration G\nConsuming a SOAP web service\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-09/slide-20.png ---\n| InsuranceSuite SOAP web services\n\n————————>\n\ndoesContactExist\n| & getContacthio i ——_—_—_—_—->\n= | setContactEmail q—_—_—_— p> ots\nContactAPI External\nSystem\n\n« An InsuranceSuite SOAP web service is a web service hosted by the Guidewire\napplication that external systems use\n\n¢ InsuranceSuite SOAP web services are appropriate for integration points where:\n« External requests are synchronous\n\n« External requests use the SOAP protocol\n\n--- ch11/lesson-09/slide-21.png ---\n| Use case Gi\n\n¢ Publish a SOAP web service that 1. Create a package for the web\nexposes Contact information that is service API\nconsumed by an external resource\n\nN\n\nCreate a new API Gosu class\n\nad\n\nCreate a Gosu class for return type\n(if necessary)\n\n-\n\nRestart server to deploy changes\n\na\n\nTest (local or using external system)\n\ndoesContactExist —_—_————==>\nExternal\n\ngetContacthhioi ————_—_—_——>\nContactAPI\n\nSystem\nsetContactiEnal  — ——_—_——>\n\n--- ch11/lesson-09/slide-22.png ---\n| Gosu class with SOAP web service annotations Gi\n\n¢ Required\n\n* @WsiWebService annotation is required to declare a class as implementing a SOAP web\nservice\n\n* Optional\n\n* @WsiPermissions specifies user permissions\n+ Default to soapadmin\n\n* @WsiAvailability specifies the minimum system run level when a web service becomes\n\navailable 7 uses gw.xml.ws.annotation. WsiWebService\n. . 8 uses gw.xml.ws.annotation.WsiPermissions\n+ Default is maintenance 9 uses gw.xml.ws.annotation.Wsiavailability\n10\n11 @WsiWebService\n12 Gisi Permissions ({SystemPermissionType.7C_ABEDIT})\n\n13 @WsiAvailability (AvailabilityLevel.MAINTENANCE)\n\n15 class ContactAPI {\n\n--- ch11/lesson-09/slide-23.png ---\nSOAP web service methods Gi\n\n¢ Method can accept and/or return: ¢ Method can return an object\n\n* Simple values: Booleans, numbers, « Returned object must be of a Gosu\nstrings, lists, arrays class type that is usable as a web\n+ XML types services return type\n\n20 w 43 // u\n2 function (publicId : String) : boolean { 44 function (publicId : String) :(ContactInfo}{\n22 var query0b} = gw.api.database.Query.make(ABContact) 45 var query0bj = gw.api.database.Query.make(ABContact)\n23 query0bj.compare(\"PublicID\", Equals, publicId) 46 guery0b3 compare (\"PublicID\", Equals, publicId)\n24 return (not query0b}.select().Empty) 47 var targetContact = query0bj. select () -AtMostOneRow,\n25 ) 48 var aContactInfo = new ContactInfo()\n49 aContactInfo.ContactName = targetContact.DisplayName\n50 aContactinfo.ContactType = targetContact. Subtype.DisplayName\n51 aContactInfo.Email = targetContact.EmailAddress1\n52 aContactInfo.PrimaryPhone =\n53 targetContact.PrimaryPhone.DisplayName\n54 return aContactInfo\n55\n\n--- ch11/lesson-09/slide-24.png ---\n| Gosu class for SOAP web service return types Gi\n\n* @WsiExportable annotation ensures that the object is XML serializable\n¢ final keyword ensures class cannot be subtyped\n\n© Contactinfo.gs x\npackage acme.ta.webservice.contact\n\nuses gw.xml.ws.annotation.WsiExportable\n\n@WsiExportable\n\n2\n3\n4\n5 { final}class Contactinfo {\nG\n7\n8\n\nvar _con' tring as ContactName\n9 var _con| tring as ContactType\n10 var _primaryP : String as PrimaryPhone\n\na var email : String as Email\n\n--- ch11/lesson-09/slide-25.png ---\n| Using bundles in a SOAP web service Gi\n\n¢ For SOAP web service methods committing data, create a bundle:\n\n* gw. transaction. Transaction. runWithNewBundle ()\n\n27\n28\n\n1 (publicId : String, email : String) : void {\n29 ID\n30 gw.api.database.Query.make (ABContact)\n31 query0b}.compare(\"PublicID\", Equals, publicId)\n——p> 32 var targetContact = query0bj.select() .AtMostOneRow\n33 /\n——> 34\n35\n=> 36\n38 targetContact.EmailAddress1 = email\n39 I x its\n—P 40 »\n42 }\n\n--- ch11/lesson-09/slide-26.png ---\n| Test the SOAP web service using a local WSDL Gi\n\n¢ Inthe test play both roles: publisher and consumer\n¢ Generate a local WSDL to test Guidewire published web services\n\nPublisher Consumer\nExternal\nI 1s) System\nProduction ay | & ( WSDL —_\n— 0\n\nWeb Service WSDL\n\nGosu\ntest code\n\nWeb Service local WSDL\n\n--- ch11/lesson-09/slide-27.png ---\n| WSDL generator for local SOAP web services\n\n« Run from command line\n* gwb genWsiLocal\n\n¢ Generates local WSDLs for all web\nservices under\n\n* gsrc.wsi.local ...\n\n¢ Restart the Guidewire application\n\nevvvevvee\n\ngsr\n\ncom.guidewire pl.docecamples\ndemota\now\nlibraries\nsitawrestapi\ntrainingapp\ntr.ta.webservicestocks\nwsi\nlocal\n> Bagw\n\nv__Ei trainingapp.webservice.contact\n\n--- ch11/lesson-09/slide-28.png ---\n| Local test example Gi\n\n¢ Syntax to create an API instance from a local test WSDL:\n\n* var api = new wsi.local.<package_path>.class.Service\n\nuses wsi.local.trainingapp.webservice.contact.contactapi.ContactAPI\n\nvar localAPI = new ContactAPI()\n/ set AP. a\nlocalAPI.Config.Http.Authentication.Basic.Username = \"su\"\nlocalAPI.Config.Http.Authentication.Basic.Password = \"gw\"\n/ set 1 address\nlocalAPI.setContactEmail(\"ab:5\", \"test@guidewire.com\")\n/ retrieve\nvar contactExist = localAPI.doesContactExist (\"ab:5\")\nvar contactInfo = localAPI.getContactInfo(\"ab:5\")\nprint (contactExist)\nprint(\"Summary: \" + contactInfo.ContactName +\" ; \" + contactInfo.Email)\n\nies\n\ntrue\nSummary: William Andy ; test@guidewire.com\n\n--- ch11/lesson-09/slide-29.png ---\n| Test SOAP web service using external system Gi\n\n* Recommend SoapUI for external €) > S(O tocatnosts8s0/ab/ws\ntesting © Document/Literal Web Services\n28 gw\n* www.soapui.org & © webservice\n& © ab\n¢ In each Guidewire application, ® © pl\n. 4, . S wsi\navailable WSDL’s can be found at: © trainingapp\nor i\n* http://<machine>:<port>/<product_code>/ws a webservice\n\n© Supporting Schemas\n® Generated Schemas\n® © Supporting WSDLs\n\n® localhost:8880/ab/ws/trainingapp/webservice/contact/ContactAPI?WSDL\n\n--- ch11/lesson-09/slide-30.png ---\n| Deploy code changes Gi\n\n* NewAPI classes * Modified API classes\nJRun | Tools VCS Window Hel\nD> Run ‘Server’\nBMEY Tools VCS Window Help 9% Debug ‘Server’\nD> Run ‘Server’ Shift+F10 Hi Run Server with Coverage\n> Fun.\n¥E Run ‘Server with Coverage %€ Debug...\n\nD Run... Alt Shift+F10\nWE Debug... Alt+Shift+F9\n7\\m Attach to Local Process...\n\nE> Edit Configurations...\n\n@]_Import Test Results >\n\nIH Stop ‘Server’ CtrlsF2\n\n2\\y Attach to Local Process...\n[> Edit Configurations...\n2] Import Test Results\nI Stop ‘Server’\nEF show Running List\nStop Background Processes...\n\n--- ch11/lesson-09/slide-31.png ---\n| Demonstration G\nPublishing a SOAP web service\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-09/slide-33.png ---\nQuestion\n\n,- — What is a WSDL? What does it describe?\n\n¢\n¢\n¢\n\nSeo e Soe esses see see\n\n--- ch11/lesson-09/slide-34.png ---\nAnswer\n\n,- — What is a WSDL? What does it describe?\n¢\n\n¢\n¢\n\nAWSDL is an XML document that describes how an external system can interact with\na web service.\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-09/slide-35.png ---\nQuestion\n\n_— — What type of files can be included as resources in a SOAP web service\nPa collection?\n\nSeo e Soe esses see see\n\nGi\n\n--- ch11/lesson-09/slide-36.png ---\nAnswer\n\n_— — What type of files can be included as resources in a SOAP web service\nPa collection?\n\nWSDLs and XSDs\n\nSoo eS eee soe ese ese\n\nGi\n\n--- ch11/lesson-09/slide-37.png ---\nQuestion G\n\n_- — You have an API instance named “conversionAPI\". Under what\n\nPa circumstances would you set properties on conversionAPI .Config?\n\n¢\n\nSeo e Soe esses see see\n\n--- ch11/lesson-09/slide-38.png ---\nAnswer Gi\n\n,- — You have an API instance named “conversionAPI\". Under what\nPa circumstances would you set properties on conversionAPI .Config?\n¢\n\nYou would set values there if you needed to provide authentication information,\ntimeouts, or custom SOAP headers.\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-09/slide-39.png ---\nQuestion\n\n_- — What must be added to a Gosu class in order to make it:\n4\n\no A) AGuidewire SOAP web service?\n\nB) Avalid return type for Guidewire SOAP web service methods?\n\nSeo e Soe esses see see\n\n--- ch11/lesson-09/slide-40.png ---\nAnswer Gi\n\n_- — What must be added to a Gosu class in order to make it:\n4\n\n“ A\n\nB\n\nA Guidewire SOAP web service?\n\nA valid return type for Guidewire SOAP web service methods?\n\nA) The @WsiWebService annotation is the only thing required to make a Gosu class\na Guidewire SOAP web service.\n\nB) The @WsiExportable annotation and the keyword \"final\".\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-09/slide-41.png ---\nQuestion G\n\n___ Identify if the following are true or false about a Guidewire WS web\n7’ service API:\n, A) Itcan return a simple value, such as a boolean or string.\nB) Itcan return an instance of any Guidewire data model entity.\nC) The WSDL gets generated when you save the class.\nD) Itcan list a set of permissions required to use the API.\n\nE) Itcan modify Guidewire data.\n\nSeo e Soe esses see see\n\n--- ch11/lesson-09/slide-42.png ---\nAnswer fa\n\n7\n\n¢\n¢\n¢\n\nSoo eS eee soe ese ese\n\nIdentify if the following are true or false about a Guidewire WS-I web\n~ service API:\n\nA) It can return a simple value, such as a boolean or string. True\n\nB) It can return an instance of any Guidewire data model entity. False — Instances\nof Guidewire data model entities cannot be returned from WS-I web service\nmethods\n\nC) The WSDL gets generated when you save the class. False - The WSDL is\ngenerated when an external system requests it.\n\nD) It can list a set of permissions required to use the API. True\nE) It can modify Guidewire data model. False\n\n--- ch11/lesson-09/slide-43.png ---\nLesson\nobjectives ¢ Describe how Guidewire applications and\n\nreview external systems can integrate with each\nother using SOAP web services\n\n* Configure Guidewire to consume an external\nSOAP web service\n\n* Configure Guidewire to publish a SOAP web\nservice\n\n--- ch11/lesson-09/slide-44.png ---\n| Student exercise\n\nConsume and publish SOAP web services\n\n--- ch11/lesson-10/slide-01.png ---\nPlugins\n\n--- ch11/lesson-10/slide-02.png ---\nLesson\nobjectives ¢ Describe the basic functionality of Guidewire\n\nplugins\n¢ Configure plugins in Gosu\n* Configure plugin parameters\n¢ Register and deploy plugins\n\n--- ch11/lesson-10/slide-04.png ---\n| Guidewire plugin G\n\n+ . . i: & Project A © | Hie\n* Aninterface provided by Guidewire SS Brinnon AGWiOtrineghyrinedicertgrair\nv Ce confic\n+ Describes methods called by the application > Beni Homes\n. . ao . > D8 Btensions\n* May define required application behavior > CPLocalizations\n> > Messaging\n+ Authentication Plugins > D& Metadata\n> [& age Configuration\n+ Number generators Dib Plugins\n7 . . Y DWregistry\n* Or may define an integration point 1 AuthenticationServicePlugin.gwp\n@ AuthenticationSourceCreatorPlugin.gwp\n* Messaging plugins 1@ BackgroundTaskFailoverPlugin.gwp\n@ BackgroundTaskLoadBalancingPlugin.gwp.\n+ Document Management 1@ BankAccountV nRequest.gwp\n. . . 1@ BankAccountVerificationTransport.gwp\n* Since you implement the interface(s), & BCBilingSysternTransport.gwp\n@ BillingSystemPlugin.gwp\n+ You define method behavior @ CCClaimsystem Transport gwp\n& ClaimSystemPlugin.gup\n« Based on the interface contract, you define: o& ClusterGroadcastTransportFactory.gwp\n@ ClusterFastBroadcastTransportFactory.gwp.\n+ Input parameters @ ClusterUnicastTransportFactory.gwp\n\n@ DefaultPrintToConsoleTransport.gwp\n©) Return values 1@ documentStoreTransport.gwp\n\n--- ch11/lesson-10/slide-05.png ---\n| Types of plugins\n¢ Predefined plugins\n\n+ Used to implement customizable\nbehavior for predefined points in the\napplication\n\n« Messaging plugins\n\n+ Used to send messages to external systems\nand process the resulting replies\n\n¢ Startable plugins\n\n¢ Used to listen for incoming messages from\nexternal systems and processes them\nasynchronously\n\n--- ch11/lesson-10/slide-06.png ---\nRecommended plugin source code options Gi\n\nen « \"Nava plugin J\n\nUse Guidewire Studio ¢ IntelliJ IDEAwith OSGi « Third party IDE\nEditor\n\n« Native access to ¢ Needs ALL Guidewire\napplication API * Access to Guidewire JARs\n¢ Native debugging within application API ¢ No inspection support\nGuidewire Studio ¢ Easily add third party for Guidewire Internal\nlibraries API\n¢ Easy deployment ¢ Require special\n\ndeployment\n\n--- ch11/lesson-10/slide-07.png ---\n| Use case\n\n¢ Create an exchange rate set that\n\nincludes one exchange rate for\n\nevery typekey currency\n\nay\n\nExchangeRate\nPlugin\n\n<—__——\n\n0.769\n\n€ mm S\n\nGi\n\n1.\n2.\n\n3.\n\nDetermine plugin requirements\n\nWrite plugin class (implement the\ninterface) in Guidewire Studio\n\nRegister the plugin by creating or\nmodifying the appropriate plugin\nregistry entry\n\n4. Deploy the changes\n\n--- ch11/lesson-10/slide-08.png ---\nPlugin configuration\n\n--- ch11/lesson-10/slide-09.png ---\n| Determine Gosu plugin requirements Gi\n\n¢ What interface(s) must the plugin implement? Predefined Plugins\n« IExchangeRateSetPlugin Display instructions\n¢ What methods are included in the interface(s)? Aendicangeeane\n* createExchangeRateSet =\nRetrieved On Base Currency Price Currency Rate\n« When are the methods called? Nodataro display\n\n* By clicking on the Invoke ExchangeRateSet Plugin button\nin the Ul\n\n* Administration > Training: Plugins > Predefined Plugins\n\n¢ What issues should you consider when implementing\nthe plugin?\n\n« External system must be online\n\n--- ch11/lesson-10/slide-10.png ---\n| Plugin class Gi\n\n* Create the package and Gosu class that will implement the plugin\n« Use a package naming convention recommendation\n* gsrc.<company_ code>.<app_code>.plugin.<functional_area>\n\n¢ Use plugin naming convention recommendation\n\nv Wigsre\n\n* <meaningful_name><interface_implemented> > com.guidewire.pl.docexamples\n+ TrnlExchangeRateSetPlugin is a predefined plugin 4 demo.ta\n\n> gw\n\n> libraries\n\n> sita\n\n> trainingapp\n\nv trn.ta\n\nplugin.exchangerate\n\n© TrlExchangeRateSetPlugin\n\n--- ch11/lesson-10/slide-11.png ---\n| Implement required interface(s)\n\n¢ Implement the interface\n¢« ALT+ENTER to implement methods\n\n¢ Every public method from the interface must exist\n\n+ Some methods can be left as stubs that do nothing\n\n© Trnl€xchangeRateSetPlugin.gs * |\n\n® Implement methods\n\n@ Make ‘TmnlExchangeRateSetPlugin' abstract\n\nDP Annotate interface ‘lExchangeRateSetPlugin’ as @Deprecated >\n\npackage trn.ta.plugin.exchangerate\n\nclass Tr\n\noverride function createExchangeRateSet ()\nreturn null\n\nuses gw.plugin.exchangerate. IExchangeRateSetPlugin\n\nngeRa gin implements IExchangeRateSetPlugin{\n\n: ExchangeRateSet {\n\nLF; Select Methods to Implement\n\nC1 Copy JavaDoc\n\n© insert @Qverride\n\nen\n\nCancel\n\n--- ch11/lesson-10/slide-12.png ---\n| Create the plugin registry file (if necessary) Gi\n\n¢ Ifthe plugin definition does not exist, then create a new plugin registry file under\nconfiguration.config.Plugins.registry\n\nY Db Plugins 1\nY Dibregistry New Ph\n@ AuthenticationServicePlugin.gwp US\n* Specify the name and interface\n\nGi Plugin x GiPugin x\nName: | ExchangeRateSetPlugin) Name: __[ExchangeRateSetPlugin\nIntetoce - Baars Inetace: xchongeRateSetugin | [=\n\ncad Search by Nome [BER cues\n\nNo matches found in project.\nTExchangeRateSetPlugin\n\n--- ch11/lesson-10/slide-13.png ---\n| Configure the plugin registry file Gi\n\n¢ In many cases, the plugin definition already exists in the project\n¢ Plugin editor options\n\n1. Add plugin type\n\n2. Specify the plugin class\n\n3. Disable the plugin\n\n4. Define plugin 1B lExchangeRateSetPlugin.gwp\nparameters ‘Name: |lExchangeRateSetPlugin\n\nInterface: |lExchangeRateSetPlugin\n\n= Gosu Class: _trn.ta.plugin.exchangerate.TrnlExchangeRateSetPlugin\nFRY AE TM ngerate.TrniExchangeRateSetPlugin]\n\nEnvironment:\n‘Add Java Plugin\n\n‘Add OSGi Plugin seve:\nDisabled\n\nParameters: Name Value | Environment | Server | +.\n\n--- ch11/lesson-10/slide-14.png ---\nPlugin parameters\n\n--- ch11/lesson-10/slide-15.png ---\n| Plugin parameters\n\nParameters:\n\nName value Environment Server\npassword low QA ‘TestServer\nusername lsu Prod |Prodserver\npassword \\6mzi)x_h4+=HyzoG Prod [ProdServer\n\nSpecify values at the registry level that can be passed to a plugin class during initialization\n\n+ Name and Value String fields are required\n\n+ Environment and Server fields are optional\n\nUseful for varying plugin behavior without changing the plugin code itself\n\nExample:\n\n* Testing environment compared to a production environment\n\nPlugin class must implement InitializablePlugin interface and\n\nset Parameters property\n\n--- ch11/lesson-10/slide-16.png ---\n| Using plugin parameters Gi\n\n¢ Add the parameters in the plugin registry\n\n¢ Reference the parameters in the plugin class\n\npackage trn.ta.plugin.exchangerate\nGosu Class: _agin.exchangerate.TmlExchangeRateSetPlugin\n\nEnvi uses gv.plugin.InitializablePlugin\nSTIS uses gw.plugin.exchangerate. IExchangeRateSetPlugin\nServer:\n—> class TrnlExchangeRateSetPlugin implenents IExchangeRateSetPlugin, InitielizeblePlugin{\n1 Disabled : *\n= 2 svate static var USERNAME = \"username\"\nParameters: | Name | Value [Environment Server bar\n\nprivate static var username : String\n= a private static final var PASSWORD = \"password\"\n\npassword gw private static var _passvord : String\n@1 © override function createExchangeRateset() : ExchangeRateset (...)\n@1 > override property set Parameters (parameters : MapcObject, Object>) {\n\nusername = parameters.get (USERNAME) as String\n“passvord = parameters.get (PASSWORD) as String\n)\n\n--- ch11/lesson-10/slide-17.png ---\n| Deploy code changes\n\n¢ New Gosu plugin class\n\n¢« Newor modified plugin registry file\n\nGta Tools VCS Window Help\n\nD> Run ‘Server’ Shift+F10\nYE Run ‘Server’ with Coverage\n\nD Run... Alt+Shift+F10\nWE Debug... Alt+Shift+F9\n\\y Attach to Local Process...\n\n[2 Edit Configurations...\n\nBl import Test Results >\nHl Stop ‘Server’ Ctrl+F2\n\nTools VCS Window Help\nD> Run ‘Server’\n\n& Debug ‘Server\n\nWE Run ‘Server’ with Coverage\n\nD> Run...\n\nW Debus...\n\niy Attach to Local Process...\n\n[> Edit Configurations...\n\n] Import Test Results\n\nI Stop ‘Server’\n\nEP show Running List\n\nSto\n\nGi\n\n¢ Modified Gosu plugin class\n\n--- ch11/lesson-10/slide-18.png ---\n| Demonstration G\nConfiguring a plugin with parameters\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-10/slide-20.png ---\nQuestion G\n\n_— — (dentify if each statements true or false.\n\n¢\now A) Plugins implement methods that are called by internal code.\n\nB) Plugins must be written in Gosu.\n\nC) Aplugin class must contain a predetermined set of methods based on the\nbusiness need it serves.\n\nD) Plugins are used exclusively for external application integration.\n\nSe Soe Se sees esse ese\n\n--- ch11/lesson-10/slide-21.png ---\nAnswer\n\n_— — |dentify if each statements true or false.\n\nY\n, A\nB\nCc\n\nwere\n\nD\n\nz=\n\ng\n\nCc)\nD\n\nz=\n\n&\n\nPlugins implement methods that are called by internal code.\nPlugins must be written in Gosu.\n\nA plugin class must contain a predetermined set of methods based on the\nbusiness need it serves.\n\nPlugins are used exclusively for external application integration.\nTrue\n\nFalse — Guidewire recommends that they be written in Gosu, but they can be\nwritten in OSGi or Java.\n\nTrue\n\nFalse — They are also used to execute tasks exclusively within the Guidewire\napplication.\n\n--- ch11/lesson-10/slide-22.png ---\nQuestion\n\nan What is the purpose of a plugin registry entry?\n¢\n4\n\nSe Soe Se sees esse ese\n\n--- ch11/lesson-10/slide-23.png ---\nAnswer\n\nae What is the purpose of a plugin registry entry?\n\n¢\n4\n\nThe plugin registry entry identifies the plugin class to use for a given set of internally\ncalled methods and initialization parameters that may be used to affect the plugin's\nbehavior.\n\nSoo eS oe ese Sse ese\n\n--- ch11/lesson-10/slide-24.png ---\nQuestion\n\n,- — Doyou need to restart the server when you:\n¢\n\now A) Modify code in an existing Gosu plugin?\n\nB) Modify a plugin registry entry?\n\nSe Soe Se sees esse ese\n\n--- ch11/lesson-10/slide-25.png ---\nAnswer Gi\n\n_- — Doyou need to restart the server when you:\n\n¢\n“ A\nB\n\nModify code in an existing Gosu plugin?\n\nModify a plugin registry entry?\n\nA) No, you do not to restart the server when you make changes to a Gosu plugin\nclass. However, you need to execute Reload Changed Classes.\n\nB) Yes, you need to restart the server when modifying a plugin registry entry because\nplugin registry entries are initialized only during the server application start-up.\n\nSoo eS oe ese Sse ese\n\n--- ch11/lesson-10/slide-26.png ---\nLesson\nobjectives ¢ Describe the basic functionality of Guidewire\nreview plugins\n\n¢ Configure plugins in Gosu\n* Configure plugin parameters\n¢ Register and deploy plugins\n\n--- ch11/lesson-10/slide-27.png ---\n| Student exercise\n\nCreate an exchange rate plugin\n\n--- ch11/lesson-11/slide-01.png ---\nMessaging Architecture\n\n--- ch11/lesson-11/slide-02.png ---\nLesson\nobjectives\n\n¢ Understand the concept of Guidewire\n\nmessaging\n\nIdentify the basic components of Guidewire\nmessaging\n\nDescribe the basic stages of Guidewire\nmessaging\n\nUnderstand how to use message\nadministration screens\n\n--- ch11/lesson-11/slide-03.png ---\nMessaging stages\n\n--- ch11/lesson-11/slide-04.png ---\n| What is Guidewire messaging Gl\n\ni Triggering -M# i\n\ni [= eSEaGe sesue| | > message payloai ;\n\n: Acknowledging :\n\nH (1T] ———*sssouesaina y 1- i +\n\n! Guidewire Guidewire \\v] i\n\n! Application Database : System\n\n* Guidewire messaging is an asynchronous integration mechanism:\n+ Event Based model\n+ Predefined and custom events raised by new or changed business data\n+ Part of the User transaction\n\n+ Events are evaluated and processed in the Event Fired ruleset\n\n+ Message is created and persisted in the Guidewire database\n\n+ Messages are sent from a Guidewire application to an External system\n\n+ An External system acknowledges receipt and processing of the message (either positively or negatively)\n\n--- ch11/lesson-11/slide-05.png ---\n| The messaging stages\n\n2) Creating a message\nand payload\n\n1. Triggering a message\n\n+ Newly created or modified entity\ntriggers message creation\n\n2. Creating a message and payload\n\n+ Application creates message and the\npayload and stores in message table\n\n3. Transform the payload\n* Optional\n\n() payload (3 iy to an external system\nGY = |\n\n3) Transform the 4) Sending the payload\n\n5) Processing Sa\nacknowledgment (y) H\n4. Sending the payload to an external\nsystem\n\n+ Application checks message table for\nmessages to process and sends payload\n\n5. Processing acknowledgment\n\n+ External system acknowledges success\nor reports an error\n\n+ Application processes the received\nresponse\n\n--- ch11/lesson-11/slide-06.png ---\n| Use case — Bank account verification\n\nPersoninfo | Phone&Addresses | Bank Accounts\na:\nBankName > Routing Number Account Number © Account Type > Verified? > Createdon >\nSucceed Credit Union 123-456 1234567890 Checking Pending) 08/22/2018\nSucceed Credit Union 123-456 0987654321 Savings Pending —_| 08/22/2018\n=:\nBankName Routing Number 2 Account Number S Account Type verified? > Createdon >\nSucceed Credit Union 123-456 1234567890 Savings Verified 08/22/2018\nSucceed Credit Union 123-456 0987654321 Checking Verified 08/22/2018\n\n« Messaging process verifies bank account details\n\n* Bank name, routing number, and account number\n\n« New and modified accounts\n\n¢ Verified? field shows messaging acknowledgment status\n\ne Pending. Verified or Invalid\n\n--- ch11/lesson-11/slide-07.png ---\n| Use case — Bank account verification\n\nPersoninfo | Phone&Addresses | Bank Accounts\na:\nBankName > Routing Number Account Number © Account Type > Verified? > Createdon >\nSucceed Credit Union 123-456 1234567890 Checking Pending) 08/22/2018\nSucceed Credit Union 123-456 0987654321 Savings Pending —_| 08/22/2018\n=:\nBankName Routing Number 2 Account Number S Account Type verified? > Createdon >\nSucceed Credit Union 123-456 1234567890 Savings Verified 08/22/2018\nSucceed Credit Union 123-456 0987654321 Checking Verified 08/22/2018\n\n« Messaging process verifies bank account details\n\n* Bank name, routing number, and account number\n\n« New and modified accounts\n\n¢ Verified? field shows messaging acknowledgment status\n\ne Pending. Verified or Invalid\n\n--- ch11/lesson-11/slide-08.png ---\n| Use case — Bank account verification\n\nPersoninfo | Phone&Addresses | Bank Accounts\na:\nBankName > Routing Number Account Number © Account Type > Verified? > Createdon >\nSucceed Credit Union 123-456 1234567890 Checking Pending) 08/22/2018\nSucceed Credit Union 123-456 0987654321 Savings Pending —_| 08/22/2018\n=:\nBankName Routing Number 2 Account Number S Account Type verified? > Createdon >\nSucceed Credit Union 123-456 1234567890 Savings Verified 08/22/2018\nSucceed Credit Union 123-456 0987654321 Checking Verified 08/22/2018\n\n« Messaging process verifies bank account details\n\n* Bank name, routing number, and account number\n\n« New and modified accounts\n\n¢ Verified? field shows messaging acknowledgment status\n\ne Pending. Verified or Invalid\n\n--- ch11/lesson-11/slide-09.png ---\nStage 1 — Triggering a message\n\n(Continued)\n\n| Person Info | Phone & Addresses | Bank Accounts\n\n«\n\nid\n\nEntity event\nFatty event\n\nEventAware\nEntity\n\na) Gi\n\nDestination\n\no\nBankName © RoutingNumber © AccountNumber  AccountType © Verified? © CreatedOn >\nSucceed Credit Union 123-456 1234567890 ‘Checking Pending 08/22/2018\nSucceed Credit Union 123-456 0987654321 Savings Pending 08/22/2018\n\n* Console output details\n* Messaging Destination ID is 13\n« EventAware entity is BankAccount\n¢ Event is BankAccountChanged\n\n*** Stage 1 -- Triggering the message ***\nEvent Fired rule set: BAEF1000 - Bank Account Verification\nMessaging Destination ID is 13\nEvent Fired rules: BAEF1100 - Bank Account\nEventAware entity is BankAccount\nEvent Fired rules: BAEF1110 - Added Changed\nEvent is BankAccountChanged\n\n--- ch11/lesson-11/slide-10.png ---\n| Stage 2 — Creating a message and payload Gl\nEvent Fired Message Payload\n\n* Event Fired rule set Rules\n\n* Called for each destination-subscribed 4 ,\nmessaging event\n\n* Generates a new message and payload\n\n*** Stage 2 -- Creating the message ***\nEvent Fired rules: BAEF1111 - Field Changed\n* Message payload Sending payload to console:\n\ncontact, ab: 20625\n\n« Formatted string, such as text, XML or JSON banillane, Succeed Savings and Loan\n\nroutingNumber, 123-456\n* Message database table tcoometype eavinge,\n\nage0iMessage, <@@ageOfMessageInSeconds@@>\n\n* Hub of messaging infrastructure that provides persistent\nstorage for messages with the following status:\n\n+ Unsent (new)\n+ Sent and awaiting acknowledgement (pending)\n\n« Retryable Error (errored)\n\n--- ch11/lesson-11/slide-11.png ---\n| Stage 3 — Transform the payload Gi\n\n¢ Destination-specific messaging plugins\n\nprocess the outbound request Transformed :\n\npayload i\nmessages >) AG 7 PA.\n« Request plugin ¥ E onal\n. . estination\n* Optional payload transformation Request System\nPlugin\n*#* Stage 3 -- Optionally transform the message payload *** ean aeeneanensceneassnsceeanscssenssnsosasasenscese® .\n\nRequest plugin: BankAccountVerificationRequest -- beforeSend()\nSending transformed payload to console:\n\ncontact, ab: 20685\n\nbankilame, Succeed Savings and Loan\n\nroutingNumber, 123-456\n\naccountNumber, 45671234\n\naccountType, savings\n\nageOfMessage, 13\n\nsenderRefID, ab:1203\n\n--- ch11/lesson-11/slide-12.png ---\n| Stage 4 -— Sending message to an external system\n\n¢ Destination-specific messaging plugins .\nprocess the outbound request\nmessages\n\n* Transport plugin\n\n+ Sends the payload to the external system\n\n*#* Stage 4 -- Sending the message ***\nTransport plugin: BankAccountVerificationTransport -- send()\nThe Request Plugin transformed the payload\nSending transformed payload to console:\n\ncontact, ab: 20685\n\nbankllame, Succeed Savings and Loan\n\nroutinglunber, 123-456\n\naccountifumber, 45671234\n\naccount Type, savings\n\nageOiMessage, 4\n\nsenderRefID, ab:1207\n\nPayload\n\n+ Either original payload or transformed payload : i\n\nrrancport\nPlugin\n\nSystem\n\n--- ch11/lesson-11/slide-13.png ---\n| Stage 5 — Processing acknowledgement Gi\n\n+ External system Fa : *\n+ Receives sent message : (i i\nResponse! Le H\n* Sends back a response M i 1 fugin :\n: : ; i >) ransport Plugin H\n* Guidewire application receives — > ¥ :\na reply message eli i Destination (p) H\n+ Processed by Transport plugin (synchronous) H l i\ni Reply Plugin :\n\n+ Processed by Reply plugin or API (asynchronous %, epiymugin\n\n*** Stage S -- Message acknowledgement ***\n\nTransport plugin: BankAccountVerificationTransport -- send()\nMessage acknowledged synchronously\n\nVerification status for IsVerified field is Verified\n\n* Response determines the\n\nVerified? field value o—ieeniee eee tose swing vot\n. Verified or Invalid Ser a ce eS Cea\n\n--- ch11/lesson-11/slide-14.png ---\n| Guidewire servers and messaging transactions Gi\nA\n\ni Application Context )) Integration Context\n\nEvent triggering & : Sending message &\nPy ») Message generation . Payload Process synchronous\n(event fired rules) Message transformation acknowledgment (transport\n(request plugin) plugin)\n\nG transaction 2 transaction 3 c\n=\n\nProcess asynchronous\nacknowledgement\n(reply plugin or API)\n\n* Messaging is managed in multiple contexts\n\n+ The application context processes message creation (on server(s) with the “ui” role)\n+ All other work is done in the integration context (on server(s) with the “messaging” role)\n\n¢ Messaging occurs across multiple transactions\n\ngg in than npiirrant trancantinn te rnllind hanb\n\n--- ch11/lesson-11/slide-15.png ---\n| Message plugin interfaces\n\npackage gw.plugin.messaging; A\n\nil\n\npublic interface MessagePlugin extends InternalPlugin {\nlvoid shutdown ();\n\nvoid suspend ();\n\nvoid resume() throws InitializationException;\n\nvoid setDestinationID(int varl);\n\ngi oi\nString beforeSend(Message varl) throws Exception;\n\ng:\n\nlic interface MessageAfterSend extends MessagePlugin {\nvoid afterSend (Message varl) throws Exception;\n\npublic interface MessageRequest extends MessageAfterSend, MessageBeforeSend {\n}\npublic interface MessageTransport extends MessagePlugin {\n\nvoid send(Message varl, String var2) throws Exception;\n\n}\n\npublic interface MessageReply extends MessagePlugin {\nvoid initTools(PluginCallbackHandler varl, MessageFinder var2) ;\n\n--- ch11/lesson-11/slide-16.png ---\nMessage administration\n\n--- ch11/lesson-11/slide-17.png ---\n| Training: Messaging\n\n* Available only in the TrainingApp application Training: Messaging\n¢ Administration tab > Training: Messaging © Message Table\n* Message Table © MessageHistory Table\n\n* Shows pending send (unsent), pending acknowledgement © Message Generator\n(sent), and Retryable error (errored messages)\n\n¢ MessagehHistory Table\n\n© Safe Ordering\n\n* Shows acknowledged, duplicate, or errored messages\n\n© Message Acknowledgement\n\n« Message Administration © Message Administration\n\n« Acopy of the Message Queues screen found in all\nInsuranceSuite applications\n\n--- ch11/lesson-11/slide-18.png ---\n| Training: Messaging — Demo screens Gi\n\n* Each demo screen has a Display\ninstructions link\n\nMessage Generator\n\nDisplay instructions\n\n* Message Generator\n\n* Creates a new message for a given\nmessage reference ID\n\nNew Message Generator\n\nName | MsgGen:25\n\nCreate and Send Only\nCreate, Send, and Acknowledge\n\n* Message Exception\n\n+ Throws an exception for a given\nmessage reference ID\n\n* Message Acknowledgment\n+ Simulates message acknowledgment from an external system for a given message reference ID\n\nSafe Ordering\n\n+ Lets you send multiple messages for the same entity for safe-order and non-safe-order entity\n\n--- ch11/lesson-11/slide-19.png ---\n| Message Queues\n\n¢ Aseries of drilldown\nscreens for message\nadministration\n\n¢ Administration tab\n\n« Monitoring > Message\nQueues, or\n« Training: Messaging >\nMessage Administration\n* Suspend, resume, and\nview messages for each\ndestination\n\nUtilities\n\nTraining: Plugins\n\nTraining: M\n\nTable\n\nHistory Table\n\nMessage Queues\n\nDestination\n\nBank Account Verification\nVendor Recommendation\n\nLegal Case Report\n\nSafe Ordering Demo\n\nMessage Generator\n\nFraud Check\n\nEmail\n\nPolicyCenter Contact Broadcast\nClaimCenter Contact Broadcast\n\nBillingCenter Contact Broadcast\n\nGi\n\nRestart Messaging Engine [iM:=]d\n\nStatus\nStarted\nStarted\nStarted\nStarted\nStarted\nStarted\nStarted\nStarted\nStarted\nStarted\n\n--- ch11/lesson-11/slide-20.png ---\n| Demonstration G\nMessage administration\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-11/slide-22.png ---\nQuestion\n\n_- — Whatare the five stages of Guidewire messaging?\n\n¢\n¢\n¢\n\nSeo e Soe esses see see\n\n--- ch11/lesson-11/slide-23.png ---\nAnswer Gi\n\n_- — Whatare the five stages of Guidewire messaging?\n\n¢\n¢\n¢\n\nTriggering a message.\nCreating a message and payload.\nOptionally transform the payload.\n\nSending the message to an external system.\n\nSoo eS eee soe ese ese\n\naro N >\n\nProcessing message acknowledgment.\n\n--- ch11/lesson-11/slide-24.png ---\nQuestion\n\n_- — Whatare the three possible statuses for messages that are in the\n\nPa message table?\n¢\n\nSeo e Soe esses see see\n\n--- ch11/lesson-11/slide-25.png ---\nAnswer\n\n_— — Whatare the three possible statuses for messages that are in the\n\nPa message table?\n¢\n\n1. Pending send.\n2. Pending acknowledged (sent but no acknowledgement received).\n\n3. Retryable error (sent and an error reported by external system, a negative\nacknowledgement or NACk).\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-11/slide-26.png ---\nQuestion\n\n_~ — Fora Guidewire implementation using clustering, what two server roles\nPa execute the work for messaging? What work is done by each server\n: role?\n\nSeo e Soe esses see see\n\nGi\n\n--- ch11/lesson-11/slide-27.png ---\nAnswer\n\n_- — Fora Guidewire implementation using clustering, what two server roles\nPa execute the work for messaging? What work is done by each server\n: role?\n\nThe two clustering server roles are: the ui role and the messaging role.\n\nSoo eS eee soe ese ese\n\nGi\n\n--- ch11/lesson-11/slide-28.png ---\nLesson\nobjectives\nreview\n\n¢ Understand the concept of Guidewire\n\nmessaging\n\nIdentify the basic components of Guidewire\nmessaging\n\nDescribe the basic stages of Guidewire\nmessaging\n\nUnderstand how to use message\nadministration screens\n\n--- ch11/lesson-12/slide-01.png ---\nTriggering Messages\n\n--- ch11/lesson-12/slide-02.png ---\nLesson\nobjectives\n\n¢ Describe how event messages are triggered\n* Create destinations and configure required\nfields\n\n--- ch11/lesson-12/slide-03.png ---\n| Use case — Bank account verification Gi\n\n¢ Trigger a message when a bank 1\n\n. Configure the bank account entity\naccount is added or modified\n\nto trigger messages\n¢ Create an abstract representation of 2\n\nan external system to define the key Deploy code changes\nmessaging components ,\n\n. Create a messaging destination\n\n--- ch11/lesson-12/slide-04.png ---\n| Guidewire servers and messaging transactions Gi\n\nsonesvocccccccccccccccccecesscccccccessscsccsccsssessense: tp seersonnccnscessecnsenscesssreccssccessscccesccesssscseseee,\n\n: Application Context y Integration Context\n\ni Event triggering & ¥: Sending message &:\n( ») Message generation LJ Payload 7 Process synchronous External\niN (event fired rules) transformation acknowledgment :\n\nProcess asynchronous\n\nacknowledgement\n(reply plugin or API)\n\n¢ All activity from event triggering takes place in transaction 1\n* Messaging occurs across multiple transactions\n\n¢ If an exception is thrown, work in the current transaction is rolled back\n\n--- ch11/lesson-12/slide-05.png ---\nMessaging entities\n\n--- ch11/lesson-12/slide-06.png ---\n| EventAware entity\n\n« Amessaging event often occurs when\nadding, changing, or removing an instance\nof an EventAware entity\n\n¢ An EventAware entity delegates to\nEventAware delegate\n\n* Configured by adding the events Element to the BankAccount (abx_bankaccount)\n\nentity\n\nImplements the default set of messaging events:\nAdded, Changed and Removed\n\nNaming convention\n\n+ <EventAwareEntityName><ChangeType>\n\n* Custom message events can be added\n\nExample: Custom BankAccountFlagged message\n\nar\n\nGi\n\nBB eankAccount.eti\n(se event v — [YVshowalv]) g = = AO\nElement. Primary Value Secondary Value\nY entity BankAccount Contact bank account\nimplementsEntity _Extractable\n\nBankAccountFlagged\n\n‘Custom BankAccountFlagged Event\n\n> Description\n\nAttributes: Editable’, Exportable”, Extendable”, Final”, Keyed”, Loadable”, Sourceable”\nMessaging Events: The application will generate these events for this entity:\n\n--- ch11/lesson-12/slide-07.png ---\n| Triggering custom message events Gi\n\nE’BankAccounteti\n\n|x event v — |VShowAlv) zB =F AO\nElement Primary Value Secondary Value\n\n© entity BankAccount Contact bank account\n\nimplementsEntity _Extractable\n\nevent BankAccountFlagged Custom BankAccountFlagged Event\n\n¢ Useful when messaging must be initiated by something that cannot be captured in\na standard (built-in) message event\n\n* Syntax\n\n* eventAwareEntityInstance.addEvent (\"CustomEventName\")\n* Only for EventAware entity\n\n+ Triggered manually in code\n\n*« Example: aBankAccount.addEvent (\"BankAccountFlagged\")\n\n--- ch11/lesson-12/slide-08.png ---\n| MessageContext entity\n\n¢ An internal, non-persistent, virtual\nentity\n\n* Only used in event fired rules\n¢ Important fields\n* DestID\n+ Identifies the subscribing destination\n+ EventName\n+ Identifies the name of the triggering event\n+ Root\n\n+ Can be used to reference data from the\ntriggering entity\n\nGi\n\nMessageContext (Virtual) (delegates to Versionable)\n> Description\n\nAttributes: Extendable’, Final’, Keyed’, Sourceable”\n\nShow user interface details on all fields\n\nFields | Arrays\n\nFields\nDestID Derived property returning int (virtual property)”\nEventName Derived property returning java.lang String (virtual property)”\n\nRoot Derived property returning java.lang.Object (virtual property)”\n\n+ Example: messageContext.Root typeis BankAccount\n\n--- ch11/lesson-12/slide-09.png ---\n| Message entity\n\nAn entity containing message details and payload to\nbe sent to an external system\n\nDestinationID\n\n+ Identifies the subscribing destination\n\nEventName\n\n+ Identifies the name of the triggering event\nMessageRoot\n\n+ ls a pointer to the triggering event-aware entity instance\nPayload\n\n+ Holds the information to communicate\n\nSenderReflD\n\n+ Is asender reference number typically set at message send time\nStatus\n\n+ Message status pending and errored messages\n\nGi\n\nMessage (ab_message) («\n> Description\n\nAttributes: Extendable”, Final”, Keyed”, Sourceable’\n> Concrete FK references:\n\n‘Show user interface details on all elds\n\n1s to KeyableBean)\n\nFields | Unique Keys for Message\n\nFields\n\nDestinationID inioo» (non-nul” (unique index)\n‘denies the destination to send this message to\n\n> Show user interface\n\nEventName varchar (255) (non-null\n[Name of the event\n> Show user interface details\n\nMessageRoot (\n\nPayload 10x: (10000\nContents ofthe messag\n\n(tual property)? (writable)\n\n(writable)\n\n> Show user interface details\n\nSenderRefID varchar (64) (ut)\nOptional sender reference set at message send time.\n\nStatus integer (roneah? (oiqueinden)\n‘Message status: 1-Pending send; 2-Pending ack; 3-Error; 4-Retryable error\n\n--- ch11/lesson-12/slide-10.png ---\n| MessageHistory entity Gi\n\n+ Anentity containing message history details Message story (ab_messagehistory) (delegates to KevableBean)\n« DestinationID pameies Erendatis Fa ikon ‘Sourceable\n\n+ Identifies the subscribing destination Fields |\n\n+ DuplicateCount\n\nFields\n. i DestinationID integer oon\nNumber of duplicate message acknowledgments Identifies the message destination to send this message to.\nDuplicateCount intexer einue 9)_ ronnw\n+ ErrorCategory ‘Number of duplicate errors received\n. ErrorCategory type key to\n+ Type of message processing error ‘Type of error if the message is in error.\nEventName archos (255) (ores)\n+ EventName Name of the event\n; oo SenderReflD varchar (64) (wate)\n* Identifies the name of the triggering event Optional sender reference set at message send time,\nStatus inioger  oreus\n* SenderRefiID Message status: 10-Acked; 11-Error cleared; 12-Error retried; 13-Skipped\n\n+ Is a sender reference number typically set at message send time\n+ Status\n\ne Meccane ctatiic for acknowledaed ckinned or errored meccanec\n\n--- ch11/lesson-12/slide-12.png ---\nDestination\n(=) Gi\n\nExternal System ( td\n\n() Entity Event ~. Request Plugin (Hp\n\nEventAware gy “F\nEntity (a) Transport Plugin\nDestination iP)\n\nReply Plugin\n« Amessaging destination is an abstraction of an external system\n\n* Subscribes to message events of interest\n\n* Defines list of message plugins used in processing outbound request messages and received\ninbound replies\n\n¢ Defines connectivity, retryable error parameters, predictable message ordering, multithreading,\nand distributed actions\n\n--- ch11/lesson-12/slide-13.png ---\n| Destination message events\n\nys >) Gi\n\n(3),\n_— BankAccountAdded yN\n\nBankAccountChanged Destination 13\n\nBankAccountChanged ® ra)\n-¢ Destination 14\n\nBankAccount\n2637 ActivityAdded >)\nSY ActivityChanged +\nDestination 15\n* Messaging destination subscribes to one or more specific message events\n¢« When a message event occurs:\n* One MessageContext instance is created for each destination that listens to that event\n\n« Each MessageContext object is then processed by the event fired business rules\n\n--- ch11/lesson-12/slide-14.png ---\n| Defining a message destination\n\n¢ Destinations are defined in the\nmessaging-config.xml file\n\n¢ Under configuration.config.Messaging\n¢ To create a new destination, click the\nplus symbol and define the required\nfields\n¢ ID: unique ID value from 0 to 63\n\n« Name: unique name displayed in the Ul\nmessaging administration screen\n\n¢ Transport Plugin: sends message to\nexternal system(s)\n\n+ Discussed in Sending Messages lesson\n\ne EFvante: cithecrihad meaeceaninga avente\n\nsh messaging-configam!\n\nDefault Server:\n\nMessaging Config: [Default\n\n@-\n\nEnvironment:\nName:\nServer:\n\nTransport Plugin:\n\nEvents:\n\n3 S) O Disable destination\nBank Account Verification\nHost Name: ¥\n\nBankAccountVerificationTransport\n\n=\nName\n\nBankAccountAdded\nBankAccountChanged\n\n--- ch11/lesson-12/slide-15.png ---\n| Other messaging destination parameters Gi\n\n* Optional Plugins hs Sd Pages\n\n« Request plugin is discussed in the Message\nPayload Transformation lesson\n\nConnectivity and\nError Parameters\n\n¢ Reply plugin is discussed in the\nAsynchronous Message Acknowledgements\nlesson\n\n2 =\n\nstrict Mode\n\nrimary\n\n* Connectivity and error parameters\n\n¢ Discussed in the Sending Messages lesson MAREE Distribute Request Processing |\n\n‘Always Call Before Send:\n\n* Message Without Primary Bele Sen Pin\n* Discussed in the Sending Messages lesson\n¢ Distribute Request Processing\n\n¢ Discussed in the Master’s Subscription and\n\nnAnniimantatinn\n\n--- ch11/lesson-12/slide-16.png ---\n| Deploy code changes\nRestart Server\n\n¢ Any new or modified destinations\n\n« Read only at server startup\n\nGt Tools VCS Window Help\n\nD> Run ‘Server’ Shift+F10\nYE Run ‘Server’ with Coverage\n\nD Run... Alt+Shift+F10\nWE Debug... Alt+Shift+F9\n\\y Attach to Local Process...\n\n[PP Edit Configurations...\n\nBl import Test Results >\nI Stop ‘Server’ Ctrl+F2\n\n--- ch11/lesson-12/slide-17.png ---\n| Demonstration G\n\nExamine an event aware entity and\n— destination\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-12/slide-19.png ---\nQuestion\n\n,- — When does a message event get triggered?\n\n7\n¢\n4\n\nSe Soe Se sees esse ese\n\n--- ch11/lesson-12/slide-20.png ---\nAnswer\n\n,- — When does a message event get triggered?\n\n¢\n¢\n4\n\nTypically, a message event gets triggered when an event-aware entity is created,\nchanged, or removed.\n\nSoo eS oe ese Sse ese\n\n--- ch11/lesson-12/slide-21.png ---\nQuestion\n\nan What is the primary purpose of the MessageContext entity?\n¢\n4\n\nSe Soe Se sees esse ese\n\n--- ch11/lesson-12/slide-22.png ---\nAnswer\n\nae What is the primary purpose of the MessageContext entity?\n\n¢\n4\n\nThe primary purpose of the MessageContext entity is to create messages using\ninformation from the message event and the triggering entity.\n\nSoo eS oe ese Sse ese\n\n--- ch11/lesson-12/slide-23.png ---\nQuestion\n\n_ _ AGuidewire application has seven destinations and an event-aware\n7’ entity called Escalation.\n\ny 4 A) When an Escalation is created, what is the maximum number of\n\nMessageContexts that might get created?\n\nB) What is the minimum?\n\nSe Soe Se sees esse ese\n\n--- ch11/lesson-12/slide-24.png ---\nAnswer Gi\n\n_ _ AGuidewire application has seven destinations and an event-aware\n7 entity called Escalation.\n\ny A) When an Escalation is created, what is the maximum number of\nMessageContexts that might get created?\n\nB) What is the minimum?\n\nA) Seven, which would occur if all seven destinations listen to EscalationAdded.\nB) Zero, which would occur if none of the destinations listen to EscalationAdded.\n\nSoo eS oe ese Sse ese\n\n--- ch11/lesson-12/slide-25.png ---\nQuestion G\n\nan What plugin is required for every destination? What does this plugin do?\n\n¢\n4\n\nSe Soe Se sees esse ese\n\n--- ch11/lesson-12/slide-26.png ---\nAnswer Gi\n\nae What plugin is required for every destination? What does this plugin do?\n\n¢\n4\n\nMessageTransport, which sends the message to the external system.\n\nSoo eS oe ese Sse ese\n\n--- ch11/lesson-12/slide-27.png ---\nLesson\nobjectives ¢ Describe how event messages are triggered\n\nreview * Create destinations and configure required\nfields\n\n--- ch11/lesson-12/slide-28.png ---\n| Student exercise\n\nConfigure an event aware entity and\ndestination\n\n--- ch11/lesson-13/slide-01.png ---\nCreating Messages\n\n--- ch11/lesson-13/slide-02.png ---\nLesson\nobjectives\n\n¢ Create messages in Event Fired rules\n¢ Describe the role that message payloads play\nin messaging\n\n--- ch11/lesson-13/slide-03.png ---\nUse case\n\n* Create a message when a bank\naccount is added or modified\n\n¢ Ifthe bank account type is savings,\nthe string message payload must\nhave a placeholder field called\nageOfMessagelnSeconds that will\nbe calculated and replaced later\n\n* Generate XML message payload for\nother bank account types\n\nGi\nDesign approach\n\n1. Create Event Fired rules\n2. Create payload mechanism\n\n3. Deploy changes\n\n--- ch11/lesson-13/slide-04.png ---\n| Guidewire servers and messaging transactions\n\njotneeaneneeneeeeeeseeeeeseseeseeeseeeeeeseeeeseseeeeees prteeeeeeeeneenseeeeeeeeeseesseeeeessesessesseeeeeeseesesseeseseesers\nH Application Context > Integration Context\n: Event triggering & ¥ Sending message &\nMessage generation . Payload Process synchronous\ne ») (event fired rules) Message Transformation acknowledgment (transport\n(request plugin) plugin)\n\nG transaction 2 transaction 3\n\nProcess asynchronous\nacknowledgement\n(reply plugin or API)\n\n¢ All activity from message generation takes place in transaction 1\n¢ Messaging occurs across multiple transactions\n\n¢ If an exception is thrown, work in the current transaction is rolled back\n\n: External\n\n: System\n\n—\n\n--- ch11/lesson-13/slide-05.png ---\nEvent Fired rules\n\n--- ch11/lesson-13/slide-06.png ---\n| Guidewire business rules Gi\n\n¢ Abusiness rule written in Gosu accomplishes some task for a Melbolest : Onsale\ngiven entity Vee senees\nwe we > CO eEntity Names\n* Three base types of rule set categories in TrainingApp > EY Bitensions\n\n> [2 Localizations\n\n> Messaging\n\n> DY Metadata\n\n> [&lPage Configuration\n> PW Plugin:\n\n+ EventMessage\n\n+ One rule set called EventFired\n\n+ Root entity is MessageContext\n\n+ Rules execute when an integration event is triggered\n\n‘#) EventFired\n‘VD Preupdate\n« Preupdate #8) aBcontactContactPreupdate\n#) ABContactPreupdate\n+ Four rule sets #) AddressPreupdate\n*#) PendingContactChangePreupdate\n+ Rules execute when an update has occurred on a root entity ¥ Voldston oS\nwage @) ABContactValidationRules\n\n+ Validation ) ContactValidationRules\n\n+ Fourrule sets @) PersonValidationRules\n\n#) RegionValidationRules\n+ Rules check for missing information or invalid data on a root entity\n\n--- ch11/lesson-13/slide-07.png ---\n| Rule set execution Gi\n\n: TE Project = + © | H- It | €) EventFired.\n* Rule execution follows ee Tt\n. . . “configuration C:\\GW10\\Trainin J ad Event Fired)\nthe order listed in Studio v Creonfig > @) © ABEF1000 - Vendor Recommendation\n> (QD Entity Names & @) D aser2000 - Fraud Check\n¢ Per node, rules execute > DY Extensions v @) © BAEF1000 - Bank Account Verification\nina hierarchy > [YP Localizations Sore BAEF1100 - Bank Account\n> > Messagi ~~ @) H Bacr1110 - Added Changed\n* Rule condition code > Ease Se ee falc anaes\n> (page Configuration a a LREF1000 - Legal Case Report\nresolves to true or false > pW Plugins G , 3 z a MesageGeenter\n+ When condition is true © CB Rate Sets > BS Poticycenter\nf Sti di i\" vil EventMessage > BA ciaimcenter\nrule action code executes, > B) D Billingcenter\n\nand\n* Child rules execute (if any)\n\n--- ch11/lesson-13/slide-08.png ---\n| Rule set editor\n\nRule Hierarchy\n\nlv CF Event Fired\n> @) © ABer1000 - Vendor Recommendation|\n‘ABEF2000 - Fraud Check\n\n© BAEFII10 - Added Changed\n\n®) © Baeriitt - Field Changed|\nREFI000 - Legal Case Report\n\\GEF1000 - MessageGenerator\n\n¢ Rule Hierarchy\n* Context menu\n* Activate/Deactivate checkbox\n¢ Drag-and-drop ordering\n\nRule Editor\n\nACTION (messageContext : entity.MessageContext, actions : gv.rules.Action) :\nprint(\"\\n### Stage 1 -- Triggering the message ***\")\n\"-Bvent Pired rule set: \" + actions.Rule.Displaytiame )\n\nDestination ID is \" + messageContext.DestID)\n\n¢ Rule Editor\n\n* Overlays segment Uses, Condition, and\nAction\n\n« IMPORTANT\n\n* Do NOT delete the return keyword in\nrule condition\n\n--- ch11/lesson-13/slide-09.png ---\n| Event Fired rule set Gi\n\nCreates message and payload\nThe payload typically:\n* Contains static and/or dynamically generated data\n\n+ Is formatted based on the needs of the e:\n\nray H Event :\n\\ i Fired :\nF vesination Rules i\nMessage H\ntuent payload :\nEvent rN »), —\n\no ¢ B\n\nEventAware MessageContext Message\nEntity Entitv Entitv.\n\n--- ch11/lesson-13/slide-10.png ---\n| Common options for generating message payloads [5\n\nES\n\nMessage\npayload\n\n¢ Gosu template\n¢ Formatted strings with entity data\n\n* XML modeler\n* Strongly typed XML with XSD validation\n* Supports object graph\n\na ad\n\n¢ Integration View Seheee\n+ JSON s\n\n* Strongly typed XML with XSD validation External\n\nView\n\n--- ch11/lesson-13/slide-11.png ---\n| Late binding in the payload G\n\nTEI Console | Debugger | | |S |\n***k Stage 3(a) -- Transforming the message payload with\nlate binding ***\n\n. co. . Message\nRequest plugin: BankAccountVerificationRequest —\n\npayload\nbeforeSend()\n\nMes 630\nReplaced token <@@ageOfMessageInSeconds@@> with value 3\n\nReturning payload string\n\nra i\n\nA late binding value is a message payload value that cannot be determined until\nright before the message is sent\n\n« Use placeholders (tokens) during payload generation in the Event Fired business rules action\nlogic (event-time)\n\nMessage Request plugin (send-time) may search for and replace such late binding\ntokens with the data values immediately before the message is sent out\n\n--- ch11/lesson-13/slide-12.png ---\n| Event Fired rule set hierarchy structure Gi\n\nvo\n\n>a\n\n>\n\na\n\nEver\n\n- CONDITION (nes:\nnt Fired coun\n\nABEF1000 - Vendor Recommendation return messageContext.DestID ==\n‘ABEF2000 - Fraud Check\n\nCONDITION (messageContext : entity.MessageContext):\n\niseeee8\n\nA\n@\nei\nyj\nA\n\n@) © Baerit10 - Added ‘Changed . -\n4) EZ] Baeri111- Field Changed = ____._,_.__\n\nLREF1000 - Legal Case Report nessageContext.Eventllane == \"BankAccountChanged”\n\nMGEF1000 - MessageGenerator\n\nSafe Ordering Demo CONDITION (messageContext : entity.MessageContext) :\n\nPolicyCenter return (messageContext.Root as BankAccount) .isFieldChanged(\"BankName\") or\n(meszageContext.Root as BankAccount) .ieFieldChanged (\"Routingtiumber\") oF\n(messageContext.Root as BankRccount) .isFieldChanged (\"Accountthmber\") oF\n\n(messageContext.Root as BankAccount) .isFieldChanged(\"AccountType\")\n\n* Create a rule hierarchy to filter MessageContext objects\n\n+ First, by destination ID...\n\n* Then, by root entity type...\n\n* Then, by event name...\n\n« Finally, by any other relevant logic, such as fields of interest changed\n\n--- ch11/lesson-13/slide-13.png ---\n| Creating a message from MessageContext Gi\n\nACTION (messageContext entity .MessageContext, actions : gw.rules.Action):\n\nmessageContext.Root as BankAccount\n\n—>: var aBankAccount\nvar msg : Message\n\nif (aBankAccount.AccountType == BankAccountType.TC_ SAVINGS) {\nvar payload = BankAccountDataTemplate. renderToString(aBankAccount.ABContact.PublicID, aBankAccount)\n\n—P2s\n—> msg = messageContext.createMessage (payload)\n\n¢ Be extremely careful about modifying entity data in Event Fired rules and\nmessaging plugin implementations\n« Entity changes in these code locations do not cause the application to run or re-run validation\nor preupdate rules\n¢ Use rules to perform only the minimal data changes necessary for integration code\n* Only change fields that are not modifiable from the user interface\n\n+ For example, you might set custom data model extension flags only used by messaging code\n\n--- ch11/lesson-13/slide-14.png ---\n| Deploy code changes Gi\n_—RestartServer Reload Changed Classes\n\n¢ Create a rule hierarchy (parent rule ¢ Newly created and modified event\nand then children rules) fired rules\n\nTools VCS Window Help\nD Run ‘Server’\n\nEYE Tools VCS Window Help W Debug ‘Server’\n\nD> Run ‘Server’ Shift+F10 fe aeuneSesveeguath Coveraae)\n\nbe Run ‘Server’ with Coverage WE Debus...\n\nD Run... Alt+Shift+F10 yy Attach to Local Process...\n\nWE Debug... Alt+Shift+F9 [> Edit Configurations...\n\nAy Attach to Local Process... 2B] Import Test Results\n\n[> Edit Configurations... Il Stop ‘Server’\n\n] Import Test Results > EF Show Running List\n| Stop ‘Server’ Ctrl+ F2 Stop B P\n\n--- ch11/lesson-13/slide-15.png ---\n| Demonstration G\n\nExamine event fired rules\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-13/slide-17.png ---\nQuestion G\n\n_- — Why must an Event Fired rule cast the MessageContext Root object?\n\n7\n¢\n4\n\nSe Soe Se sees esse ese\n\n--- ch11/lesson-13/slide-18.png ---\nAnswer Gi\n\n_- — Why must an Event Fired rule cast the MessageContext Root object?\n¢\n\n¢\n4\n\nMessageContext.Root is of type Object, but message payloads typically need to work\nwith the MessageContext.Root as the type of entity that triggered the message event.\nTherefore, the MessageContext.Root entity must be cast to be of that type.\n\nSoo eS oe ese Sse ese\n\n--- ch11/lesson-13/slide-19.png ---\nLesson\nobjectives ¢ Create messages in Event Fired rules\n\nreview ¢ Describe the role that message payloads play\nin messaging\n\n--- ch11/lesson-13/slide-20.png ---\n| Student exercise\n\nConfigure event fired rules\n\n--- ch11/lesson-14/slide-01.png ---\nMessage Payload Transformation\n\n--- ch11/lesson-14/slide-02.png ---\nLesson\nobjectives ¢ Describe and configure the plugin used to\n\ntransform a payload\n\n* Configure a message reference value used\nby Guidewire and external system\n\n* Transform a message payload\n\n--- ch11/lesson-14/slide-03.png ---\n| Use case\n\n¢ The bank savings account\nverification message payload has a\ntoken that needs to be replaced with\nthe age of the message\n* Compare the time the message was\ncreated to the current time\n« Areference value needs to be\nadded to the payload to help identify\nthe message being sent to the\nexternal system\n\nGi\nDesign approach\n\n1. Create message request plugin\nclass\n\nCreate plugin registry\nConfigure the plugin\n\nConfigure the destination\n\na Fe N\n\nDeploy changes\n\n--- ch11/lesson-14/slide-04.png ---\n| Guidewire servers and messaging transactions\n\nDY) .\nEvent triggering & ¥ Sending message &\nMessage generation . Payload Process synchronous\n\ni ») transformation acknowled,\nigment\nA (event fired rules) (request plugin) (transport plugin)\n\n|\n\nProcess asynchronous\nacknowledgement\n\n¢ All activity from payload transformation takes place in transaction 2\n* Messaging occurs across multiple transactions\n\n¢ If an exception is thrown, work in the current transaction is rolled back\n\n--- ch11/lesson-14/slide-06.png ---\nPayload late binding Gi\n\nA late binding value (token) is:\n+ Amessage payload value that cannot be determined when the payload is generated (event-time)\n\n+ Such a value is obtained and substituted in the payload right before the message is sent (send-time)\n\n* The message request plugin:\n+ Responsible for replacing all late binding tokens with actual values in an outbound message\n\n*** Stage 3(a) -- Transforming the message payload with\n\nlate binding ***\nRequest plugin: BankAccountVerificationRequest —\n\nbeforeSend()\nReplaced token <@@ageOfMessageInSeconds@@> with value 3\n\nReturning payload string\n\ndam\n\nReplace token\nwith actual age\nin seconds\n\nRequest (CH),\n\nPlugin t re5\n\n--- ch11/lesson-14/slide-07.png ---\n| SenderReflD\n\n* Optional message identifier\n\n¢ Determined by Guidewire, but in some cases, the\nexternal system determines the SenderReflD\n\n¢ Used by:\n\n* The external system to identify which request\n\nmessage it is responding to\n\nGi\n\nMessage (ab_message) (delegates to KeyableBean)\n> Description\n\nAttributes: Extendable”, Final”, Keyed’, Sourceable”\n> Concrete FK references:\nShow user interface details on all fields\n\nFields | Unique Keys for Mes\n\nFields\n\nSenderReflD oichor (6!) wate)\nOptional sender reference set at message send time.\n\n* Guidewire to look up a corresponding pending asynchronous request message\n\n« System administrator to\nidentify failed messages\n\n@.- seca oe a\n\n(G P+ arn\nSystem\n\ntrancport\n\nPlugil\n\n--- ch11/lesson-14/slide-08.png ---\nRequest plugin\n\n--- ch11/lesson-14/slide-09.png ---\n| Message request plugin Gi\n\nequest\n\nfe Payload\n\ntransformation\n\nExternal\na System\nPlugin\n* Called before the payload is sent by + Transforms the payload\ntransport plugin + Sets late binding value(s)\n* Sets the SenderReflD on the message object * Optionally, adds the SenderRefID value to the\n\nmessage payload\n\n--- ch11/lesson-14/slide-10.png ---\n| Create a message request plugin class Gi\n\nUse a package naming convention recommendation:\n\n* <company>.<app_code>.messaging.<functional_area>\n\n© bankAccountVerficationRequestgs\n\n=>\n\ne\neo\neo\neo\n\noe\n\nPackage trainingepp.messaging.bank\n\nclass BankAccountVerificationRequest implements MessageRequest {\n\nGParam(\"aMessage\", \"Message object sent by event fired rule\")\nGReturns(\"Payload, transformed or not\")\n\noverride function beforeSend(aMessage : Message) : String (...)\noverride function afterSend(p0 : Message) (...)\n\noverride function resume() (...}\n\noverride property set DestinationID(destinationID : int) (...)\n\noverride function shutdown() (...)\n\noverride function suspend() (...)\n\n--- ch11/lesson-14/slide-11.png ---\nSet the SenderReflD Gi\n\n17 @ override function beforeSend(aMessage : Message) : String {\n\n—P 19 if (aMessage.SenderRefID == null) {\n=> 20 aMessage.SenderRefID = aMessage.PublicID\n\n}\n\n¢ You must ensure that your beforeSend method implementation is idempotent,\nwhich means that it could be called multiple times and have the same effect.\n\n* Set the SenderReflD only once for a new message\n\n--- ch11/lesson-14/slide-12.png ---\n| Transform the payload Gi\n\n—> var transformedPayload = aMessage.Payload\n—> if ((aMessage.MessageRoot as BankAccount).AccountType == BankAccountType.TC SAVINGS) {\n> 26 + aMessage.SenderRef ID\n=> 2 var ageInSeconds = String. valueOf(DateUtil. secondsSince (aMessage.CreationTime) }\n\n29 var token = \"<@¢ageOfMessageInSeconds@@>\"\n\nif (transformedPayload.contains(token)) {\n\n1 transformedPayload = transformedPayload.replaceFirst (token, ageInSeconds)\n\n2 }\n—> return transformedPayload\n\n4 }\n\ncontact, ab:5\n. bankName,ACME Credit Union\n* The beforeSend method should not modify the routingNunber, 123-987\nH accountNumber, 345678901\nmessage payload directly\n\naccountly\n\n¢ It should return a transformed payload\n\n--- ch11/lesson-14/slide-13.png ---\n| Create plugin registry G\n\n1@ AuthenticationSourceCreatorPlugin.gwp 6 Cut CtrleX | (©) Groovy Class\n\n@ BackgroundTaskFeiloverPlugin.gwp [i copy cris | i File v\nd BackgroundTaskLoadBalancingPlugin.gwp Copy Path CtiieShifteC | i Scratch File Ctrl Alt+Shift+Insert_|\n\n& BankAccountVerificationRequest.gwp Copy Reference CirleAiteShitt+c |B Package G\n\n1 BankdccountVeificationTrensport.gup Lit Poste cotev | HTML re\n\n\" Name BankAccountVerificationRequest\n\nInterface: MessageRequest\n\n(0K Cancel\n\n* configuration.config.Plugins.registry\n* Specify a new request plugin registry entry name\n* Specify the interface to be implemented\n¢ Add the type of plugin to be implemented in the plugin name\n\n--- ch11/lesson-14/slide-14.png ---\n| Configure the plugin\n\n1 BankAccountVeiticationRequest.gwp\nName: | BankdAccountVetfcationRequest\n\nInterface: | MessageRequest\n\nGosy Class:\nTEE Environment:\n\nServer:\n\n‘Add Java Plugin\nAdd OSGi Plugin\n\nParameters:\n\n« Add Gosu Plugin\n* Optionally, select Java or OSGi plugin\n\n* Click the ellipse (...) and select the plugin\n\nimplementation class in the dialog\n\ntrainingapp.messaging.bank. BankAccountVerificationRequest\n\nName Value Environment Server\n\nBi Select Gosu Class\n\nSearch by Name | Project\n\nInclude non-project classes\n\n(Q BankAccountVeri ficationRequest]\n\n°o\n\n--- ch11/lesson-14/slide-15.png ---\n| Configure the destination Gi\n\nseh messaging-configam!\n\nDefault Server:\n\nMessaging Config: Default\n\nho\n1D, Name\n\n65 _Java.MessageDestination.Email.Name\n\n70 _Java.MessageDestination PolicySystemTransport:Name\n\nTl Java.MessageDestination.ClaimSystemTransport.Name\n\n72 Java.MessageDestination BilingSystemTransport.Name\n\n324\n\nJava.MessageDestination.DocumentStore Name\n\n‘Vendor Recommendation\nLegal Case Report\n\nSafe Ordering Demo\nMessage Generator\nFraud Check\n\n¢ Navigate to:\n\n¢ configuration.config.Messaging.messaging-config.xml\n\n|\nyy +\n10: B Z] 1 Disable destination\n‘Name: Bank Account Verification\n‘Server, ‘Host Name: Y\nTransport Plugin: BankAccountVerificationTransport\nAfter Send Plugin:\nReoly Plugin;\n\n¢ The destination must point to a plugin registry element that references the\nappropriate Message Request plugin\n\n--- ch11/lesson-14/slide-16.png ---\n| Deploy code changes\n\nNew request plugin class\nNew or modified plugin registry\n\nNew or modified destination\n\nTools VCS Window Help\nD> Run ‘Server’ Shift+F10\n& Debug ‘Server’ ‘Shift+ F9\n\nD Run... Alt+Shift+F10\n& Debug... Alt+Shift+F9\n\\m Attach to Local Process...\n\n[>> Edit Configurations...\n\nBl import Test Results >\n| Stop ‘Server’ Ctrl+F2\n\nGi\n\n¢ Modified request plugin class\n\nTools VCS Window Help\nD> Run ‘Server’\n\n%& Debug ‘Server\n\nWE Run ‘Server’ with Coverage\n\nD Run...\n\nWE Debug...\n\n2x Attach to Local Process...\n\n[> Edit Configurations...\n\nB] Import Test Results\n\nI Stop ‘Server’\n\nEP show Running List\n\n--- ch11/lesson-14/slide-17.png ---\n| Demonstration G\n\nExamine message payload transformation\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-14/slide-19.png ---\nQuestion\n\na With regards to payload generation and payload transformation:\n\noo A) Onwhich server does each take place?\n\nB) At what point in time does each take place?\n\nSeo e Soo e esses see sen\n\n--- ch11/lesson-14/slide-20.png ---\nAnswer Gi\n\na With regards to payload generation and payload transformation:\n“ A\nB\n\nOn which server does each take place?\n\nAt what point in time does each take place?\n\nA) Payload generation occurs on the application/UI server. Payload transformation\noccurs on the batch/integration server.\n\nB) Payload generation occurs during Event Fired rules (right after the triggering event\noccurs). Payload transformation occurs right before the message is sent (in the\nrequest plugin's beforeSend method.\n\nSoo ee See eo eS se ese\n\n--- ch11/lesson-14/slide-21.png ---\nQuestion\n\n_— — Under what circumstance would you need to late bind a message\n¢ payload?\n\n¢\n¢\n\nSeo e Soo e esses see sen\n\n--- ch11/lesson-14/slide-22.png ---\nAnswer\n\n_— — Under what circumstance would you need to late bind a message\nY payload?\n7\n\nYou would need to late bind a message if information that needs to go in the message\npayload is not known at the time the message payload is generated in Event Fired\nrules.\n\nSoo ee See eo eS se ese\n\n--- ch11/lesson-14/slide-23.png ---\nLesson\nobjectives ¢ Describe and configure the plugin used to\nreview transform a payload\n\n* Configure a message reference value used\nby Guidewire and external system\n* Transform a message payload\n\n--- ch11/lesson-14/slide-24.png ---\n| Student exercise\n\nConfigure message payload\ntransformation\n\n--- ch11/lesson-15/slide-01.png ---\nSending Messages\n\n--- ch11/lesson-15/slide-02.png ---\nLesson\nobjectives\n\n¢ Describe and configure the plugin used to\nsend messages\n\n¢ Describe the functionality of safe ordering\n\n¢ Describe how a sending message error is\nhandled\n\n--- ch11/lesson-15/slide-03.png ---\nUse case\n\n¢ The bank account verification\npayload must be sent to an external\nsystem\n\n* Configure the system to handle\nsend errors\n\n* Configure the system to ensure a\ncontact message is not sent until its\nprevious message is acknowledged\n\nGi\n\na Fe N\n\nCreate message transport plugin\nclass\n\nCreate plugin registry\nConfigure the plugin\nConfigure the destination\n\nDeploy changes\n\n--- ch11/lesson-15/slide-04.png ---\n| Guidewire servers and messaging transactions\n\n: Application Context )) Integration Context i\n\nyy ,\nEvent triggering & 4 Sending message &\nPayload Process synchronous\n\n( ») Message generation transformation Ki led t\n‘event fired rules, | Message | 0 acknowledgmen'\nPY d Messce (request plugin) (transport plugin)\n\n¢ ==\n\nProcess asynchronous\nacknowledgement\n(reply plugin or API)\n\n¢ All activity from sending messages takes place in transaction 3\n« Messaging occurs across multiple transactions\n\n¢ If an exception is thrown, work in the current transaction is rolled back\n\ni External\ni System\n\n—\n\n--- ch11/lesson-15/slide-05.png ---\nTransport plugin\n\n--- ch11/lesson-15/slide-06.png ---\n| Message transport plugin Gi\n\n3\n\nDestination LoS\n\nv\n\n)\n\ni Secon System\nPlugi\n\n* The message transport plugin is responsible for sending the message\n* The message transport plugin may also become responsible for:\n+ Persisting the SenderReflD in a message if the SenderReflD is provided by an external system\n\n+ Acknowledging in case of synchronous message exchange with an external system\n\n--- ch11/lesson-15/slide-07.png ---\n| Create a message transport plugin class\n\n¢ Use a package naming convention recommendation:\n\n* <company>.<app_code>.messaging.<functional_area>\n\n© BankAccountVerfcaton Transport.gs\npackage trainingepp.meosaging.bank\n\nuses gv.plugin.messaging.MessageTransport\nuses trainingapp. webservice. bank.bankaccountveri ficationwsc.bankverificationapi.BankVerificationAPT\n\nclass BankAccountVerificationTransport implements MessageTransport {\n\nvar bankApi: BankVerificationAPT\n\nGParam(\"aMessage\", \"Message object\")\n@Paran(\"transformedPayload”, \"Payload sent by request plugin\")\n\nWl 44\n\ni © override function send(aMessage : Message, transformedPayload : String) (...}\n1 © override function resune() (...)\n\ni © override property set DestinationID(destinationID : int) (...}\n\nfl © override function shutdown () (...)\n\n1 © override function suspend() (.-}\n\n--- ch11/lesson-15/slide-08.png ---\n| Implement destination plugin methods Gi\n\n© ExampleTransportPlugin.gs\n\nse\n\n13 a\n\na\n\na\n\nset\n\npackage trn.ta.plugin.messaging. example\n\nuses gw.plugin.messaging.MessageTransport,\n\nclass\n\nn implements MessageTransport {\n\nprivate var destinationID : int = -1\n\noverride function send(message : Message, transformedPayload : String) (\n\ny\n\noverride function shutdown() {\n\n1\n\noverride function suspend() [\n\n}\n\noverride function resume() {\n\n1\n\nLE; Select Methods to implement\n\n#@ rt\n) gu plugin messaging MessageTronsport\n\nI ® sendimessageMessagetransfermedPayleadSting)void\n\nMessagePlugin\n\nD Copy davadoc\n\n© inser Coverde oe\n\nCancel\n\noverride property set DestinationID(destinationID : int) (\n\nd\ny\n\nthis. destinationID = destinationID\n\nImplement control methods and\nproperty for messaging plugins:\nshutdown\n+ When application server shuts down\nsuspend\n\n+ When messaging destination is\nsuspended\n\nresume\n+ When messaging destination resumes\nset DestinationID\n\n« When messaging plugin instance is\ninitialized\n\n--- ch11/lesson-15/slide-09.png ---\n| resume and suspend methods example Gi\n\na override function resume() {\n\n—> _bankApi = new BankVerificationAPI()\n_bankapi .config.Http.Authentication.Basic.Username = \"externalappuser”\n_bankApi .Config.Http.Authentication.Basic.Password = \"gw\"\n~bankApi .Config.Cal1Timeout = 30000\n}\n\noe override property set DestinationID(destinationID : int) {...}\n@ override function shutdown() {.--}\na override function suspend() {\n\n—> _bankApi = null\n\n}\n\n¢ To resume a destination, call the resume method\n* resume method establishes and configures the connection\n* To suspend a destination, call the suspend method\n\n* suspend method releases any resources\n\n--- ch11/lesson-15/slide-10.png ---\n| Send payload to web service example Gi\n\n@Param(\"aMessage\", \"Message object\")\n@Param(\"transformedPayload\", \"Payload sent by request plugin\")\n@ override function send(aMessage : Message, transformedPayload : String) {\nvar acclumber = (aMessage.MessageRoot as BankAccount) .AccountNumber\n—> var ackCode = bankApi.verifyAccount (aMessage.SenderRefID, transformedPayload, accNumber)\n\n* To send a message, implement the send method, which the application calls with\na Message entity instance argument\n\n* The send method has two arguments:\n* aMessage is the original payload\n\n¢ transformedPayload is the transformed payload if that destination implemented\na MessageRequest plugin\n\n--- ch11/lesson-15/slide-11.png ---\n| Send payload to file example Gi\n\not override function send(aMessage: Message, transformedPayload: String) {\nprint(\"\\n*#* Stage 3(b) -- Sending the message *#*\")\nprint(\" Transport plugin: VendorRecommendationTransport -- send()\")\n\nprint(\" Sending payload to file c:/Guidewire/Vendor\" + aMessage.ABContact.PublicID + \".txt\")\nvar file = \"c:/Guidewire/Vendor\" + aMessage.ABContact.PublicID + \".txt\"\n\nvar output = new Bufferediriter (new FileWriter(new File(file)))\n\noutput. write (transformedPayload)\n\n4 output.close()\n\nAE\n\n« VendorRecommendationTransport plugin\n* The send method uses Gosu's Java file I/O capabilities to write the payload to a simple flat file\n\n¢ The payload contains information about the evaluations for that vendor\n\n--- ch11/lesson-15/slide-12.png ---\n| Create plugin registry\n\nY Db Plugins\nY DWregistry\n AuthenticationServicePlugin.gwp\ntits Alte Shiftelnsert :\n\n@ AuthenticationSourceCreatorPlugin.gwp 6 Cut\n\n1@ BackgroundTaskFailoverPlugin.gwp Tl Copy\n\nA BackgroundTaskLoadBalencingPlugin.gwp Copy Path\n\n& BankAccountVerficationRequest.gwp Coy Reference\n& BankAccountVerficationTransport.gwp [il paste\n\n* configuration.config.Plugins.registry\n\nCtrt+x | [B Groovy Class\n\nCte\n\nCtrt+Shift+C | i Scratch File\n\nCirle Alte Shift+C\nCttev\n\n* Specify a new request plugin registry entry name\n\n* Specify the interface to be implemented\n\na File\n\nPackage\nitm HTML File\n\nGi\n\nPlugin\n\nName: BankAccountVerificationTransport\n\nInterface: |MessageTransport\n\ncen\n\nCancel\n\n¢ Add the type of plugin to be implemented in the plugin name\n\n--- ch11/lesson-15/slide-13.png ---\n| Configure the plugin G\n\n1 BonkdAccountVerificationTranspor.gup\nName: BankAccountVerficationTransport\n\nInterface: MessageTransport\n\nGosy Class: trainingapp.messaging bank BankAccountVerificationTransport\n\netfication Transport}\n\nEnvironment:\nServer:\n9 CO Disabled\n‘Add Java Plugin Parameters: = Value | Environment | __ Server\n\nAdd OSGi Plugin\n\nG\n\nSearch by Name | Project\nD7 Include non-project classes\n\nQ BankAccountVerificationTransport\n\n¢ Add Gosu Plugin\n* Optionally, select Java or OSGi plugin\n\n* Click the ellipse (...) and select the plugin\nimplementation class in the dialog\n\n--- ch11/lesson-15/slide-14.png ---\n| Configure the destination\n\neh messaging-configam!\nDefault Server:\n\nMessaging Config: | Default\n\nae 10: 13\n1D, Name ;\n65 Java.MessageDestination.Email Name Greer\nRUE Have MeszageDestinst icysyster frensportNeme Name: Bank Account Verification\nTl Java.MessageDestinati imSystemTransport.Name\nie aie Mesaceesinaton saad imevo Nene ean Host Name\n\n15 Legal Case Report After Send Plugin:\n20 Safe Ordering Demo\n21 Message Generator Request Plugin:\n\n30. Fraud Check Reoly Plugin;\n\n« Navigate to:\n\n¢ configuration.config.Messaging.messaging-config.xml\n\nBankAccountVerificationRequest\n\nCO. Disable destination\n\nTransport Plugin: BankAccountVerificationTransport\n\n¢ The destination must point to a plugin registry element that references the\n\nappropriate Message Transport plugin\n\n--- ch11/lesson-15/slide-15.png ---\nDeploy code changes\n\n¢ New transport plugin class\n¢ New or modified plugin registry\n¢ New or modified destination\n\nTools VCS Window Help\n\nD> Run ‘Server’ Shift+F10\nlun ‘Server’ with Coverage\n\nD Run... Alt+Shift+F10\n\n& Debug... Alt+Shift+F9\n\njy Attach to Local Process...\n\n[PP Edit Configurations...\n\nBl import Test Results >\n| Stop ‘Server’ Ctrl+F2\n\nGi\n\n¢ Modified transport plugin class\n\nTools VCS Window Help\nD> Run ‘Server’\n\n%& Debug ‘Server\n\nWE Run ‘Server’ with Coverage\n\nD Run...\n\nWE Debug...\n\n2m Attach to Local Process...\n\n[> Edit Configurations...\n\nB] Import Test Results\n\nI Stop ‘Server’\n\nEY Show Running List\n\nSto\n\n--- ch11/lesson-15/slide-16.png ---\nSafe ordering\n\n--- ch11/lesson-15/slide-17.png ---\ng Account 117 Who is\n\naccount\n\n(lost or delayed) 117?\n2\n==\n2M External\nchanged System\n117\nchanged changed M\n\n« Some destinations create multiple messages for a single entity or a single set of\nrelated entities\n\n* Typically, they should not be sent at the same time\n« Later messages reference work done in earlier messages\n\n¢ If an earlier message gets lost or arrives late, a later message will not make sense\n\n--- ch11/lesson-15/slide-18.png ---\n| Safe ordering\ng Account 117\n\na) &\n\n==\nExternal\nSystem\n\nchanged\n* Guidewire has a built-in mechanism called safe ordering\n\n+ Its primary purpose is to ensure that the external system gets related messages one at a time\n« When safe ordering is enforced:\n\n+ For a given destination/entity pair, only one message is sent\n\n+ The external system must acknowledge the first message before the next message is sent\n\n--- ch11/lesson-15/slide-19.png ---\n| Default ordering and sending behavior Gi\n\n. regionA\n¢ Non-safe ordering messages sent... added M4\n\n10:01\n\n* Before safe-ordering message\naccount B\n\n« In message creation order added\n10:02\n\n* Immediately\naccount B\nchanged\n10:03\n\n¢ Safe-ordering messages sent... region C\nadded\n« After non-safe messages 10:04 4]\n\n* In message creation order account D,\nadded\n¢ Per entity instance, only one message ata 10:05\ntime account D.\nchanged\n10:06\n\n--- ch11/lesson-15/slide-20.png ---\n| InsuranceSuite safe ordering Gi\n\n* Safe ordering applies only to» Safe ordering applies * Safe ordering is not used for\n\nmessages related directly or only to messages any primary entity messages\nou’ tly to instances of related directly or ¢ For any destination, you can\n\nindirectly to instances of — enable safe ordering for one\n\n¢ Alternative Primary Entity of the supported primary\n\ncan be configured in a Account entity types:\n\ndestination to safe order for + Alternative Primary Entity . . . ;\n\nthe Contact entity can be configured in a Account PolicyPeriod\ndestination to safe order for * Contact + Producer\nthe Contact entity\n\nTa configuration\nCy contig\n© Entity Names\nC9 Extensions Es\n£9 Localizations\nP Messaging\n\nPE ca Reply Plugin:\n\n‘Alternative Primary Entity:\n\nconiigaan\n\n--- ch11/lesson-15/slide-21.png ---\n| ContactManager safe ordering Gi\n\nE) S]_ Cl Disable destination\n\nEnvironment:\n\n¢ In ContactManager (and TrainingApp), a Fraud Check\nmessages are safe ordered based on me a ——\nABContact te Send Pg\n\nRegie Pai Fondren\n* This is true for every destination CD\n* There are no alternative primary entity types chunk Sa one ‘\nPoll interval: 10000 ZS] shutdown Timeout: 30000 ra\nMax Retries: 3 o\nInitial Retry Interval. 1000 | Retry Backott Multiples 2 $\nMessage Without Primary: ©) iti Thread «Single Thread O Strict Mode\n\nDirbte Request Processing: C]\nServer\nChunk\n\nRequest Procesting Nodes:\n\nPersist Transformed Payot Request Processing Thread:\nAlways Cll Before Send:\nBefore Send Plugin:\nEvents: ae\nName\n\nABContactChonged\nABContacthdded\n\n--- ch11/lesson-15/slide-22.png ---\n| Safe ordering demo in TrainingApp Gi\n\nAdministration > Training: Messaging > Safe Ordering\n\nGi TrainingApp\n\nUtilities\n\nTraining: Plugins\n\nSearch ¥\n\nContact |~ Administration\n\nSafe Ordering\n\nDisplay instructions\n\nsafe Ordering\n1) Select an ABPerson william Andy a\n2) Change occupation Employee\n3) Acknowledge message?\n\n$4) send message Send\n\nNon-Safe Ordering\n\n1) Select a user Alice Applegate bd\n2) Change occupation Team Lead\n3) Acknowledge message?\n\n4) Send message\n\n--- ch11/lesson-15/slide-24.png ---\n| Transport or Request plugin error\n\nSe -: —\n\n¢ When Transport or Request plugins throws an exception, the Guidewire\napplication automatically:\n\n* Compares message send attempts to Max Retries\n\n« Waits the Initial Retry Interval\n\n* Retries to send message\n\n* Increases the time between resends (Retry Backoff Multiplier)\n* Continues until reaching Max Retries\n\n* Parameters defined in message destination\n\n--- ch11/lesson-15/slide-25.png ---\n| Error administration\n\nom\nGes\n\n¢ Guidewire automatically suspends a destination when exceeding Max Retries\n* No further messages are sent for destination\n\n¢ An administrator must manually resume the destination\n\n* The message that caused the suspend will be resent, up to the maximum retries if necessary\nMessage Queues\n\nMessage Queues\nDs Status > Destination > DS Status >\nBank Account Verification B Suspended\n\nBank Account Verification 13 Started\n\n--- ch11/lesson-15/slide-26.png ---\n| Retry and skip messages Gi\n\n= ——_-—- &\n\nMessage Queues\n\nDestination: Bank Account Verification (ID: 13)\n\nDetailed Statistics | [Contacts wit ished messages| Be\nContact ‘Send Time Failed Retryable Error Inflight Unsent Error Message\n\n0 C) C) 1\n\nBankAccountChanged Bank Ac\n\n--- ch11/lesson-15/slide-27.png ---\n| Contrasting retry scenarios\n\nWhat is the problem?\n\nWhat executes the\nretry?\n\nShould each attempt\nuse the same\nSenderRefiID\n\nWhat specifies the max\nretry number?\n\nWhat happens when\nthe max number of\nretires is reached?\n\nInitial send error External system error\n(Automatic retry (Automatic retry\nduring send after send\n\nException thrownin * Discussed in Message\nbeforeSend or send Acknowledgment\nmethods\n\nInternal Guidewire *\nbehavior\n\nYes *\n\nMax Retries *\nproperty for\n\nmessaging\n\ndestination\n\nThe destination is bd\nsuspended\n\nGi\n\nMessage needs\nmanual\nintervention\n\nAdministrator using\nRetry button\n\nYes\n\nn/a\n\nn/a\n\n--- ch11/lesson-15/slide-28.png ---\n| Demonstration G\n\nExamine message send and send error\n= recovery\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-15/slide-30.png ---\nQuestion\n\n_— — Every destination can optionally have a request plugin, but it must have a\n¢ transport plugin. Why is the transport plugin required?\n\n¢\n¢\n\nSeo e Soo e esses see sen\n\nGi\n\n--- ch11/lesson-15/slide-31.png ---\nAnswer Gi\n\n_— — Every destination can optionally have a request plugin, but it must have a\nY transport plugin. Why is the transport plugin required?\n¢\n\nThe transport plugin is required because it is used to send the message when it is\nprocessed from the Message table. Without a transport plugin, messages for a given\ndestination would have no way of being sent to the corresponding external system.\n\nSoo ee See eo eS se ese\n\n--- ch11/lesson-15/slide-32.png ---\nQuestion\n\n,- — Can one destination have two transport plugins? Can one transport\n¢ plugin be used by two destinations?\n\n¢\n¢\n\nSeo e Soo e esses see sen\n\nGi\n\n--- ch11/lesson-15/slide-33.png ---\nAnswer Gi\n\n,~ — Can one destination have two transport plugins? Can one transport\nY plugin be used by two destinations?\n¢\n\nA destination can’t have two transport plugins, but a transport plugin class can be used\nby two (or more) similar destinations.\n\nSoo ee See eo eS se ese\n\n--- ch11/lesson-15/slide-34.png ---\nQuestion\n\n_- — Why should the send method never send a message to multiple external\n\nY systems?\n¢\n\nSeo e Soo e esses see sen\n\nGi\n\n--- ch11/lesson-15/slide-35.png ---\nAnswer Gi\n\n_- — Why should the send method never send a message to multiple external\nY systems?\n¢\n\nThe message acknowledgement architecture assumes that each message is sent to\nonly one destination. If a given send method sent a message to multiple destinations,\nthen there could be multiple acknowledgements, errors, or unprocessed messages,\nand the messaging architecture would not be able to identify the state of the message.\n\nSoo ee See eo eS se ese\n\n--- ch11/lesson-15/slide-36.png ---\nLesson\nobjectives * Describe and configure the plugin used to\nreview send messages\n\n¢ Describe the functionality of safe ordering\n¢ Describe how a sending message error is\nhandled\n\n--- ch11/lesson-15/slide-37.png ---\n| Student exercise\n\nConfigure sending a message\n\n--- ch11/lesson-16/slide-01.png ---\nAcknowledging Messages\n\n--- ch11/lesson-16/slide-02.png ---\nLesson\nobjectives\n\n¢ Describe messaging acknowledgement\n\nIdentify various messaging acknowledgement\nmechanisms\n\nDescribe how a messaging error is handled\nUse the administration screens to view the\nstatus of a message and manipulate it\nmanually\n\n--- ch11/lesson-16/slide-03.png ---\n| Use case\n\nThe bank account verification message\nmust be acknowledged synchronously\nby an external system\n\nGi\n\n1.\n\nConfigure synchronous message\nacknowledgment in the transport\nplugin\n\nDeploy changes\n\n--- ch11/lesson-16/slide-04.png ---\n| Guidewire servers and messaging transactions Gi\n\nH Application Context iJ Integration Context i\n\ni Event triggering & ; Sending message & H\n: (5) Message generation Payload Process synchronous : external\nA (event fired rules) Message transformation acknowledgment (transport :\ni (request plugin) plugin) : System\n\ncS :\nws transaction 2 transaction 3 &\n\n=\n= Process asynchronous\n. acknowledgement\n(reply plugin or API)\n\n« Message acknowledgement is the process in which Guidewire interprets a messaging response\nfrom an external system\n\n¢ Allactivity from acknowledging messages takes place in either transaction 3 or 4\n* Messaging occurs across multiple transactions\n\n* If. an exception is thrown, work in the current transaction is rolled back\n\n--- ch11/lesson-16/slide-05.png ---\nMessage acknowledgment\n\n--- ch11/lesson-16/slide-06.png ---\n| Plugins that acknowledge a\n\n>) P\ng m - ow\n\n&: rely via ia API =\n\n=) chro onous y\n{F Ys\nEy st liste! vcr oF poll ing\n\n--- ch11/lesson-16/slide-07.png ---\n| Interpreting the external system response Gi\n\nrete —\nms | {v) positive acknowledgement\n\n==\nerror External\nApplication (>) negative acknowledgment System\n\n. Sil duplicate message\nM4 seveeesseeensneeens (no response) sss\nG)\n\n* Guidewire interprets three response types\n¢ Positive acknowledgement, error, and duplicate response\n\n¢« Noresponse may also require handling\n\n--- ch11/lesson-16/slide-08.png ---\nMessage and MessageHistory a\n\n¢ Unsent messages that... * Positively acknowledged messages\n\n* Have yet to be sent ¢ Skipped messages\n\n* Failed send ¢ Retried messages\n\n¢ Sent messages that are...\n\n« Pending acknowledgement ACK'd History\n\nTE\n« Waiting to be retried\n. ipl\nErrored messages that... nome PSE\n« Require manual intervention\n\noomme—(XQ\n\n--- ch11/lesson-16/slide-09.png ---\n| Positive acknowledgements\nMessage Table Gi\n\nWARNING: Production code should not modify the Message table directly.\n\nNumber of messages in table: 1\n\nB~\nMsgiO__Creation Time > __ Triggering Enti Event Name 2 Destination 2 _SenderRefiD_ > _status Error Category Retries >\n1605 09/12/20189:28 PM MessageGenerator{108) _MessageGeneratorAdded 21 MegGeni2 Pending acknowledged 2) °\n\nMessageHistory Table\n\nWARNING: Production code should not modify the MessageHistory table directly.\n\nNumber of messages in table: 1\n\n1508 09/12/20189:28PM MessageGenerator(104)  MessageGeneratorAdded 21 MsgGen:12 ‘Acknowledged (10)\n\n¢ Apositive acknowledgment (ACK) is when the external system reports success\n+ Message was successfully received and processed\n* Guidewire application response to ACK\n\n+ Moves the message from Message to MessageHistory\n\ne Channec the ctatiic tn reflact acknnwladnqaemant\n\n--- ch11/lesson-16/slide-10.png ---\n| Messaging exceptions during send\n\nMessage Table\n\nWARNING: Production code should not modify the Message table directly.\n\nNumber of messages in table: 1\n\nE-\nMsgiD Creation Time  —Triggeringéntity Event Name Destination > SenderReflD > _ status Error Category > Retries\n1807 09/12/20189:34 PM BankAccount(204) _BankAccountChanged 13 ab:1807 Pending send (1) °\n\n¢ Initial send from Guidewire transport throws an exception\n* Guidewire application response\n\n« Message stays in Message table\n\n* Message status remains as Pending send (1)\n\n* Guidewire retries to send the message until reaching the maximum number of retries as\ndefined in the destination\n\n« At maximum retries, the Guidewire suspends the destination\n\n--- ch11/lesson-16/slide-11.png ---\nMessaging errors after send\n\nMessage Table\nWARNING: Production code should not modify the Message table directly\n\nNumber of messages in table: 1\n\n=:\nMegID ctetonTime = geingniy erent vome Destination ¢ senderefo > sats enor ategry ¢ Rete\na-\n\n1902 09/12/20189:59PM MessageGenerator(202) MessageGeneratoradded\n\n¢ Error from external system is\nknown as a Negative\nAcknowledgment (NACk)\n\n* Temporarily cannot process the\nsuccessfully received message\n\n¢ Reports error\n\n* Guidewire application response\n« Message stays in Message table\n« Message status of retryable error\n\n¢ Retry scenario\n\n* Manual retry from administrator or\nintegration code to resend message\n\n--- ch11/lesson-16/slide-12.png ---\n| Retrying an error\n\nMessage Table\n\nWARNING: Production code should not modify the Message table directly.\n\nNumber of messages in table: 1\n\nMsgiO Creation Time > Triggering Entity\n\n1902 08/12/20189:59 PM MessageGenerator(202) MessageGeneratorAdded\n\nsg. 10_Creation Time_\n\n¢ Acopy of the original\nmessage is created\nand sent\n* References the same\n\nevent and triggering\nentity\n\n1903 08/12/2018 10:00PM MessageGenerator(202) MessageGeneratorAdded\n\nEvent Name Destination >\n\nMessageHistory Table\n\n21 MsgGen:18-1\n\nSenderRefiD >\n21 MsgGen:18\n\nStatus\n\nError Category >\n\nRetryabe ero (4)\n\nending acknowledged (2)\n\nWARNING: Production code should not modify the MessageHistory table directly.\n\nNumber of messagesin table: 1\n\n« Uses a different SenderReflD\n\n* Incremented RetryCount field by 1\n\n(09/12/20189:59 PM MessageGenerator(202)  MessageGeneratorAdded\n\n21 MsgGen:i6\n\na-\nRetries > RetryTime >\n© 08/12/2018 10:00PM\n\n(09/12/2018 10:00 Pa\n\nError retried (12)\n\n* Original message is moved to\nMessageHistory table\n\n--- ch11/lesson-16/slide-13.png ---\nDuplicate messages\n\nMessageHistory Table\n\nWARNING: Production code should not modify the MessageHistory table directly.\n\nNumber of messages in table: 1\n\nMsgiD._ Creation Time\n1608 09/12/2018 10:28 PM MessageGenerator(205) MessageGeneratorAdded MsgGen:21\n\nMsgiD Creation Time > Triggering Entity Event Name SenderReflo.\n\n1608 09/12/2018 10:28 PM MessageGenerator(205) MessageGeneratorAdded MsgGen:21\n\n* Duplicate messages\n+ One message sent successfully\n+ Received by the external system\n\n+ External system processes the same message more than once\n\nTriggering Entity, Event Name Senderrefld.\n\nB-\n‘Status\n‘Acknowledged (10)\n\n‘Status\n‘Acknowledged (10)\n\n+ External systems responds with a positive acknowledgement (ACK) per each processed duplicate\n\n* Guidewire application response\n\n+ Increments the Duplicate Count (Dup. Count) in the Message History table\n\n--- ch11/lesson-16/slide-14.png ---\n| No response Gi\n\nMessage Table\n\nWARNING: Production code should not modify the Message table directly.\n\nNumber of messages in table: 1\n\na\nMsgiD Creation Time > Triggering Entity Event Name Destination S SenderRefiD > status Error Category > Retries\n1806 _09/12/20189:28PM MessageGenerator(104) MessageGeneratorAdded 21 MsgGen:i2 Pending acknowledged (2) °\n\n¢ Guidewire application sends message to external system\n*« No ACK or NACK from external system\n* Guidewire application response\n* Keeps the message in the Message table\n* Consider batch process to purge message table and avoid manual intervention\n\n* Apply logic for overdue messages\n\n--- ch11/lesson-16/slide-15.png ---\n| Contrasting retry scenarios\n\nInitial send error External system error Manual retry\n(Automatic retry during] (Automatic retry after\n\nWhat is the problem? Exception thrown in External System reports an Message needs manual\n\nbeforeSend or send error intervention\nmethods\niia cticmucecisems Internal Guidewire Integration code Administrator using Retry\nbehavior button\nShould each attempt use [RCS No Yes\nthe same SenderReflD\nWhat specifies the max Max Retries property Integration code n/a\nretry number? for messaging using plugin parameter or\ndestination script parameter\nWhat happens when the [MitateCodimies Integration code reports n/a\nCee §6suspended error with error category\n\nreached?\n\n--- ch11/lesson-16/slide-17.png ---\n| Reporting positive acknowledgement Gi\n\n—> aMessage.reportAck ()\n\n—> (aMessage.MessageRoot as BankAccount).IsVerified = VerificationStatus.7C VERIFIED\nbreak\n\ndefault:\n\n« In some cases, Guidewire applications use messaging to request data such as\nreports from external systems, such as:\n\n* A police report detailing an accident or burglary of insured items\n¢ A medical report detailing customary prices for given medical procedures\n¢ A fraud report detailing that a claim for a given loss has already been filed\n\n¢ In these cases, the external system responds with the report data and\nacknowledges the message\n\n--- ch11/lesson-16/slide-18.png ---\n| Reporting errors after send below max retries xampies) Gi\n\n* Code example 1\nstatic property get maxRetriesForRetryableMessage(): int (\n1 var value: int = 3\nif (ScriptParameters.MaxRetriesForRetryableMessage > 0) {\nvalue = ScriptParameters.MaxRetriesForRetryableMessage\n}\n\nreturn value\n\n—\n\n* Code example 2\n\n4 @Param(\"aMessage\", \"The message instance\")\nGParam(\"errorCategory\", \"a Typekey from the Error Category typelist\")\n2 static function reportExternalSystemError (aMessage: Message, errorCategory: ErrorCategory): String {\n2 var output = String. format (\"External System Error reported for message #s with error category of $s\", {aMessage.SenderRefI\n—p 22 if (aMessage.RetryCount < maxRetriesForRetryableMessage) {\n——> 25 var backOffMultiplier = aMessage.RetryCount + 1\nvar waitTime: int = backOffMultiplier * 30\n\n32 var retryTime = DateUtil.addSeconds(DateUtil.currentDate(), waitTime)\n\n—p 2: aMessage. reportError (retryTime)\n35 output += String. format(\"; retry attempt is: @s; the next retry attempt is at ts\", {( backOffultiplier), retryTime. form\n\n--- ch11/lesson-16/slide-19.png ---\n| Reporting errors after send at max retries Gi\n\n¢ Define typekeys in ErrorCategory typelist extension\n* ...config.extensions.typelist.ErrorCategory.ttx\n* message.reportError (errorCategory)\n\n* Call when retry maximum BB Erorcategoryat |\n\nretries limit reached ———S = =\n| typecode v VshowAlly| oe = = FE) ErorCategoytti Y | 2\n* Specify the error category Element Code Name Priori\nF reecenson|Erocaeen) _[Thetpecterortrmesegintoeiner ||\n* Application no longer tries typecode —_no_connection No Connection 1\nto resend the message typecode —_database_contention Database Contention 2\naoe typecode user_authentication User Authentication 3\n+ Alert an administrator typecode —_ unexpected_error Unexpected Error 4\ntypecode _permanent_error Permanent Error 5\ntypecode _payload_format Payload Format 6\n\n--- ch11/lesson-16/slide-20.png ---\n| Reporting errors after send at max retries (example) Gi\n\n“static function reportExternalSsystemError (aMessage: Message, errorCategory: ErrorCategory): String {\n\n} else ( c\nourpat += = sering. format (\"i + retry max reached ts\", (SixRSERissFoHistryableNsasaze))\n\n—> stesaage. seporttrror (errorceregory)\n—> alertadninaboutNessageError (aMeseage)\n}\n\nreturn output\n\n}\n\nThe code references a method found in the\ntrainingapp.demo.messageack.MessageAckutil class in TrainingApp\n\n--- ch11/lesson-16/slide-21.png ---\n| Reporting duplicates Gi\n\nGParam(\"senderRefID\", \"The SenderRefID of the message\")\nstatic function reportDuplicate(senderRefID: String): String {\nvar output: String\nYar ahessagellisuory = Query nake(Messageiistory) .compare (MessageHisrory#SenderRe(ID, Relop,Hzuels, senderRefTD) ,seLect() .AttostOneRiow\n\n=—\nAf (aMessageHistory != null) (\na al\n\nTransaction. Cur: dd (aMessagediistory)\n\naMessageliistory.reportDuplicate()\n\noutput = String. format(\"Duplicate reported for MessageHlistory with SenderRefID: ¢s with count #s\", {aMessageHistory.SenderRefID, aMessageilistory.D)\n} else (\n\noutput = String. format(\"There is no MessageHistory in the MessageHistory table for the message with SenderRefID\", {aMessageHistory.SenderRefID})\n1\nreturn output\n\n}\n\n¢ Duplicates can be reported only from MessageHistory instances\n\n¢ When an external system reports a duplicate, the integration code should find the\nrelated entry in the MessageHistory table and report the duplicate\n\n¢ The only effect this has is incrementing the MessageHistory entry's DuplicateCount integer\n\n--- ch11/lesson-16/slide-22.png ---\n| Reporting messages without responses\n\n* Check the Message table with:\n* Batch process, or\n* Database monitoring tool\n\n¢ Evaluate the cause and handle the\nresolution\n\n¢ Alert via email, activity, flag entry etc.\n\n© FagoverduetegotRepontsBatch gs\n\n16\nun\nae\n19\n20\na\n22\n23\nPy\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n\n39\n40\na\n\n‘class FlagQverdueLegalReporteBarch extends BatchProcessBase (\nconstruct) ( super (BatchProcessType. TC_FLAGOVERDUELEGALREPORTS) }\n\noverride function\n\n‘Transaction. rundithNevBundle(\\bundle -> {\nprint (\"Starting Flag Overdue Legal Reports batch process\")\n\nvar thresholdTine = DateUtil.addSeconds(DateUtil.currentDate(), -15)\n\nvar messageQuery = Query.nake (Message)\nmessageQuery.compare(\"SendTine\", LessThan0rEquals, thresholdTine)\nmessageQuery.compare(\"DestinationID\", Equals, 15)\n\nvar resultsbj = nessageQuery.select()\n\nge An resultedb3) (\n\nfor (currenties:\nvar relatedc?\n\n‘aBContact)\n\nAf (!relavedcontact.PlagBntries.hasMatch (\\currentEntry ->\ncurrentEntry.Reason == FlagEntryReason.1C OVERDUE LEGAL REPORT) {\n\nnew FlagEnery()\nnewEntry.Plagbate = gw.api-util.DaceUtil. currentDate()\nnewEntry.Reason = FlagEntryReason. TC _OVERDUE_LEGAL REPORT\nrelatedContact .addToFlagEntries (newEntry)\nnunberofContacteWithOverdueReportet+\n\n--- ch11/lesson-16/slide-23.png ---\nConfigure message acknowledgment\nmechanisms\n\n--- ch11/lesson-16/slide-24.png ---\n| Synchronous acknowledgement — Transport plugin Gi\n\n— var ackCode = bankAPI.verifyAccount (aMessage.SenderRefID, transformedPayload, accNumber)\n\nswitch (ackCode) {\ncase \"00!\n\n25 aMessage.reportAck()\n(aMessage.MessageRoot as BankAccount) .IsVerified = VerificationStatus.7C_INVALID\n\n=P so aMessage.reportError (ErrorCategory.7C_PAYLOAD_ FORMAT)\nbreak\ndefaul|\n\naMessage.reportAck()\n(aMessage.MessageRoot as BankAccount) .IsVerified = VerificationStatus.7C VERIFIED\nbreak\n\n}\n\nThe code can be found in the BankAccountVerificationTransport plugin send method\n\n--- ch11/lesson-16/slide-25.png ---\n| Asynchronous acknowledgement - Web service API Gi\n\n¢ External system replies\nusing a published web\nservice API\n\n« MessagingToolsAPI , or\n* CustomAPI\n\n« Provides a message\nacknowledgement\n\n* Positive acknowledgement\n* Report external error\n¢ Duplicate\n\n© MessagingToolsAPigs\n\nack v\nvs SOAPException\n\n@rhrows (WeiduthenticationException, \"if there are permission/authentication issues\")\n@throws (ILlegalArgumentException, “if ack is invalid\")\n\nFe ocessing was\nfunction ackMessage(ack : Acknowledgement) : boolean (\nAf (ack == mull || ack.MessageID <= 0) {\nthrow new IllegalArgunentExce|\n)\nreturn getDelegate() .ackMessage( ack )\n)\n\non (\"Acknowledgement paraneter is required\")\n\n--- ch11/lesson-16/slide-26.png ---\n| Asynchronous acknowledgement — Reply plugin (1) Gi\n\npackage trainingapp.deno.messaging\n\n* initTools method\n+ Executed during reply\n\notase implements MessageReply, MessageLi\nplugin instance startup, var finder: MessageFinder\nhelpful in processing var dest\n\nvar le 1 String\n\nasynchronous replies\n\nfort QueueReceiver = null\n\"entitychangereplies\"\n\n+ MessageFinder static final var _MESSA: \"REQUEST MESSAGE_OK”\nstatic final var _MESSA‘ “REQUEST_MESSAGE_DUPLICATE”\nstatic final var _MESSAGE_IV REQUEST _MESSAGE_INVALID\"\n\n+ Finds the message to be\nacknowledged based on lbackHandler, messagePinder: MessageFinder) {\nunique identifier\n\n* Typically SenderReflD and DestinationlD\n¢ PluginCallbackHandler\n+ Provides transactional context for:\n+ Acknowledging the message\n\n+ Any additional entity data changes\n\n--- ch11/lesson-16/slide-27.png ---\n| Asynchronous acknowledgement — Reply plugin (2)\n\no override function onMessage (jmsMessage: javax.jms.Message) {\nif (jmsMessage typeis TextMessage) (\ntry (\n\n_handler.execute(\\-> {\nvar aMessage = finder. findBySenderRefID(_senderRefID, _destinationID)\n\nif (aMessage == null || jmsMessage.getStringProperty(_MESSAGE_DUPLICATE) .HasContent || aMessage.AckCount > 0) {\nvar aMessageHistory = finder. findHistoryBySenderRefID(_senderRefID, _destination!D)\n\nnull) {\n\nvar currentTransaction = Transaction.getCurrent()\n\naMessageHistory = currentTransaction.add (aMessageHistory)\n\naMessageHistory.reportDuplicate()\n\nif (aMessageHistory\n\nFd\n\n--- ch11/lesson-16/slide-28.png ---\nAsynchronous acknowledgement — Reply plugin (3) Gi\nReply plugin — part three\n\nif (aMessage != null && aMessage.Ackcount == 0) {\nif (jmsMessage.getStringProperty(_MESSAGE_INVALID).MasContent) {\naMessage.reportError ()\n}\nif (jmsMessage.getStringProperty(_T7EMP_UNAVAILABLE).HasContent) {\naMessage.reportError (typekey.ErrorCategory.TC_NO_CONNECTION)\n}\nif (jmsMessage.getStringProperty (_MESSAGE_OK).MasContent) {\naMessage.reportAck ()\n}\n)\n»\n} catch (throwable : Exception) (\nthrowable.printStackTrace ()\n}\n—> jmsMessage. acknowledge ()\nU\n\n--- ch11/lesson-16/slide-29.png ---\nDeploy code changes\n\n¢ New reply plugin class\n¢ New or modified plugin registry\n\n¢« Newor modified destination\n\nGy Tools VCS Window Help\n\nD> Run ‘Server’ Shift+F10\n186, Debug ‘Server’ Shift+F9\n¥E Run ‘Server’ with Coverage\n\nD Run... Alt+Shift+F10\n& Debug... Alt+Shift+F9\n\\m Attach to Local Process...\n\n[> Edit Configurations...\n\nBl import Test Results >\nI Stop ‘Server’ Ctrl+ F2\n\nGi\n\n¢ Modified reply plugin class\n\nBYE Tools VCS Window Help\nD> Run ‘Server’\n\nG& Debug ‘Server’\n\nW Run ‘Server’ with Coverage\nD Run...\n\n€ Debug...\n\n\\q Attach to Local Process...\n[> Edit Configurations...\n\n2] Import Test Results\n\nIl Stop ‘Server’\n\nEP show Running List\n\nStop Background\n\nChanged C\n\n--- ch11/lesson-16/slide-30.png ---\n| Demonstration G\nAsynchronous acknowledgment scenarios\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-16/slide-32.png ---\nQuestion\n\n_- — What is a messaging acknowledgement from an external system?\n\n¢\n¢\n¢\n\nSeo e Soe esses see see\n\n--- ch11/lesson-16/slide-33.png ---\nAnswer\n\nan What is a messaging acknowledgement from an external system?\n\n¢\n¢\n\nAmessaging acknowledgement is Guidewire's process for interpreting a messaging\nresponse from an external system.\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-16/slide-34.png ---\nQuestion\n\n_— — Whatare the possible ways Guidewire can interpret an external system's\n\na response to a message?\n\n¢\n\nSeo e Soe esses see see\n\nGi\n\n--- ch11/lesson-16/slide-35.png ---\nAnswer\n\n_- — Whatare the possible ways Guidewire can interpret an external system's\nY response to a message?\n¢\n\nGuidewire can interpret an external system's response, if one exists, as a positive\nacknowledgement (ACK), negative acknowledgment (NACK), or duplicate.\n\nSoo eS eee soe ese ese\n\nGi\n\n--- ch11/lesson-16/slide-36.png ---\nQuestion\n\n_— — Under what three circumstances is an entry added to the\n: MessageHistory table?\n\n¢\n¢\n\nSeo e Soe esses see see\n\n--- ch11/lesson-16/slide-37.png ---\nAnswer Gi\n\n_— — Under what three circumstances is an entry added to the\nPa MessageHistory table?\n¢\n\nAmessage is added to the message history table when a message is positively\nacknowledged, skipped, or retried. For the first two, the message is removed entirely\nfrom the Message table. For the third, a copy of the original message remains in the\nMessage table.\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-16/slide-38.png ---\nQuestion\n\n,— — Under what circumstances are acknowledgements processed:\n\n¢\no A) By the transport plugin?\n\nB) By the reply plugin?\n\nC) Without involvement from any plugin?\n\nSeo e Soe esses see see\n\n--- ch11/lesson-16/slide-39.png ---\nAnswer Gi\n\n,— — Under what circumstances are acknowledgements processed:\n\n7\n,\n¢ A\n\nB\nCc\n\nBy the transport plugin?\n\nBy the reply plugin?\n\nwv\n\nWithout involvement from any plugin?\n\nA) When the reply is received synchronously.\n\nB) When the reply is received asynchronously through a listener or polling\nmechanism.\n\nie)\n\nWhen the reply is received asynchronously by an external system call to an API.\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-16/slide-40.png ---\nQuestion\n\n_- — When should you use each of the following methods?\n¢\n\no A) aMessage.reportError(retryTime)?\n\nB) aMessage.reportError(errorCategory)?\n\nSeo e Soe esses see see\n\n--- ch11/lesson-16/slide-41.png ---\nAnswer Gi\n\n,- — When should you use each of the following methods?\n¢\n\n“ A\n\nB\n\naMessage.reportError(retryTime)?\n\naMessage.reportError(errorCategory)?\n\nA) When the message needs to be retried and the message has not reached its\nmaximum number of retries.\n\nB) When the message needs to be retried, but the message has reached its\nmaximum number of retries.\n\nSoo eS eee soe ese ese\n\n--- ch11/lesson-16/slide-42.png ---\nLesson\nobjectives\nreview\n\n¢ Describe messaging acknowledgement\n\nIdentify various messaging acknowledgement\nmechanisms\n\nDescribe how a messaging error is handled\nUse the administration screens to view the\nstatus of a message and manipulate it\nmanually\n\n--- ch11/lesson-16/slide-43.png ---\n| Student exercise\n\nConfigure synchronous acknowledgment\n\n--- ch11/lesson-17/slide-01.png ---\nAuthentication\n\n--- ch11/lesson-17/slide-02.png ---\nLesson\nobjectives ¢ Describe the process for Guidewire user,\n\nwebservice, and database authentication\n* Create plugins for Guidewire user,\nwebservice, and database authentication\n\n--- ch11/lesson-17/slide-03.png ---\n| Authentication scenarios Gi\n\n45 &\n\n—_— User\n\n== —\n\nGuidewire Guidewire & External\nSystem\n\nBe\n\nDatabase Application\n\nSOAP Web Service\n\n¢ User Authentication ve\n\n¢ User logs into a Guidewire application via login page\n* SOAP Web Service API Authentication\n\n« External system user via web service API\n* Database Authentication\n\n* Database connection requires username and password\n\n--- ch11/lesson-17/slide-04.png ---\nUser authentication\n\n--- ch11/lesson-17/slide-05.png ---\n| Default user authentication flow G\n\nExternal\nWeb browser Application Server Directory\n\nDefaultAuthentication\n\nAuthentication SourceCreatorPlugin\n\nGuidewire Source object\n\nApplication External service\n| e Server requests authentication verifies credentials\n\nHie or gl —0\n\nDatab: ifi dential:\natabase verifies credentials Li\n\nDefaultAuthentication\nServicePlugin\n\nGuidewire\ndatabase\n\n--- ch11/lesson-17/slide-06.png ---\n| Authentication Source Creator plugin Gi\n\nGuidewire TrainingApp Key value ey ys\na are L tte NS8\n— S33 NNNGF\n\nNYP Ya\n\nWeb Form Login Authentication Source Authentication Source\nCreator plugin\n* Receives user authentication * Converts user credential\ninformation information to an Authentication\n\n* Single sign-on credential (SSO) Source object\n\n* Client certificate + A structured credential used by the\nAuthentication Service plugin\n+ Username and Password key value pair . ; oo\n¢ All Guidewire applications use the\nAuthentication source creator\n\npluain by default\n\n+ Example: Web Form Login\n\n--- ch11/lesson-17/slide-07.png ---\n| Authentication Service plugin\n\nGi\n\n2, ay\nSoS\nRS\nNr ay @g—oo— “é£\nS307 Lg, _——\ne\nAuthentication Source Authentication Guidewire\nService plugin Application\n\n¢ Determines whether to permit a user to log in\n* Typically validates a user credentials using\n« An external system such as MS Active Directory or LDAP\n\n* Guidewire database\n¢ Other data store, internal or external, for user credentials\n\n--- ch11/lesson-17/slide-08.png ---\nUse case G\n\n¢ User logs into a Guidewire 1. Create custom Authentication Source\napplication via login page Creator plugin\n\n¢ Authenticate users based on 2. Create custom Authentication\nusername and password provided Service plugin\n\n* Create custom plugins for user 3. Register the plugins\nauthentication\n\n4. Deploy the changes\n\n--- ch11/lesson-17/slide-09.png ---\n| Create custom AuthenticationSourceCreatorPlugin [Fj\n\n1 package trn.ta.plugin.userauthentication\n\nuses gw.plugin.security.AuthenticationSource\n4 uses gw.plugin.security.AuthenticationSourceCreatorPlugin\nuses gw.plugin. security.UserNamePasswordAuthenticationSource\nuses javax.servlet.http.HttpServletRequest\n\nclass CustomAuthenticationSourceCreatorPlugin implements AuthenticationSourceCreatorPlugin {\n\na a\n\n—pP io ef override function createSourceFromHTTPRequest (request : HttpServletRequest) : AuthenticationSource {\nCG 11 var username = request.getAttribute (\"username\") as String\n—_\n\n12 var password = request.getAttribute (\"password\") as String\n1 return new UserNamePasswordAuthenticationSource (username, password)\n\n--- ch11/lesson-17/slide-10.png ---\n| Create custom AuthenticationServicePlugin Gi\n\n1 package trn.ta.plugin.userauthentication\n\nuses gw.plugin.security.*\n4 uses javax.security.auth. login. FailedLoginException\n\nclass CustomAuthenticationServicePlugin implements AuthenticationServicePlugin {\n\nprivate var handler : AuthenticationServicePluginCallbackHandler = null\n\n'\n=\n\noverride function authenticate (source : AuthenticationSource) : String {\n/R e edentials cation S\n\nif (!(source typeis UserNamePasswordAuthenticationSource)) {\nthrow new IllegalArgumentException (\"Invalid Authentication Source type\")\n\n-\n\nvar castSource = source as UserNamePasswordAuthenticationSource\n7 var username = castSource.Username\nvar password = castSource. Password\n\nc\n\n1rd\n\n--- ch11/lesson-17/slide-11.png ---\n| Create custom AuthenticationServicePlugin (conimey [Fj\n\nif (this. handler ull) {\nthrow new AuthenticationException(\"Callback handler not set\")\n}\nvar userPublicID = this._handler. findUser (username)\nif (userPublicID == null) {\nthrow new FailedLoginException(\"Bad user name: \" + username)\n}\nvar returnCode = this. handler.verifyInternalCredential(userPublicID, password)\nif (returnCode == CredentialVerificationResult.5AD USERID) {\nthrow new FailedLoginException(\"Bad user name: \" + username)\n} else if (returnCode == CredentialVerificationResult.#AIT_TO_RETRY) {\nthrow new MustWaitToRetryException(\"Still within the login retry delay period\")\n} else if (returnCode == CredentialVerificationResult.CREDENTIAL_LOCKED) {\nthrow new LockedCredentialException(\"The specified user has been locked\")\n} else if (returnCode CredentialVerificationResult. PASSWORD MISMATCH) {\nthrow new FailedLoginException(\"Bad password for user: \" + username)\n} else {\nreturn userPublicID\n\noverride property set Callback (callbacktiandler : AuthenticationServicePluginCallbacktiandler) {\n_handler = callbackHandler\n}\n\n--- ch11/lesson-17/slide-12.png ---\n| Register the plugins Gi\n\nProject : ~ I+ | dp AuthenticationServicePlugin.gwp\nYM configuration C:\\GW10\\TrainingApp\\mod mfiguretiOAName: —_AuthenticationServicePlugin\nv Cheong\n> (Déntity Names Interface:\nCY Bttensions += Gosu Class: _trn.ta.plugin.userauthentication.CustomAuthentici\n9 Localizations\nP Messaging\n[9 Metadata Server:\n(B Page Configuration\nPlugins\nY Dibregistry\n1 AuthenticationServicePlugin.gup S\n& AuthenticationSourceCreatorPlugin.gwp\n\nEEN environment:\n\ncvvvve\n\nCO Disabled\n\nParameters: Name Value | Environment| _Server_| 4\n\n* The plugin registry exists under\n* config.Plugins.registry\n¢ Pre-defined plugins will already have a plugin registry entry\n+ Double click an existing entry to edit it\n+ For other types of plugins, such as messaging plugins, you may need to create a new registry entry\n\n+ Right click on the registry node and select New > Plugin if you need to create a new registry entry\n\n--- ch11/lesson-17/slide-13.png ---\n| Deploy the plugin and code\n\n¢ New Gosu plugin class\n\nGi\n\n¢ Modified Gosu plugin class\n¢« Newor modified plugin registry file\n\n[ER foots vcs Window Help\n\n3 D Run ‘Server’\nEYE Tools VCS Window Help 8 Debug ‘Server’\niD Run ‘Server’ Shift+F10 ¥ Run ‘Server’ with Coverage\n86 Debug ‘Server’ Shift+F9 D Run...\nWE Run ‘Server’ with Coverage WE Debus...\nD Run... Alt+Shift+F10 7 Attach to Local Process...\nWE Debug... Alt+ Shift+F9\n\n[> Edit Configurations...\nAy Attach to Local Process... B] Import Test Results\n[> Edit Configurations... Il Stop ‘Server’\n\n2] Import Test Results > EF show Running List\n\nSto\n\n--- ch11/lesson-17/slide-14.png ---\nSOAP Web service API\nauthentication\n\n--- ch11/lesson-17/slide-15.png ---\n| Default SOAP web service API authentication flow [5\n\nExternal\n\nApplication Server Directory\n\nDefaultWebservices\nAuthenticationPlugin\nISOAP Web Service ey\n\nL934\n\nExternal\nSystem\n\n—\n\noa\n6 Li\nDefaultAuthentication\nGuidewire ServicePlugin\n\nDatabase\n\n--- ch11/lesson-17/slide-16.png ---\n| SOAP Webservices Authentication plugin Gi\n\n&,—__—f3_-\n\naf eS\nWeb Service Webservices Authentication\nAuthentication plugin Service plugin\n\n¢ For web services that require permissions\n* Handle the name/password authentication for a user connecting to SOAP web services\n\n* Calls the registered implementation of the Authentication ServicePlugin\n\n+ Never call a Guidewire web service from within the Authentication Service plugin — it will create an\nendless loop\n\n¢ Aregistered and enabled version of the plugin is required otherwise web services\nare unable to authenticate\n\n--- ch11/lesson-17/slide-17.png ---\n| Custom We\n\nset\n\not\n\nbservicesAuthenticationServicePlugin [5\n\npackage trn.ta.plugin.userauthentication\n\nuses gw.plugin.security.*\nuses gw.util.Pair\nuses gw.xsd.guidewire.soapheaders.Authentication\n\nclass CustomiebservicesAuthenticationPlugin implements WebservicesAuthenticationPlugin {\noverride function authenticate(context : WebservicesAuthenticationContext) : User {\n\nvar user : User = null\nvar authMethods = new ArrayList<AuthenticationMethod>()\n\nvar headersFromEnvelope = context .RequestSoapHeaders\nif (headersFromEnvelope != null) {\nfinal var auth = headersFromEnvelope.get$Child (Authentication)\nif (auth != null ce fauth.issNil()) {\nauthMethods.add (new UsernamePasswordAuthenticationMethod() {\nprotected override property get UsernamePassword() : Pair<String, String> {\nreturn new Pair<String, String>(auth.Username, auth. Password)\n\nAf (JauthMethods.isEmpty()) {\nuser = authMethods.get (0) .getUser()\n}\n\nreturn user\n\n--- ch11/lesson-17/slide-19.png ---\n| Database Authentication plugin Gi\n\n== LL.\nGuidewire Database Enterprise Database\napplication Authentication plugin\n\n¢ Enterprise database connection requires a database username and password as\npart of jdbcURL\n\n* database-config.xml in <dbcp-connection-pool /> element\n+ Password file\n¢ Plugin can supply database authentication credentials for Guidewire database\n\n* Guidewire application requires connection to Guidewire Database\n\n--- ch11/lesson-17/slide-20.png ---\nDatabase Authentication plugin example Gi\n\n1 package trn.ta.plugin.dbauthentication\n\nuses gw.plugin.dbauth.DBAuthenticationPlugin\nuses gw.plugin.dbauth.UsernamePasswordPair\nuses javax.naming.Context\n\nuses javax.naming.InitialContext\n\n—p> 6 class Jr gin implements DBAuthenticationPlugin {\n\n—pP 10 of override function retrieveUsernameAndPassword(dbName : String) : UsernamePasswordPair {\n11 var initCtx = new InitialContext()\n12 var envCtx = initCtx.lookup(\"java:comp/env\") as Context\n13 var username = envCtx.lookup(\"jdbc/\" + dbName + \"/username\") as String\n\nvar password = envCtx.lookup(\"jdbc/\" + dbName + \"/password\") as String\n\nreturn new UsernamePasswordPair(username, password)\n\n--- ch11/lesson-17/slide-21.png ---\n| Deploy code changes\nRestart Server\n\n¢ New authentication plugin class\n\n¢« Newor modified plugin registry file\n\nGt Tools VCS Window Help\n\nD> Run ‘Server’ Shift+F10\nYE Run ‘Server’ with Coverage\n\nD Run... Alt+Shift+F10\nWE Debug... Alt+Shift+F9\n\\y Attach to Local Process...\n\n[PP Edit Configurations...\n\nBl import Test Results >\nI Stop ‘Server’ Ctrl+F2\n\nGi\n\n¢ Modified authentication plugin class\n\nTools VCS Window Help\nD> Run ‘Server’\n\n%& Debug ‘Server\n\nWE Run ‘Server’ with Coverage\n\nD Run...\n\nW Debus...\n\n2m Attach to Local Process...\n\n[> Edit Configurations...\n\n] Import Test Results\n\nI Stop ‘Server’\n\nEY Show Running List\n\nSto\n\n--- ch11/lesson-17/slide-22.png ---\n| Demonstration G\n\nUser Authentication Flow\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-17/slide-24.png ---\nQuestion\n\n__ The user, API, and database authentication mechanisms reference which\n7’ plugin(s)?\now A) AuthenticationSourceCreatorPlugin\nB) AuthenticationServicePlugin\nC) WebservicesAuthenticationPlugin\n\nD) DBAuthenticationPlugin\n\nSe Soe Se sees esse ese\n\nGi\n\n--- ch11/lesson-17/slide-25.png ---\nAnswer\n\n__ The user, API, and database authentication mechanisms reference which\n7’ Plugin(s)?\n\n“ A\nB\nC)\nD\n\nz=\n\ngY\n\nCc)\nD\n\nz=\n\nSS ee eee ee eae\n\nAuthenticationSourceCreatorPlugin\nAuthenticationServicePlugin\nWebservicesAuthenticationPlugin\n\nDBAuthenticationPlugin\n\nUser\n\nUser and API\nAPI\nDatabase\n\nGi\n\n--- ch11/lesson-17/slide-26.png ---\nLesson\nobjectives ¢ Describe the process for Guidewire user,\n\nreview webservice, and database authentication\n* Create plugins for Guidewire user,\nwebservice, and database authentication\n\n--- ch11/lesson-17/slide-27.png ---\ni Student exercise\n\nConfigure external authentication\nservice\n\n--- ch11/lesson-18/slide-01.png ---\nBatch Processes\n\n--- ch11/lesson-18/slide-02.png ---\nLesson\nobjectives\n\n¢ Describe the role batch processes play in\nGuidewire applications\n\n¢ Implement custom batch processes\n\n* Schedule batch processes\n\n¢ Describe some best practices that can be\nimplemented when updating a database ina\nbatch process\n\n--- ch11/lesson-18/slide-03.png ---\nBatch process overview\n\n--- ch11/lesson-18/slide-04.png ---\ni What is a batch process?\n\nBl\n\nExchange rate Exchange Rate\nSystem\n\n© _ +\n\n¢« Abatch process is a background process that performs tasks independent of a\nuser\n\n* Typically, a batch process runs on a periodic schedule\n* Two type of batch process\n« Predefined\n\n* Custom\n\n--- ch11/lesson-18/slide-05.png ---\ni Types of batch processes Gi\n\n* Configured in the base application * Created by an integration developer\n\n* Examples: ¢ Allows for periodic scheduling of work\n+ ContactManager: Duplicate Contacts Finder beyond what the base application provides\n* ClaimCenter: Claim exception + Is fully configurable\n+ PolicyCenter: Policy renewal start * Can include triggers to integration points\n\n* BillingCenter: Account inactivity\n\n* Developers can schedule or manually run\neach process but cannot directly configure\nwhat each does\n\n+ Some processes can be indirectly configured\nbecause they trigger configurable elements\n\n--- ch11/lesson-18/slide-06.png ---\ni Batch process execution options\n\n* Common ways to execute a batch processes\n\n+ Periodically based on a schedule (the most\ncommon use)\n\n+ Immediately from the Internal Tools UI\n+ From an API call such as a web service or\ncommand line\n* Every execution option is not necessarily\nconfigured for every process\n+ Duplicate Contacts Finder batch process:\n* Can be run from the UI and scheduled\n\n+ Not configured to be executed from an API but\nevery batch process that is UI runnable is inherently\n\nAPI runnable\n\nGi\n\nBbatchProcessTypetts\n\n[db typecode v ¥v VshowAlly) og = EE) BatchProcessTypetti\nElement Code Name Priority\n\n‘AB Geocode Writer a\nDuplicate Contacts Finder -1\nBatchProcessTypeUsage\n\nABGeocode\neContacts\n\n> typecode\n\n\\ typecode Dupl\ncategory uiRu\ncategory Schedulable\n\nVerifyMinimumCriteria\n\nBatchProcessTypeUsage\nVerify Minimum Criteria 1\n\n[Bi BatchProcessTypeUsagetti\n\n‘Thisis a reed-only file.\n(hy\n\n--- ch11/lesson-18/slide-07.png ---\ni Batch processes and messaging Gi\n\n¢ You can use Guidewire messaging to ProcessHistory (av_processhistory) (delegates to EventAware, KeyableBean)\n\n¥ Description\n\nlaunch external processes during a process cn heey |\nAttributes: Final’, Keyed , Sourceable\nbatch process Messaging Events: The application will generate these events for this entity,\n+ rocestistn ed\n* Asa batch process starts, the application + ProcessHistoy Removed\nfires a ProcessHistoryAdded event Integration programmers can write Event Fired rules to perform actions on these events. Refer to the\n\nIntegration Guide for the complete list of events for all entities. Remember to configure a new or existing\n‘messaging destination in Studio to listen for desired events. in ils on all fel\n\n« As the status of the batch process changes,\n\nthe application fires a NEES\n\nProcessHistoryChanged event Fields\n+ The CompleteDate property contains the Toe a tm process anelaets\ndatestamp in a datetime object Process ype type key to BatchProcessType rcnnun” wit\n\n‘The process this entry refers to.\nRanToCompletion bit wast)\n¢ Events can be used to trigger additional Whether or poo oom ran to completion, or failed or was interrupted.\n: StartDate datetime — wuss)\nprocessing The date this process was actualy started\n\n--- ch11/lesson-18/slide-08.png ---\nRunning batch processes\n\n--- ch11/lesson-18/slide-09.png ---\ni Batch Process Info Ul screen Gi\n\nDefault >\n\n——\nFilter the displa y\nBatch Process Info ey Schedulable\n\n\"| Runnable\n\n3\n\nBatch Process > Description > LastRun Next Scheduled Run > Schedule ron-$ MH DOM M DOW\n\n« Ulscreen used to run batch processes on demand and view additional status\ninformation\n\n* To view Server Tools, pressALT+SHIFT+T\n¢ Torun a batch process manually, click Run\n« Batch process execution begins immediately\n\n¢ While batch process is running, the Last Run Status column lists the process as Running\n\n--- ch11/lesson-18/slide-10.png ---\ni Chart and History cards Gi\n\nBatch Process Info\n\nProcesses: Default +\n\nee\nLastRun > Next Scheduled Run > Schedule Cron -SMH DOM M DOW\n\nBatch Process.\n\nTotal\n\nTotal failed\n\nChart | History operations operations\n\nal > B-\n\nStart Requested > Started ‘Completed Scheduled | Server Description Ops > Failed =  FailureReason\n\n(09/27/2018 9:17 PM No rchiriboga-p. 1 ° ‘chert atone\n\n(09/27/2018 9:16 PM No rehiriboga-p 1 ° bes z\n09/27/2018 9:16 PM No chiriboga-p 1 ° FAY\n09/27/2018 9:10PM 09/27/2018 9:10PM No chinboga-p 1 ° me\n\n=|\n\n¢ Detailed information about selected batch process\nappear below list of batch processes\n\n* Chart and History\n\n--- ch11/lesson-18/slide-11.png ---\ni Scheduling a batch process Gi\n\n* Defines batch process schedules\n\nlah scheduler-configam!\n\n* configuration.config.scheduler\n\n* <ProcessSchedule/> element\ndescribes which batch process to\nexecute and when\n\n* <CronSchedule/> child element describes ; “\nwhen process runs <ProcessSchedule process=\"DuplicateContacts\">\n\n<CronSchedule dayofmonth=\"?\" dayofweek=\"SUN\" hours=\"12\"/>\n. ProcessScheaule>\n+ Define schedule attributes ‘ De . -\n<ProcessSchedule process=\"PurgeFailedMorkItens\">\n<CronSchedule dayofmonth=\"1\" hours=\"1\"/>\n\n¢ Restart server to deploy changes <jProcessScetale>\n\n<ProcessSchedule process=\"ProcessiistoryPurge\">\n<CronSchedule dayofmonth=\"3\" hours=\"1\" minutes=\"30\"/>\n</ProcessSchedule>\n</Schedule>\n\n--- ch11/lesson-18/slide-12.png ---\ni Scheduled batch processes\n\nBatch Process Info\n\nBREE rcicsh J dovnload suspend schedver iS\n\nBatch Process Description > ‘Action\nFinds new duplicate contacts and creates a\nDuplicate Contacts Finder browsable ist of aid contacts. Len]\n\n31 <ProcessSchedule process=\"DuplicateContacts\">\n\ndayofmonth=\"?\"_dayofweek=\"SUN\" hours=\"12\"/>\n\n<CronSchedule\n</ProcessSchedule>\n\n* Once scheduled, the batch process\nUI screen shows\n\n* Cron schedule criteria\n« Next Scheduled Run time\n\nGi\n\nBe\n\nLastRun ¢ Next Scheduled Run > Schedule Cron-S MHDOMM DOW\nDownload story J CREE sion | 012?\" SUN\n\n*« S (seconds) =0\n\n« M (minutes) = 0\n\n¢ H (hours) = 12\n\n¢ DOM (dayofmonth) = ?\n\n¢ M (month) = *\n\n*« DOW (dayofweek) = SUN\n\n--- ch11/lesson-18/slide-13.png ---\ni Running a batch process from an API Gi\n\n*« Command line syntax\n\nmaintenance_tools -startprocess <processName> -user <user> -password\n<password> -server <server>\n\ne Web service API syntax\n\n* processID = maintenanceToolsAPI.startBatchProcess (“processName”)\n\nuses gw.webservice.ab.abl000.MaintenanceToolsAPI\n\nvar maintenanceToolsAPI = new MaintenanceToo1sAPI ()\nvar processID = maintenanceToolsAPI.startBatchProcess (\"DuplicateContacts\")\n\n--- ch11/lesson-18/slide-15.png ---\ni Custom batch process architecture Gi\n\nswitch (type):\n\nFlagOverdue\n\nActivityEsc LegalReportsBatch\nArchive On\nDataDistribution At Ie\n\nFlagOverdueLegalReports ©\n\nProcesses\nPlugin\n\n¢« Acustom batch process is implemented by a Gosu class called by the\nProcessesPlugin\n\n--- ch11/lesson-18/slide-16.png ---\nUse case Gi\n\n¢ Flag contacts that have overdue 1. Add BatchProcessType typecode\nlegal reports ¢ Define typecode categories to specify\n\n* Batch process must execute the batch process execution options\nautomatically on a schedule every 2. Create custom batch process class\nday at 3am EST 3. Configure ProcessesPlugin class\n\n. wet ps ee UlorbyAPI on 4. Configure the IProcessesPlugin\n\nregistry entry\n\n5. Configure the scheduler-config.xml\nfile\n\n6. Deploy changes\n\n--- ch11/lesson-18/slide-17.png ---\ni Add BatchProcess Type typecode\n\nBatchProcessType.ttx\nmJcategoy~| [) Y — [Vshowallv) we =\nElement Code Name Value\nY typecode FlagOverdueLegalReports Flag Overdue Legal Reports 100 code UlRunnable\ncategory ‘APIRunnable BatchProcessTypeUsage\n\nBatchProcessTypeUsage\n\ncategory Schedulable\n\nUlRunnable\n\nDeferredUpgradeTasks\n\nProcessHistoryPurge\n\n1\n1\nBulkPurge 1\n1\n1\n\n> typecode\n\n> typecode\n\n¢ Add a typecode that represents the new batch process\n\n* Guidewire does NOT support modification of internal batch processes\n\nBuildingType Et\nBusinessType\nCatastropheType\nCharacterSet\nComponentType\nConsistencyCheckType\nContactBidiRe!\n\n¢ Add acategory of BatchProcessTypeUsage for each executable type\n\n--- ch11/lesson-18/slide-18.png ---\nCreate custom batch process class\n\n1 package trn.ta.batch. legalreport\n\nuses gw.api.database.Relop\nuses gw.processes.BatchProcessBase\n\n5 uses gw.processes.TerminatedException\nuses gw. transaction. Transaction\nuses gw.api.datebase.Query\nuses java.util.concurrent.TimeUnit\n\n—> class FlagOverdueLegalReportsBatch extends BatchProcessBase {\n12 super( BatchProcessType.TC_FLAGOVERDUELEGALREPORTS )\n2 }\n\n}\n\n*| override function requestTermination() : boolean {..\n\n| override function checkInitialConditions() : boolean {...}\n\n© override function doWork() {...}\n\n« Recommended naming convention:\n« Package: <company>.<app_code>.batch.<functional_area>\n\n* Class: <meaningfulName>Batch\n\n--- ch11/lesson-18/slide-19.png ---\ni checklnitialConditions method Gi\n\nclass FlagOverdueLegalReportsBatch extends BatchProcessBase {\nconstruct () { super( BatchProcessType.1C_FLAGOVERDUELEGALREPORTS ) }\n\n1s @f + override function requestTermination() : boolean {...}\n\nitialConditions() : boolean {\n\n* Application calls the method to determine whether to start a batch process\n\n¢ Used to determine if conditions are met to begin processing\n\n« Return true: doWork method will be called\n\n¢ Return false: only a history event will be written\n\n¢ Default: true\n\n--- ch11/lesson-18/slide-20.png ---\ni requestTermination method\n\n¢ The application may want to\nterminate a batch process,\nsuch as when...\n\n* The process is run from the Ul\nand the user clicks Stop 2s of\n\n* The process is run from the API 27\nand the stop process command\nis received\n\n* The application is shutting down\n\n¢ Handled by setting\nTerminateRequested\nproperty in code and used to\nexit any loops\n\nboolean {\n\noverride function requestTermination()\nsuper. requestTermination()\nreturn true by\n\n}\n\noverride function checkInitialConditions() : boolean {...}\n\noverride function doWork() {\nTimeUnit. SECONDS. sleep (15)\nif (TerminateRequested) {\n\nthrow new TerminatedException(\"Process terminated\")\n\nports = 0\n\nvar messageQuery = Query.make (Message)\nmessageQuery. compare (Message#DestinationID, Relop.Equals, 15)\nvar results0bj = messageQuery.select()\nfor (currentMessage in results0bj) {\nif (TerminateRequested) {\nthrow new TerminatedException (\"Process terminated\")\n}\n\n--- ch11/lesson-18/slide-21.png ---\ni Other methods and properties on BatchProcessBase\n\nGi\n\n* getDescription\n+ Retrieves the description of the current batch type\n\n* incrementOperationsCompleted\n\n+ Increments an internal counter for how many\noperations are complete\n\n+ Returns the current number of operations that are\ncomplete\n\n* incrementOperationsFailed\n\n* Increments an internal counter for how many\noperations failed\n\n* Call this method to track the progress of the batch\nprocess\n\n« Exclusive\n\n+ Determines whether another instance of this batch\nprocess can start while this process is running\n\n+ The base class implementation always returns true\n\n+ Set this property to false if you want to allow multiple\ninstances of this batch process to run in parallel.\n\n* OperationsExpected\n\n+ Set this once after determining number of items to\nbe processed\n\n+ Used to provide feedback in the UI for Ul Runnable\nProcesses\n\n--- ch11/lesson-18/slide-22.png ---\ni Configure ProcessesPlugin class\n\npackage trn.ta.batch\n\nuses gw.plugin.processing. IProcessesPlugin\nuses gw.processes.BatchProcess\nuses trn.ta.batch. legalreport. FlagOverdueLegalReportsBatch\n\nclass ProcessesPlugin implements IProcessesPlugin {\n\noverride function createBatchProcess(type : BatchProcessType, arguments : Object[])\nswitch(type) {\ncase BatchProcessType. 1C_FLAGOVERDUELEGALREPORTS:\nreturn new FlagOverdueLegalReportsBatch ()\ndefault:\nreturn null\n\n: BatchProcess {\n\n--- ch11/lesson-18/slide-23.png ---\ni Configure the IProcessesPlugin registry entry a\n\n* Create the plugin registry\n« config.Plugin.registry\n\nv Pi Plugins\nY Dib registry\n1@ AuthenticationServicePlugin.gwp\n\n* Specify the Plugin Bee\nName: |ProcessesPlugin\n\n« |ProcessesPlugin name\n\nInterface: IProcessesPlugin\n\n+ |ProcessesPlugin interface Cancel\n\n1@ lProcessesPlugin.gwp » |\n\n. Name [Pre Plugin\n* Configure the new plugin  “™\n\nInterface: IProcessesPlugin\n\nregistry\n\nGosu Class: _trn.ta.batch.ProcessesPlugin\n\nEnvironment:\n\n--- ch11/lesson-18/slide-24.png ---\ni Configure the scheduler-config.xml file Gi\n\n!-- Run every\n\n<ProcessSchedule process=\"FlagOverdueLegalReports\">\n<CronSchedule dayofmonth=\"?\"\ndayofweek=\"*\"\nhours=\"3\"/>\n</ProcessSchedule>\n\n¢ Open scheduler-config.xml file found under configuration.config.scheduler\n\n¢ dayofmonth - ? is used only for dayofmonth and dayofweek attribute and means\nwithout regard to this value\n\n¢ dayofweek -* means all values\n\n* hours - 3 means 3am using 24-hour clock\n\n--- ch11/lesson-18/slide-25.png ---\ni Deploy code changes\n\n¢ New Gosu plugin class\n¢ Modified plugin registry\n¢ New typelist typecode\n\n¢ Modified scheduler-config.xml file\n\ntlm Tools VCS Window Help\n\nD> Run ‘Server’ Shift+F10\n186, Debug ‘Server’ Shift+F9\nYE Run ‘Server’ with Coverage\n\nD> Run... Alt+Shift+F10\nWE Debug... Alt+ Shift+F9\n\nMy Attach to Local Process...\n[>> Edit Configurations...\n\nB] import Test Results >\n| Stop ‘Server’ Ctrl+F2\n\nGi\n\n¢ Modified Gosu plugin class\n\nGARY Tools VCS Window Help\nD> Run ‘Server’\n\n%& Debug ‘Server’\n\nW Run ‘Server’ with Coverage\nD Run...\n\n€ Debug...\n\n\\y Attach to Local Process...\n[> Edit Configurations...\n\n2] Import Test Results\n\nIl Stop ‘Server’\n\nEP show Running List\n\nStop Backgroun\n\nReload Changed CI\n\n--- ch11/lesson-18/slide-27.png ---\ni Updating the database in a batch process\n\nNo CurrentBundle for a batch process\n\nUse Transaction. runWithNewBundle(/ bundle ->{} , “user”) OF\nTransaction.newBundle ()\n\nIf you expect to update large numbers of rows:\nLarge number of rows is a relative term\nConsider using paging with regular commits\nKeep bundles size as small as possible\nBe careful about how you use accessors\n\nUse Query best practices\n* Do filtering at the database rather than in memory — let the DB do what it’s good at\n\n+ See Gosu Queries and Bundles and Database Transaction lessons for more information\n\n--- ch11/lesson-18/slide-28.png ---\ni Updating the database in a batch process Gi\n\nr\n\n¢ Problematic approach:\n\n* Two main problems:\n\n*« Memory\n\n+ Processing a possibly large\nqueryResult set\n\n¢ Bundle performance il\n\nuses gw.api.database. Query\nuses gw.transaction.Transaction\n\nTransaction. runWithNewBundle(\\bundle -> {\nvar queryObj = Query.make (ABContact)\nvar queryResult = queryObj.select()\nfor (€ in queryResult) {\n\nvar entityToModify = bundle.add(e)\n}\n2}\n\n+ Every new accessor drags an entity into the bundle\n\n+ And using accessors from those entities drag in more entities\n\n+ Bundles can grow very large\n\n--- ch11/lesson-18/slide-29.png ---\ni Abetter approach: Paging plus regular commits Gi\n\nuses com.google.common.collect.Iterables\nuses gw.api.database.Query\nuses gw.transaction.Transaction\n\nvar queryObj = Query.make(ABContact)\nvar queryResult = queryObj.select()\nqueryResult.setPageSize (10000)\n\nfor (entities in Iterables.partition(queryResult, 250)) {\nTransaction. runWithNewBundle(\\bundle -> {\nfor (€ in entities) {\nvar entityToModify = bundle.add(e)\n\n--- ch11/lesson-18/slide-30.png ---\ni Paging with modifications\n\nApp\nserver\n\n--- ch11/lesson-18/slide-31.png ---\ni Demonstration G\nCreate a custom batch process\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-18/slide-33.png ---\nQuestion\n\n_- — Whatare the three ways a batch process can be run? Which of the three\n\nPa is the most common?\n7\n\nSS ee eee ae eee\n\nGi\n\n--- ch11/lesson-18/slide-34.png ---\nAnswer Gi\n\n_- — Whatare the three ways a batch process can be run? Which of the three\n\nPa is the most common?\n7\n\nThree way to run a batch process are:\n* Scheduled\n¢ Run from the UI\n\n« Run from the web service API\n\nSee eee ee eae\n\nScheduled is the most common way to run a batch process.\n\n--- ch11/lesson-18/slide-35.png ---\nQuestion\n\n,- — When you add a new batch process typecode to BatchProcess Type,\n¢ why must you add one or more categories to the typecode?\n\n¢\n¢\n\nSS ee eee ae eee\n\nGi\n\n--- ch11/lesson-18/slide-36.png ---\nAnswer Gi\n\n,- — When you add a new batch process typecode to BatchProcess Type,\nPa why must you add one or more categories to the typecode?\n¢\n\nThe categories of a BatchProcessType typecode determines how the batch process\ncan be run (from the UI, scheduled, from the API, and/or in maintenance level).\n\nSee eee ee eae\n\n--- ch11/lesson-18/slide-37.png ---\nQuestion\n\n_- — When creating a custom batch process, do you need to implement the\n\nPa ProcessesPlugin or just modify it?\n¢\n\nSS ee eee ae eee\n\nGi\n\n--- ch11/lesson-18/slide-38.png ---\nAnswer Gi\n\n_- — When creating a custom batch process, do you need to implement the\nPa ProcessesPlugin or just modify it?\n¢\n\nFor PolicyCenter and ClaimCenter, the IProcessesPlugin file already exists in the base\napplication and you only need to modify the ProcessesPlugin class which implements\nthe IProcessesPlugin interface.\n\nFor BillingCenter and ContactManager, you need to create an IProcessesPlugin\nregistry file that implements the IProcessesPlugin interface in a new class.\n\nSee eee ee eae\n\n--- ch11/lesson-18/slide-39.png ---\nQuestion\n\n_- — Foracustom batch process, what method or methods require\n\nPa implementation?\n¢\n\nSS ee eee ae eee\n\n--- ch11/lesson-18/slide-40.png ---\nAnswer\n\n_- — Foracustom batch process, what method or methods require\nPa implementation?\n¢\n\nOnly the doWork method is required.\n\nSee eee ee eae\n\n--- ch11/lesson-18/slide-41.png ---\nQuestion\n\n,- — How does a batch process commit changes to the database?\n\n¢\n¢\n¢\n\nSS ee eee ae eee\n\n--- ch11/lesson-18/slide-42.png ---\nAnswer\n\n_- — How does a batch process commit changes to the database?\n¢\n\n¢\n¢\n\nThe code must create a new bundle using runWithNewBundle and add the entities to\nbe changed and committed to that bundle.\n\nSee eee ee eae\n\n--- ch11/lesson-18/slide-43.png ---\nLesson\nobjectives\nreview\n\n¢ Describe the role batch processes play in\n\nGuidewire applications\n\n¢ Implement custom batch processes\n\nSchedule batch processes\n\nDescribe some best practices that can be\nimplemented when updating a database ina\nbatch process\n\n--- ch11/lesson-18/slide-44.png ---\ni Student exercise\n\nCreate a custom batch process\n\n--- ch11/lesson-19/slide-01.png ---\nDocument Management\n\n--- ch11/lesson-19/slide-02.png ---\nLesson\nobjectives\n\n¢ Explain how to integrate an InsuranceSuite\n\napplication with an external Document\nManagement System (DMS)\n\nIdentify the plugins and methods that enable\nDMS integration\n\nImplement the plugins to support DMS\nintegration\n\nDeploy and configure DMS integration plugins\nDescribe the features and limitations of\nGuidewire’s default implementations of\ndocument storage functionality\n\n--- ch11/lesson-19/slide-04.png ---\ni Document Management System provides:\n\n* Document storage\n+ Document content\n+ The digital content of a document file\n+ Document metadata\n+ Date created, Date modified, Author(s)\n\n+ Tags, Categories, Title, Subject\n\nDocument services\nSearch and retrieval\nAdd and update\nIndexing\nVersioning\nWorkflow management\nSecurity\n\n--- ch11/lesson-19/slide-05.png ---\ni What is a Document?\n\n« Adocument is a digital file that is related to one or more\nobjects\n\n* Content is stored by a DMS\n* Metadata stored in DMS or Guidewire, or both\n\n* Documents are related to business objects\n\n+ Business objects vary by InsuranceSuite application\n\nC:) Claim\nis) .\nPolicy, Account\n@ Policy, Account, Producer\n\n--- ch11/lesson-19/slide-06.png ---\ni Content and Metadata\n\n* Content\n+ The content of a digital file\n+ Word, Excel, JPG, MP4, PDF, etc.\n« Metadata\n\n+ Attributes that describe and classify a document\n\n+ Name, Description, Section\n+ Document Type (MIME type)\n+ Related objects, Author, Recipient\n+ Inbound, Status, Security Type, Type, Hidden\n+ Represented by a Document entity in Guidewire\n\n+ If the application is configured such that Metadata is maintained in Guidewire\n\n--- ch11/lesson-19/slide-08.png ---\ni IDocumentContentSource plugin interface Gi\n\nOW) * Manages document content\n« May also manage document metadata based on:\n\n* Configuration of IDocumentMetadataSource plugin\ninterface and\n\n* Configuration of IDocumentContentSource plugin\ninterface addDocument method\n\n« No search capability\n\n--- ch11/lesson-19/slide-09.png ---\nIDocumentContentSource plugin interface\naddDocument(InputStream, Document): boolean\n\n+ Parameters\n\n+ An InputStream object, which is a new\ndocument as a stream of bytes\n\n+ ADocument object, which contains\ndocument metadata\n\n* Purpose\n+ Add new document content in the DMS\n\n+ Set metadata properties on the Document\nobject\n\n+ Such as DocUID and PublicID\n\n+ Properties that uniquely identify the content\ncorresponding to the Document entity\n\n+ If called with a null InputStream properties\nshould still be set\n\nReturns boolean\nControls how metadata is managed\n\nIf IDocumentMetadataSource plugin is not\nimplemented and enabled\n\n+ Must return false\n\n+ System saves the metadata in the Document\nentity\n\nIf IDocumentMetadataSource plugin is\nimplemented and enabled\n\n+ Return false if IDocumentMetadataSource\nplugin saves metadata\n\n+ Return true if IDocumentContentSource plugin\nsaves metadata\n\n--- ch11/lesson-19/slide-10.png ---\nIDocumentContentSource plugin interface Gi\n\nupdateDocument(Document, InputStream) : boolean\n\n+ Parameters\n\n+ An InputStream object, which is a\n\nreplacement document as a stream of bytes\n\n+ ADocument object, which contains\n\ndocument metadata\n\n* Purpose\n\n+ Update the contents of an existing\ndocument in the DMS\n\n+ Update metadata properties on the\n\nDocument object that represent the change\n\nSet DateModified, UpdateTime, and\nUpdateUser properties at a minimum\n\n* Returns boolean\n\n* Controls how metadata is managed\n\n+ If IDocumentMetadataSource plugin is not\nimplemented and enabled\n\nMust return false\n\nSystem saves the metadata in the Document\nentity\n\n+ If IDocumentMetadataSource plugin is\nimplemented and enabled\n\nReturn false if IDocumentMetadataSource\nplugin saves metadata\n\nReturn true if IDocumentContentSource plugin\nsaves metadata\n\n--- ch11/lesson-19/slide-11.png ---\nIDocumentContentSource plugin interface Gi\n\ntemoveDocument(Document) : boolean\n\n+ Parameters * Returns boolean\n\n+ ADocument object, which contains * Controls how metadata is managed\n\nd it metadata i\nlocument metadal + If IDocumentMetadataSource plugin is not\n\n* Purpose implemented and enabled\n* Logically or physically delete the content + Must return false\n* Optionally delete the metadata properties on + System saves the metadata in the Document\n\nthe Document object based on return value entity\n\n+ If IDocumentMetadataSource plugin is\nimplemented and enabled\n\n+ Return false if IDocumentMetadataSource\nplugin removes metadata\n\n+ Return true if IDocumentContentSource plugin\nremoves metadata\n\n--- ch11/lesson-19/slide-12.png ---\nIDocumentContentSource plugin interface Gi\ngetDocumentContentsInfo(Document, boolean) : DocumentContentsInfo\n\n« Parameters + Returns DocumentContentsInfo object\n\n+ ADocument object, which contains document metadata + Encapsulates document contents as an\n\n* boolean value InputStream\n\n+ If true, call to include content + Describes Content Response Type\n\n+ If false, call to retrieve just metadata * DOCUMENT_CONTENTS or URL\n\n* Purpose + Specifies MIME type\n\n+ Retrieve the contents of a document\n+ Uses DocUID property to retrieve content from DMS\n+ Uses publiclD if content is identified differently than metadata\n\n+ Any changes to Document entity are not persisted\n\n--- ch11/lesson-19/slide-13.png ---\nIDocumentContentSource plugin interface Gi\n\nisDocument(Document) : boolean\n\n* Returns boolean\n+ Return true if DMS system already contains\n. content corresponding to the appropriate\nPurpose fields on the Document entity\n\n* Parameters\n* ADocument object, which contains document metadata\n\n+ Check for the existence of a document in the DMS .\n+ Return false otherwise\n* Often uses DocUID or PublicID property\n\n--- ch11/lesson-19/slide-14.png ---\ni IDocumentMetadataSource plugin interface Gi\n\naa *« Manages document metadata\n« Unless managed by IDocumentContentSource plugin\n\n« Add / change / remove metadata for documents with\n°, s. or without content\n\n* Only ClaimCenter may have documents without content\n.\n“ * Supports search\n\n--- ch11/lesson-19/slide-15.png ---\nIDocumentMetadataSource plugin interface Gi\n\nsearchDocuments(DocumentSearchCriteria, RemotableSearchResultSpec) :\nDocumentSearchResult\n\n* Parameters * Returns a DocumentSearchResult object\n\n+ DocumentSearchCriteria object which defines + Contains a Document] collection\nthe search criteria to send to the DMS\n+ For each item in DocumentSearchResult, set\n\n+ RemotableSearchResultSpec object which properties as needed\n\ncontains sorting and paging information for the\nPCF list view * docuUID to the linked identifier in the external\nsystem\n\n* Purpose * Documentldentifier\n\n+ Return the set of documents in the DMS that\n\n\", pe * DMS (true/false)\nmatch the given search criteria\n\n--- ch11/lesson-19/slide-16.png ---\nIDocumentMetadataSource plugin interface Gi\nOther methods\n\n* retrieveDocument (String) : Document\n\n« Retrieve the metadata for a document from a DMS\n\n« Returns a Document object containing the retrieved metadata\n\nSet the DocUID of the returned document to the ID that was retrieved\n\nMust initialize the internal properties of the returned Document object by calling\nDocumentsUtilBase.initOriginalValues method\n\nMust call setRetrievedFromipMs method on the Document entity instance\n\n--- ch11/lesson-19/slide-17.png ---\nIDocumentMetadataSource plugin interface Gi\n\nOther methods (Continued)\n\n* saveDocument (Document)\n* Create or update the metadata for a Document to a DMS\n+ If IDocumentContentSource plugin methods addDocument or updateDocument return false\n+ Indicates they did not handle metadata\n+ Application calls the saveDocument method\n* removeDocument (Document)\n\n« Logically or physically delete document metadata\n\n--- ch11/lesson-19/slide-18.png ---\ni Other methods in both plugin interfaces Gi\n\n«Ifthe external DMS is available for the «Ifthe external DMS is available for the\ndesired actions desired actions\n+ From Gosu this is the InboundAvailable + From Gosu this is the OutboundAvailable\nproperty property\nIf true, the following methods can be called: «If true, the following methods can be called:\n+ Content methods + Content methods\n* addDocument * isDocument\n* updateDocument * getDocumentContentsInfo\n* xremoveDocument + Metadata methods\n+ Metadata methods * searchDocuments\n* saveDocument .\n\nretrieveDocument\n\n* yremoveDocument\n\n--- ch11/lesson-19/slide-19.png ---\nDefault implementations\n\n--- ch11/lesson-19/slide-20.png ---\nInsuranceSuite default DMS implementations\nDefault implementation\n¢ Used for demonstration purposes\n¢ Not for use in production environments\n« |IDocumentMetadataSource\n¢ Plugin is not implemented and enabled\n+ Document table in application database stores document metadata\n« IDocumentContentSource\n¢ Plugin is enabled\n* Implemented by AsyncDocumentContentSource Gosu class\n\n* Stores document content in the Guidewire application server file system\n+ For example, in a Windows environment:\n\nC:\\Users\\<user>\\AppData\\Local\\Temp\\Guidewire_Server.\n\nPc\n\n--- ch11/lesson-19/slide-21.png ---\ni InsuranceSuite default DMS implementations Gi\n\nAlternate implementation\n\nUsed for proof-of-concept demonstrations\n¢ Not for use in production environments\n¢ [DocumentMetadataSource\n\n* Implement and enable plugin using LocalDocumentMetadataSource Gosu\nclass\n\n* IDocumentContentSource plugin addDocument method returns false\n\n+ IDocumentMetadataSource plugin saves XML metadata file in the Guidewire\napplication server file system\n\n* For example, in a Windows environment:\n\nC:\\Users\\<user>\\AppData\\Local\\Temp\\jetty-0.0.0.0-8080-webapp-_cc-any-<###...>.dir\\..\n\n--- ch11/lesson-19/slide-22.png ---\nInsuranceSuite default DMS implementations\n\nAlternate implementation (Continued)\n\n|IDocumentContentSource\n\n¢ Implement and enable plugin using LocalDocumentContentSource Gosu\nclass\n+ Stores document content in the Guidewire application server file system\n+ For example, in a Windows environment:\n\nC:\\Users\\<user>\\AppData\\Local\\Temp\\Guidewire_Server\\,\n\ni\nGi\n==\n\nre\n\n--- ch11/lesson-19/slide-23.png ---\nImplementation options\n\n--- ch11/lesson-19/slide-24.png ---\ni DMS integration considerations Gi\n+ DMS Uptime and Availability\n\n* Understand the implications and the impact on your integration design if the DMS goes down\n¢ If metadata is stored locally, users may be able to continue limited document related work\n\n¢ Is the DMS able to handle modifying both content and metadata in a single call?\n* If so, a IDocumentMetadataSource plugin may not be required or desirable\n\n¢ Is external and Guidewire data synchronization required?\n* Often metadata must exist in both systems and remain in-sync\n¢ Usually requires |IDocumentMetadataSource Plugin be implemented\n\nwy Gi\n\n--- ch11/lesson-19/slide-25.png ---\ni First DMS integration option Gi\n\n« IDocumentMetadataSource * Create, update and delete operations may\n+ Read-only of metadata be more efficient\n+ |DocumentContentSource deals with contents\n« [DocumentContentSource\n\nand metadata\n+ Writes metadata and handles updates + Asecond remote call is avoided\n+ Methods return true:\n\n* Appropriate for a DMS that...\n\n+ addDocument\n\n+ updatepocunent + Maintains content and metadata\n* FemovePocument + Can modify content and metadata with one\n+ Manages No content documents API call\n* Document table is not used « List documents depends on DMS availability\n\n+ IDocumentMetadataSource accesses the\nDMS\n\n--- ch11/lesson-19/slide-26.png ---\nFirst DMS integration option\n\nMethod call sequences\n\nCreate document\n+ IDocumentContentSource\naddDocument*\nReturns true\nUpdate document content only\n+ IDocumentContentSource\nupdateDocument\n+ Returns true\nUpdate document metadata only\n+ IDocumentMetadataSource\n\nsaveDocument\n\n--- ch11/lesson-19/slide-27.png ---\nFirst DMS integration option\n\nMethod call sequences (Continued\nDelete document\n\n+ IDocumentContentSource\n* xemoveDocument\n+ Returns true\nList documents\n+ IDocumentMetadataSource\n* searchDocuments\nRetrieve document (contents)\n+ IDocumentMetadataSource\n* retrieveDocument\n+ Retrieve call may be omitted if search has loaded metadata\n+ |DocumentContentSource\n\n* getDocumentContentsiInfo\n\n--- ch11/lesson-19/slide-28.png ---\ni Second DMS integration option Gi\n\n¢ |DocumentMetadataSource * Create, update and delete operations may\n+ Read and write of metadata be less efficient\n. * Calls both IDocumentContentSource and\nIDocumentContentSource IDocumentietadataSource\n+ Methods return false:\n| adapocument * Appropriate for DMS whose API does not\n« updatepscunent allow for content and metadata to be\n\nmodified in one call\n\n+ removeDocument\n\n* Document table is not used « List documents depends on DMS availability\n\n--- ch11/lesson-19/slide-29.png ---\nSecond DMS integration option\n\nMethod call sequences\n\nCreate document\n\n« IDocumentContentSource\n* addDocument\n\n+ Returns false\n\n+ IDocumentMetadataSource\n\n* saveDocument\n\n¢ Update document\n+ IDocumentContentSource\n* updateDocument.\n- Returns false\n- IDocumentMetadataSource\n\n* saveDocument\n\n--- ch11/lesson-19/slide-30.png ---\nSecond DMS integration option Gi\n\nMethod call sequences (Continued)\n\n¢ Delete document ¢ List documents\n¢ IDocumentContentSource + IDocumentMetadataSource\n* xemoveDocument * searchDocuments\n* Returns false * Retrieve document\n\n+ IDocumentMetadataSource + [DocumentMetadataSource\n\n* xemoveDocument. .\n* retrieveDocument\n« Retrieve call may be omitted if search has loaded\nmetadata\n+ [DocumentContentSource\n\n* getDocumentContentsInfo\n\n--- ch11/lesson-19/slide-31.png ---\ni Third DMS integration option\n\nGi\n| WDocumentMetadataSource disabled »===Runtie characteristics\n\n¢ Base configuration of\n\nCreate, update and delete operations may\n\nIDocumentMetadataSource be more efficient\n* |DocumentContentSource + No remote call through\n|IDocumentMetadataSource\n+ Methods return false:\n+ adadocument * Guidewire application queries its database\n+ updateDocument for document list\n\n+ xemoveDocunent + List documents independent of DMS\n+ Use Document table for read/write of\n\nmetadata ¢ DMS metadata changes are not detected\n\n* Synchronization issues between Guidewire\nDocument table and DMS possible\n\n--- ch11/lesson-19/slide-32.png ---\nThird DMS integration option\n\nMethod call sequences\n\n* Create document\n« IDocumentContentSource\n* addDocument\n+ Returns false\n« Row added to Document table\n« Update document\n« |DocumentContentSource\n* updateDocument\n\n+ Returns false\n\n« Row updated in Document table\n\nList documents\n\n+ Query of the Document table\n\n--- ch11/lesson-19/slide-33.png ---\nThird DMS integration option\n\nMethod call sequences\n\n¢ Delete document\n\n« IDocumentContentSource\n* xremoveDocument\n\n+ Returns false\n« Row marked as retired in Document table\n¢ Retrieve document\n\n« |DocumentContentSource\n* getDocumentContentsInfo\n« Reads row from Document table\n+ Read may be omitted if search has loaded metadata\n\n--- ch11/lesson-19/slide-34.png ---\nThird DMS integration option\n\nVariant\n\n¢ |DocumentContentSource modifies DMS metadata\n\n« DMS stores metadata in parallel to Document table\n¢ Metadata versions must be synchronized\n\n* Concern if metadata on DMS is changed outside of Guidewire\n¢ Listing documents is still independent of the DMS\n\n+ Read metadata from Document table\n\n--- ch11/lesson-19/slide-35.png ---\ni Document related SOAP APIs G\n\n« Add document metadata to Guidewire programmatically\n¢ APls that have methods for adding documents:\n\n* ClaimCenter\n* ClaimAPI\n* BillingCenter\n\n* BCAPI\n\n* PolicyCenter\n\n* AccountAPI\n« May be used by external system to notify Guidewire\n\n* Sends document ID and other metadata for document added / changed directly on the DMS*\n\n--- ch11/lesson-19/slide-36.png ---\ni Asynchronous Document Storage Gi\n\n¢ Transfer of large documents to or from an external DMS requires significant\nmemory and resources\n* The external document storage system (or intermediate network) may be slow\n¢ Multiple simultaneous requests mean that multiple threads are competing for CPU cycles\n* One alternative is to create, add, or update documents asynchronously so that\nusers are not blocked while the operation completes.\n* Guidewire includes the following reference implementation to support this feature:\n\n* The built-in asynchronous document content source\ngw.plugin.document.impl.AsyncDocumentContentSource\n\n* The built-in document storage messaging transport\n\n¢ For more information see Asynchronous Document Storage in the Integration\nGuide\n\n--- ch11/lesson-19/slide-37.png ---\ni Demonstration G\nAnalyze Default DMS implementation\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch11/lesson-19/slide-39.png ---\nQuestion\n\n_- — Which plugin interfaces are used for document storage? Which plugin\nPa interface is a required interface?\n\nSS ee eee ae eee\n\nGi\n\n--- ch11/lesson-19/slide-40.png ---\nAnswer\n\n_- — Which plugin interfaces are used for document storage? Which plugin\nPa interface is a required interface?\n\n|DocumentContentSource (Required) and IDocumentMetadataSource.\n\nSee eee ee eae\n\nGi\n\n--- ch11/lesson-19/slide-41.png ---\nQuestion\n\n_- — Whatare the characteristics of the OOTB default implementation for\n¢ document metadata storage and content storage?\n\n¢\n¢\n\nSS ee eee ae eee\n\nGi\n\n--- ch11/lesson-19/slide-42.png ---\nAnswer Gi\n\n_- — Whatare the characteristics of the OOTB default implementation for\nPa document metadata storage and content storage?\n¢\n\nDocument metadata is stored in the Guidewire database and document content is\nstored in the file system of the Guidewire application server.\n\nSee eee ee eae\n\n--- ch11/lesson-19/slide-43.png ---\nLesson\nobjectives\nreview\n\n¢ Explain how to integrate an InsuranceSuite\n\napplication with an external Document\nManagement System (DMS)\n\nIdentify the plugins and methods that enable\nDMS integration\n\nImplement the plugins to support DMS\nintegration\n\nDeploy and configure DMS integration plugins\nDescribe the features and limitations of\nGuidewire’s default implementations of\ndocument storage functionality\n\n--- ch11/lesson-19/slide-44.png ---\ni Student exercise\n\nAnalyze Alternate default DMS implementation\n\n--- ch11/lesson-20/slide-01.png ---\nIntegration in Guidewire Cloud\n\nv012612.0.1\n\n--- ch11/lesson-20/slide-02.png ---\nAudio Note\n\nThis presentation is enhanced with audio.\n\nAdjust the volume on your playback device before\ncontinuing.\n\n--- ch11/lesson-20/slide-03.png ---\nLesson\nobjectives\n\n¢ Describe the Integration Framework.\n\n¢ List the components that make up the\nIntegration Framework for Guidewire Cloud.\n\n¢ Describe how different components work\ntogether to simplify integration in the cloud.\n\n--- ch11/lesson-20/slide-05.png ---\ni Comparing integration in self-managed and cloud Gi\n\nSelf-managed\n\nBusiness logic\n\nGuidewire Cloud — Integration framework\n\nBusiness logic Integration logic\n\nIntegration logic\n\nP)\n\nLow-code/No-code\n\n* Integration and Business logic are\nseparated.\n\nCTS bo\n\nSeveral lines of Gosu\nand other code bundles within\nInsuranceSuite\n\n* Eliminating Gosu code where possible\nand providing no-code/low-code options\nto develop integrations\n\n--- ch11/lesson-20/slide-06.png ---\ni Cloud Integration Framework components G\n\nCloud API\nInbound HTTP calls\nApp Events\nPublishes events ==\n\nInsuranceSuite External systems\nIntegration Gateway\nIntegration apps\nREST API Client\nAPI callout\n\n--- ch11/lesson-20/slide-07.png ---\ni Why use the Integration Framework? a\n\nImproved speed in putting integrations in place\nallows more time for solving business problems\n\nBy using proven frameworks and industry best\npractices, integrations are more resilient and fault\ntolerant\n\nRemoving integration code from core apps reduces\nsize of application builds; standardized integrations\nreduce risk inherent in custom code\n\n--- ch11/lesson-20/slide-09.png ---\ni Base configuration Cloud APIs\n\n& &\n\nPolicyCenter\n\nClaimCenter\n/claims/v1 /policy/v1\n/common/v1 /account/v1\n/productdefinition/v1 [job/v1\n/apis /apis\n\nBillingCenter\n\n* Only system-level\nmaintenance\nAPIs.\n\n« More coming in\nfuture releases.\n\nAccess Cloud API Swagger documentation at <application URL>/resources/swagger-ui/\n\n--- ch11/lesson-20/slide-10.png ---\ni Cloud API fundamentals\n\n/claim/v1\n\n/claims/{claimld}\n\n/claims\n\nPATCH /claims/{claimld}/vehicle-\nincidents/{vehicleld}\n\n/claims/{claimld}/docume\nnts/{documentld}\n\n/account/v1\n\n/accounts/{accountld}\n\n/accounts\n\n/accounts/{accountld}/contacts/\n{contactld}\n\n--- ch11/lesson-20/slide-12.png ---\ni What does the REST API client do? Gi\n\nREST Client is a method or a tool to invoke a REST service API\n\nGET real-time traffic info\nREST Client a Google traffic\nREST API\nReal-time traffic info\n\nGET, POST,\nGuidewire ———_\nREST API PATCH, DELETE External\nClient Return resources or API\n\nresponse\n\n--- ch11/lesson-20/slide-13.png ---\ni REST API Client overview G\n\nGuidewire IS\n\n¢ Distributed as .zip file.\n\nInsuranceSuite ==» * Configured to generate\nand embed Client in\n\nintegrates .\ng InsuranceSuite.\n\nExternal\nAPI\n\n--- ch11/lesson-20/slide-15.png ---\nEvents in InsuranceSuite\n| Gi\n\nz= ClaimOpened Bite &\n: : _\nClaimChanged\nCalculates risk of\n\nBese = = = =\"! fraud ona claim\nusing events\n\nFraud scoring\nsystem\n\n——_ == >:\n\nApp Events refers to the infrastructure that:\n* Raises business events in InsuranceSuite\n\n+ Enables customers to send events to external systems that cares about it\n\n--- ch11/lesson-20/slide-16.png ---\ni Sending events from InsuranceSuite in self-managed Gi\nEvent messaging\n\nInsuranceSuite\n\nEvents Destinations plugins : External\nsystems\n\nCustom Gosu code\nwritten by customers\n\n--- ch11/lesson-20/slide-17.png ---\nSending events from InsuranceSuite in Guidewire Cloud\nApp Events\n\nGi\n\nApp Events: Preferred way of implementing outbound integrations in the cloud\n\nDevelopers use a form-like interface to connect InsuranceSuite to external systems.\n\na) Claim events\na\n\nClaimCenter\n\n&: Policy events\n—————_—>\n-\n\nPolicyCenter\n\nEvent data based on\nCloud Events 1.0\n\nDeveloper\n\n--- ch11/lesson-20/slide-18.png ---\nIntegration Gateway\n\n--- ch11/lesson-20/slide-19.png ---\ni What is Integration Gateway?\n\nGi\n\nIntegration Gateway b External system\ne outbound outbound e &\n——— — — = >\n\nXML\n= inbound\ne- —\n\nREST@+ —_——\n\ninbound\n\norg\n\ne@ Represents an Integration framework component\n\n* Orchestrate any interaction pattern -° Bridge between any API interface\n¢ Transform any data format\n\n--- ch11/lesson-20/slide-20.png ---\ni Apache Camel basics Gi\n\nEnterprise Integration\nEndpoint Patterns (EIP) Endpoint\nReceives the message Processes the message Sends the message\n\nRoute Camel Context Component\nAn integration Container where Provides common\nflow in Camel routes are run services in Camel\n\n--- ch11/lesson-20/slide-22.png ---\n| Education\n\nClaimcentr System APL\n\nEj | Education\n\nRESTAPICtent\n\ni EDU courses about each component\n\nGil education\n\nPlcyCenter System API\n\n| Education\n\nInsuranceSuite App Events\n\nGi\n\nGuidewire Education offers further, in-depth training on each of the components.\n\nEi| Education\n\nIneuranceSuite Cloud APL\n\nGi| Education\n\nInsuranceSuit Integration Gateway\n\n--- ch11/lesson-20/slide-23.png ---\nLesson\nobjectives ¢ Describe the Integration Framework.\n\nreview ¢ List the components that make up the\nIntegration Framework for Guidewire Cloud.\n\n¢ Describe how different components work\ntogether to simplify integration in the cloud.\n\n--- ch11/lesson-21/slide-01.png ---\nPreparing for a Guidewire Exam\n\n--- ch11/lesson-21/slide-02.png ---\nLesson\nOo bj ectives + Closed-book/Proctored exams\n\n+ Describe how to prepare for a Guidewire proctored exam\n+ Set expectations for the proctored exam experience\n\n« Open-book exams\n+ Describe how to prepare for a Guidewire open-book exam\n\n+ Set expectations for the open-book exam experience\n\n+ Identify resources available for use during open-book\nexams\n\n« Knowledge Checks\n+ Describe how to prepare for a Guidewire Knowledge Check\n\n+ Set expectations for the Knowledge Check experience\n\n--- ch11/lesson-21/slide-03.png ---\nProctored Exams\n\n--- ch11/lesson-21/slide-04.png ---\nWhich exams are closed-book/proctored? Gi\n(1 of 2)\n\n* Developer Exams\n* InsuranceSuite Best Practices - EXAM\n* Professional Certification — BillingCenter Configuration — Proctored Exam\n« Professional Certification — ClaimCenter Configuration — Proctored Exam\n* Professional Certification — PolicyCenter Configuration — Proctored Exam\n\n« Professional Certification — InsuranceSuite Integration — Proctored Exam\n\nSee Developer Certification Paths in the Certification Options section of http//education.guidewire.com\n\n--- ch11/lesson-21/slide-05.png ---\nWhich exams are closed-book/proctored? Gi\n(2 of 2)\n\n« Analyst Exams\n¢ Associate Certification — InsuranceSuite Analyst — Proctored Exam\n* Professional Certification — PolicyCenter Business Analyst — Proctored Exam\n* Professional Certification — BillingCenter Business Analyst — Proctored Exam\n\n* Professional Certification - ClaimCenter Business Analyst — Proctored Exam\n\nSee Analyst Certification Paths in the Certification Options section of http://education.guidewire.com\n\n--- ch11/lesson-21/slide-06.png ---\ni How you should prepare for a closed-book/ Gi\nproctored exam?\n\n* Complete all the lessons in the relevant courses:\n* Course content\n+ Demonstrations\n\n+ Hands-on lab exercises\n\n¢ Enroll in the exam with your training coordinator or with edadmin@quidewire.com\n\n+ Look for “Enrollment Confirmation” email from edadmin@guidewire.com\n¢ Schedule to take the exam with our proctoring partner in advance\n¢ Identify a test-taking space that complies with test-taking requirements\n\nSee the Proctored Exam Guide in the Certification Options section of http:/education.quidewire.com\n\n--- ch11/lesson-21/slide-07.png ---\nWhat you should expect during the closed-book/ Gi\nproctored exam?\n* The exam will consist of multiple-choice questions.\n¢ The questions are meant to determine your ability to apply your knowledge.\n\n¢ The exam will be proctored online by our proctoring partner using your webcam\nand audio (no headphones allowed).\n\n« Examinees will be asked to show identification.\n¢« The exam must be completed within 3 hours from the start, in one sitting.\n\n* The proctored exam should take approximately 2-3 hours to complete.\n\n--- ch11/lesson-21/slide-08.png ---\nOpen-book Exams\n\n--- ch11/lesson-21/slide-09.png ---\ni Which InsuranceSuite exams are open-book? Gi\n\nCertification Prerequisite — InsuranceSuite Fundamentals — EXAM\nSpecialist Certification — BillingCenter Configuration - EXAM\nSpecialist Certification — ClaimCenter Configuration - EXAM\nSpecialist Certification — PolicyCenter Configuration - EXAM\nSpecialist Certification — InsuranceSuite Integration - EXAM\nSpecialist Certification — DataHub Integration - EXAM\n\nSpecialist Certification — InfoCenter Configuration - EXAM\nSpecialist Certification — InfoCenter Integration - EXAM\n\nSpecialist Certification — Digital Configuration - EXAM\n\nSee Developer Certification Paths in the Certification Options section of http//education.guidewire.com\n\n--- ch11/lesson-21/slide-10.png ---\ni How you should prepare for an open-bookexam? [fi\n\n* Complete all the lessons in the courses required for the exam:\n* Course content\n* Demonstrations\n« Hands-on lab exercises\n\n¢ Familiarize yourself with supporting materials (available from your project team):\nGuidewire product documentation (available on Guidewire Community\nhttp://community.guidewire.com)\n\nGuidewire products and Guidewire Studio (available from your IT team)\n\nProduct data dictionaries and security dictionary (available from your IT team)\n\nPCF References (available in your product installation)\n\nGosu API Reference (available in your product installation)\n\nReview the Exam Considerations Section of InsuranceSuite Certification Paths for Developers on\nhttp://education.quidewire.com for your exam\n\n--- ch11/lesson-21/slide-11.png ---\ni What to expect during an open-book exam Gi\n\n* The exam will consist of 40-50 multiple-choice questions.\n\n* Questions may require use of the open-book materials to successfully select the\ncorrect answer or answers.\n\n* On average, learners spend 6 to 8 hours completing the exam.\n\n* Once they begin, learners have 24 hours to complete an open-book Specialist or\nFundamentals exam.\n\n¢ Learners are allowed to pause and restart their open-book exam multiple times\nwithin their 24-hour exam window.\n\n--- ch11/lesson-21/slide-12.png ---\ni Resources you can use during an open-bookexam [i\n\n* Guidewire course content (available on http://education.guidewire.com)\n* Simulations in most Guidewire lessons\n* Student Workbooks in each Guidewire course\n* Guidewire product documentation (available on Guidewire Community)\n¢ Guidewire products and Guidewire Studio (available from your IT team)\n¢ Product data dictionaries and security dictionary (available from your IT team)\n« PCF References (available in your product installation)\n\n¢ Gosu API Reference (available in your product installation)\n\n--- ch11/lesson-21/slide-13.png ---\nKnowledge Checks\n\n--- ch11/lesson-21/slide-14.png ---\ni Which exams are Knowledge Checks?\n\n« New Features Courses\n¢ SurePath Overview\n\n--- ch11/lesson-21/slide-15.png ---\ni How you should prepare for a Knowledge Check\n\n*« Knowledge Checks test your knowledge of a lesson or a course.\n* Knowledge Checks are like small quizzes.\n* Complete the lessons in the relevant course:\n\n* Course content\n\n* Demonstrations\n\n« Hands-on lab exercises\n\n--- ch11/lesson-21/slide-16.png ---\ni What to expect during the Knowledge Check Gi\n\n* Knowledge Checks will consist of 5-20 multiple-choice questions.\n\n* Questions may be answered using the content from the lesson (open-book).\n\n¢ Learners, on average, spend 10 to 30 minutes to complete the knowledge check.\n* You must pass the Knowledge Check to complete the lesson or the course.\n\n¢ You can retake the Knowledge Check as many times as you like.\n\n--- ch11/lesson-21/slide-17.png ---\nLesson\ns .\nOo bj ectives « Closed-book/Proctored exams\nreview + Describe how to prepare for a Guidewire proctored exam\n\n+ Set expectations for the proctored exam experience\n\n« Open-book exams\n+ Describe how to prepare for a Guidewire open-book exam\n\n+ Set expectations for the open-book exam experience\n\n+ Identify resources available for use during open-book\nexams\n\n« Knowledge Checks\n+ Describe how to prepare for a Guidewire Knowledge Check\n\n+ Set expectations for the Knowledge Check experience",
  "generated_at": "2026-02-15T18:23:27.681009"
}