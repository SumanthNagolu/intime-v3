{
  "chapter": "ch14",
  "chapter_title": "Rating Configuration",
  "lesson_count": 5,
  "total_slides": 107,
  "total_words": 4400,
  "full_text": "--- ch14/lesson-01 ---\nConfiguring Costs and Transactions\n\nLesson |\nobjectives ¢ Describe the rating process and rating\n\narchitecture so that you can design and\nconfigure rating effectively\n\n* Configure the cost structure to store the\npremiums and other monetary amounts of the\npolicy\n\n¢ Access the changes in costs using the\ntransaction entity\n\n| Rating process overview Gi\n\nRating Engine\n\nCreates Rating Engine\nbased on policy line\n\n===>\n\nUser clicks Quote PCRatingPlugin.gs <LOB>RatingEngine.gs Policy is quoted and\nin a policy transaction (Main entry point gets rates from rate books premium is displayed\nto rating) and calculates costs\n\nCalculates costs\n\n| Rating architecture Gi\n\nwD Rating Engine Rate Book\nraed Instantiates\n===> Parameter Sets\nPopulates\nPCRatingPlugin\n\n<LOB>RatingEngine Inputs\n\nRate Routines Rate\nCreates Queries [Tables\n\nCostData Objects\n\nMerges CostDatas RY)\nand persists Costs » 51 Costs and Transactions\n\n| Demonstration G\n\nRating overview\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n| What is a cost? G\n* Unit of price for an aspect of a policy Co\") Cost\nover a specific period of time  ] 11.00\n* Discrete unit which cannot be broken up Liability\n\ninto smaller units :\n\n« Examples of costs\nP = Collision\n« Premium for an entire coverage a\n7.00\n* Taxes Ld\nCo Comprehensive\n¢ Total cost of policy is the sum of all\nindividual costs CL) 4.00\nTax\n\nTotal 28.00\n\n9.00\n\n--- ch14/lesson-02/slide-01.png ---\nConfiguring CostData Objects\n\n--- ch14/lesson-02/slide-02.png ---\nLesson\nobjectives\n\n¢ Describe the CostData Gosu classes to be\nused by the rating engine to flexibly build up\nthe cost entities\n\n¢ Define a new CostData class\n\n--- ch14/lesson-02/slide-03.png ---\nCostData objects\n\n--- ch14/lesson-02/slide-04.png ---\n| CostData objects G\nCreates, a Merged and prorated, P ted\nbuilds ore copied to Costs ersiste\n\nRating engine CostData objects Cost entities Database\n\n¢ CostData objects are POGOs that mirror every cost entity\n¢ They allow the rating engine to flexibly build up cost entities during rating\n\n¢ Atthe end, the CostData objects are merged, prorated and copied to actual cost\nentities to be maintained.\n\n--- ch14/lesson-02/slide-05.png ---\n| General properties and methods Gi\n\n¢ The CostData base class provides common financial fields which match the cost\n\ndelegate , such as standard, override, actual values for base and adjusted rate,\nterm amount, and prorated amount\n\n¢ It also provides common methods used by the rating engine, such as:\n* mergelfCostEqual()\n\n* copyStandardColumnsToActualColumns()\n* setRounding()\n\n--- ch14/lesson-02/slide-06.png ---\n| Define a new CostData class\n\nGi\n\n¢ For every cost subtype entity, create a CostData subclass\n\n¢ CostData subclass name = CostEntityName + “Data” | eti |\n\n« Example: PACostData, PersonalAutoCovCostData,\n\nPersonalVehicleCovCostData\n¢ Extend the abstract class CostData or its child classes for the line\n« Add member variables to match columns on the cost entity\n\nAdd constructors\n¢ Implement abstract properties and methods\n\n* KeyValues()\n* setSpecificFieldsOnCost()\n* getVersionedCosts()\n\n--- ch14/lesson-02/slide-07.png ---\n| Keys Gi\n\n¢ CostData subclasses must define member variables to match the columns on their\ncorresponding cost entities\n¢ Define a property that links to an entity instance such as key in a CostData class\n* Key links one object to another\n\n* Set the key field with the Fixedid property of the entity instance\n\n* new PersonalAutoCovCostData ( start, end, cov.Currency, RateCache, vehicle.Fixedid, cov.Fixedid )\nin PARatingEngine\n\nPersonalAutoCovCost _|A taxable unit of price f..\nimplementsEntity Cost class PersonalautocovcostData extends PACostData<PersonalAutoCovcost> (\nimplementsinterfac gw.api.domain financial... gw.lob.pafinancials PA...\nforeignkey PersonalAutoCov PersonalAutoCoy a> var _covID :\n\nforeignkey PersonalVehicle PersonalVehicle\n\n--- ch14/lesson-02/slide-08.png ---\n| Constructors Gi\n\n¢ Date-based constructor: 1\n« Used to create new CostData for a cost bearing object on the policy graph\n« Parameters added to set the member variables specific to the subclass\n* Cost-based constructor: 4\n« Used to create CostData based on existing cost\n* Constructors to support backward compatibility for non-multicurrency: 2, 3\n\nabstract class PACostData<k extends PACost> extends CostData<R, PersonalAutoLine> {\nconstruct (effDate : Date, expDate : Date, c : Currency, rateCache : PolicyPeriodFxXRateCache) {\nsuper(effDate, expDate, c, rateCache)\n\n»\n\n2) construct cersoate : Date, expDate : Date) { super(effDate, expDate) }\n\nGB) constrast : R) { super(c) }\n\n( Q)) construct (< : Ry rateCache : PolicyPeriodFxRateCache) { super(c, rateCache) }\n\n--- ch14/lesson-02/slide-09.png ---\n| Merging CostData objects G\n\nThe rating engine merges CostData objects with similar costs\n\nCostData\n(Date range) Coverage Coverable TermAmount\nsw\ncoe eS Qq-—s— 10.00\nald Merged .,\n1/13/15 Liability Auto 1 e—-@-S 10.00\nPolicyChange Se NY\neffective 3/16 wy Qq-—s— 10.00 1/1 — 12/31 Liability Auto 1\n3/16 — 12/31 Liability Auto 1\n\nRe\nle\nRSH\nBy iS —\n4\n\nRSS\n\nie,\nRSF — me 5.00\nNY = ;\n\n--- ch14/lesson-02/slide-10.png ---\nJ KeyValues() G\n\nCostData subclasses must implement the KeyValues() property\nUsed to determine if two CostData objects are “the same”\n\nImportant when merging CostData objects (e.g. when there are multiple slices in a\nbranch)\n\nProvides a list of values that collectively identifies the CostData object\n\nPersonalAutoCovCostData.gs\n\nprotected override property get KeyValues() : List<Object> {\nreturn {_vehicleID, _covID}\n\n}\n\n--- ch14/lesson-02/slide-11.png ---\n| setSpecificFieldsOnCost() G\n\n* CostData subclasses must implement the setSpecificFieldsOnCost() method\n\n« Used to create new cost entities or update existing cost entities based on\nCostData objects\n\n* CostData base class sets the general properties for the cost entity, such as\namounts and rates\n\n¢ Subclasses must set the fields specific to the associated cost entities\n¢ Non-FK properties: set properties directly on the cost entities\n\n« FK properties: set properties using setFieldValue( costPropertyNames, Key )\n\ncostPropertyName: String specifying property name on av cost entity\n\nKey: Key containing the fixedID for the object to be linked. Example:\ncost.setFieldValue (“PersonalAutoCov”, _covID) in\nPersonalAutoCovCostData.as\n\n--- ch14/lesson-02/slide-12.png ---\n| Cost VersionList Gi\n\nA Cost VersionList used by a rating engine is a set of cost rows for the same thing\n\nQq-—s— 10.00\n\nAuto 1\n\nCostData °. A]\n4/1 — 12/31 Collision\n\nx\n8\nPersonalAutoCovCostData\n\nCost VersionList g =—\n11 — 12/31 for CostData object —\n1/1-3/31 Liability Auto 1\n\nQe Liability g o— =—\n\n4/1 —12/31 Liability Auto 1\n\n= Auto 1\n25.00\n\n--- ch14/lesson-02/slide-13.png ---\n| getVersionedCosts() Gi\n\n* CostData subclasses must implement the getVersionedCosts() method\n« Used to match corresponding costs to the CostData object\n¢ Retrieve version lists of cost objects from the PolicyPeriod\n\n¢ Repeat all costs for the target object and determine which cost entity instances\ncorrespond to the current CostData object\n\n¢ Use the Key field to match the cost if the CostData subclass has one\n\n--- ch14/lesson-02/slide-14.png ---\n| Demonstration G\n\nConfiguring CostData objects\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch14/lesson-02/slide-16.png ---\nQuestion\n\n,~ — What are CostData objects? How are they named?\n\n¢\n4\n¢\n\nSS oe ooo e eo oe ooooOoD\n\n--- ch14/lesson-02/slide-17.png ---\nAnswer Gi\n\n,~ — What are CostData objects? How are they named?\n¢\nor CostData objects are Gosu objects that mirror every cost on a policy graph. Each\nCostData subclass has the same name as the cost entity followed by the suffix “Data”.\n\nSSS eee oe eo ooo e SoD\n\n--- ch14/lesson-02/slide-18.png ---\nQuestion\n\nae Describe briefly the two CostData constructors.\n4\n¢\n\nSS oe ooo e eo oe ooooOoD\n\n--- ch14/lesson-02/slide-19.png ---\nAnswer\n\n_~ — Describe briefly the two CostData constructors.\n¢\n7 The two CostData constructors are:\n- Date-based constructor is created based on effective and expiration dates,\nusually for a new cost object.\n\n+ Cost-based constructor is created based on a pre-existing cost object that is\npassed-in as a parameter.\n\nSSS eee oe eo ooo e SoD\n\n--- ch14/lesson-02/slide-20.png ---\nQuestion\n\nae Why are KeyValues needed?\n4\n¢\n\nSS oe ooo e eo oe ooooOoD\n\n--- ch14/lesson-02/slide-21.png ---\nAnswer\n\n,~ — Why are KeyValues needed?\n¢\nor KeyValues are needed to determine if two CostData objects are the same. The\nKeyValues property creates a list of the Key Values. The rating engine uses it as it\nmerges CostData objects.\n\nSSS eee oe eo ooo e SoD\n\n--- ch14/lesson-02/slide-22.png ---\nQuestion G\n\n,~ — Why can you not set properties directly on cost entities for both FKs?\n\n¢\n4\n¢\n\nSS oe ooo e eo oe ooooOoD\n\n--- ch14/lesson-02/slide-23.png ---\nAnswer Gi\n\nae Why can you not set properties directly on cost entities for both FKs?\nor For non-FK properties, you can set the properties directly on the cost entity instance.\nFor FK properties, this approach does not work, because CostData objects store the\nentity's fixed ID encapsulated in a key object. So the methods\nsetSpecificFieldsOnCost and setFieldValue provided by the CostData class must be\nused to set the foreign key properties.\n\nSSS eee oe eo ooo e SoD\n\n--- ch14/lesson-02/slide-24.png ---\nLesson\nobjectives « Describe the CostData Gosu classes to be\n\nreview used by the rating engine to flexibly build up\nthe Cost entities\n¢ Define a new CostData class\n\n--- ch14/lesson-02/slide-25.png ---\n| Student exercise\n\nConfiguring CostData objects\n\n--- ch14/lesson-03/slide-01.png ---\nRating Engine Configuration\n\n--- ch14/lesson-03/slide-02.png ---\nLesson\nobjectives ¢ Describe the rating engine classes and\n\nmethods\n* Configure the rating engine to calculate costs\n\nfor the policy\n\n--- ch14/lesson-03/slide-03.png ---\nRating engine classes and\nmethods\n\n--- ch14/lesson-03/slide-04.png ---\n| Default Rating Engine\n\nL\n\nIRatingPlugin AbstractRatingEngine\nA\n\nPCRatingPlugin PARatingEngine CPRatingEngine\n\nCalculates costs\n\n--- ch14/lesson-03/slide-05.png ---\n| General rating process Gi\n\n1. Get slices\n\n¢ Find all dates on which anything changes in a branch and get the policy line versions (slices)\n2. Rate slices\n\n* Create CostData objects for items to be rated in slice mode (rate all or only changed slices)\n3. Merge equal CostData objects\n\n« Use the KeyValues() property to compare\n4. Prorate certain CostData objects\n\n« Update the amount field\n5. Rate in window mode\n\n* Create CostData objects that may depend on sums of other CostData objects\n\n6. Build Costs from resulting CostData obiects and persist Costs\n\n--- ch14/lesson-03/slide-06.png ---\n| Slice mode G\n\n« Jobs change policy data across effective time\n« Anew version (slice) is created each time the job edits a policy period\n¢ In slice mode you view policy data as of a specific date in effective time\n\n* When you request objects on the policy in slice mode, PolicyCenter automatically gets the\ncorrect version of each object as of a certain date\n\nAuto 1 Limit Cost 600/300 (720/360 «660\n\nAuto 2 Limit Cost 720/360 ‘fo 360\n\n# Format: TermAmount/Amount\n\n--- ch14/lesson-03/slide-07.png ---\n| Which costs can be rated in slice mode?\n\n¢ Costs that can be pro-rated based on date\n¢ Cost associated is linear, increases with time\n\n« For example, adding a vehicle or a coverage increases the premium\n\n--- ch14/lesson-03/slide-08.png ---\n| Window Mode G\n\nIn window mode, all versions (slices) of policy data across all dates in effective time\ncan be viewed\n\nEffective Time | 1/1 — 3/31 4/1 - 6/30 Total Tax (10%)\n\nPremium\n\n1020 102\n\n# Format: TermAmount/Amount\n\n--- ch14/lesson-03/slide-09.png ---\n| Which costs can be rated in window mode? Gi\n\n¢ Costs that cannot be prorated based on dates\n\n* Costs that are based on CostDatas created in slice mode and are usually ,\ncalculated at the end of rating . Example: discounts, taxes, flat rates, and minimum\npremium\n\n--- ch14/lesson-03/slide-11.png ---\n| AbstractRatingEngine & AbstractRatingEngineBase [5\n\n« AbstractRatingEngine class\n\n* Serves as a base for all LOBs in default configuration\n\n« Provides a list of methods that must be overridden by the subclasses\n¢ AbstractRatingEngineBase class\n\n« Extend it only when rating multi-line policies one slice at a time\n\n¢ Determines if rating should be calculated from the start of period or from the change date\nforward\n\n¢ Provides utility methods for prorating and merging costs\n\n--- ch14/lesson-03/slide-12.png ---\n] Methods you must override (1 of 2)\n\n* existingSliceModeCosts()\n\n* Called when rating only from change date forward\n\n« Finds any existing slice-mode costs and creates representative CostData objects\n* createCostDataForCosts()\n\n* Creates appropriate CostData subclass and returns it\n\n* Takes cost entity instance as argument\n* rateSlice()\n\n« Rates PolicyLine viewed as a slice on a specified slice date\n\n* Create costs for each type of premium with rating algorithms\n\n--- ch14/lesson-03/slide-13.png ---\n] Methods you must override (2 of 2) G\n\n* rateWindow()\n* Rates all the window-mode costs for the PolicyLine\n\n* Creates costs that depend on the sum of the previous slice costs or span the entire period and\nrates them just once\n\n--- ch14/lesson-03/slide-14.png ---\n| Rate something\n\nDetermine the start, end and rating dates\nCreate a new CostData object\n\nRating algorithm\n* Set the basis\n¢ Set the base rate\n¢ Look up factors (optional)\n* Calculate the adjusted rate\n* Calculate the term amount\n\nAdd the CostData to the array\n\n--- ch14/lesson-03/slide-15.png ---\n| Demonstration G\n\nRating engine configuration\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch14/lesson-03/slide-17.png ---\nQuestion\n\n,~ — What costs can be rated in slice mode?\n4\n4\n4\n\nseo eooce Sse Sbeese505\n\n--- ch14/lesson-03/slide-18.png ---\nAnswer\n\n,~ — What costs can be rated in slice mode?\n\n¢\nor Costs that can be pro-rated based on date and are linear.\n\nse sSeSo SoS Se See ese\n\n--- ch14/lesson-03/slide-19.png ---\nQuestion\n\n,~ — What costs can be rated in window mode?\n4\n4\n4\n\nseo eooce Sse Sbeese505\n\n--- ch14/lesson-03/slide-20.png ---\nAnswer\n\n,- — What costs can be rated in window mode?\n\n¢\nor Costs that cannot be pro-rated based on dates and normally based on CostDatas\n\ncreated in slice mode.\n\nse sSeSo SoS Se See ese\n\n--- ch14/lesson-03/slide-21.png ---\nQuestion\n\n,~ — What method can be called to copy standard columns to actual\no columns?\n\nseo eooce Sse Sbeese505\n\n--- ch14/lesson-03/slide-22.png ---\nAnswer\n\n,~ — What method can be called to copy standard columns to actual\no columns?\n\ncopyStandardColumnsToActualColumns()\n\nse sSeSo SoS Se See ese\n\n--- ch14/lesson-03/slide-23.png ---\nLesson\nobjectives ¢ Describe the rating engine classes and\n\nI methods\nreview * Configure the rating engine to calculate costs\nfor the policy\n\n--- ch14/lesson-03/slide-24.png ---\n| Student exercise\n\nRating engine configuration\n\n--- ch14/lesson-04/slide-01.png ---\nRating Maintenance Configuration\n\n--- ch14/lesson-04/slide-02.png ---\nLesson\nobjectives\n\n* Configure the rating plugin to allow rate books\nto be tested prior to releasing into a\nproduction environment\n\n¢ Describe ways to enhance rating performance\n\n--- ch14/lesson-04/slide-03.png ---\n| Configure IRatingPlugin G\n\n¢ Set the implementation class for the rating plugin (for example, PCRatingPlugin)\n\n¢ Set the RatingLevel parameter that controls the minimum rate book status\nconsidered during rate book selection\n\n* Default level is Active for the production environment\n\n* Lower level can be set for the development or test environment (for example,Stage)\n\nieonfiguration [i config i plugin Ei registry IRatingPiugingwp\n3 eB iRatingPlugingwp *\nE Name: [iRatingPiugin\n\nEr intertace: | RatingPtugin\n\ng\\+ Gosu Class qw-pluginpolicyperiod.impl.PCRatingPlugin ~\n\n1d.impl.PCRatingPlugin}\n\nEnvironment:\n\n$2 Struct\n\nServer:\nCo Disabtea\n\nParameters: Name. Yat Environment | Server | 4\nfRatinglevel_ Active\n\n--- ch14/lesson-04/slide-04.png ---\n| Physical tables for rate tables Gi\n\n¢ Default physical table\n* Defined in DefaultRateFactorRow.eti\n« Avery large generic physical table used to store many rate tables for most lines of business\n* Indexing and performance tuning of large tables takes more time\n* Custom physical table\n« Example: CoverageRateFactor.eti for simple coverage-based rate tables\n* Create a custom table when you need a medium sized table, which must have\n+ A foreign key to the RateTable entity\n\n+ Atleast two columns, one for parameter and one for factor\n\n--- ch14/lesson-04/slide-05.png ---\n| Ways to improve rate table performance\n\n¢ Use the rate table lookup strategy in a rate book\n\n« Use rate table normalization\n\n--- ch14/lesson-04/slide-06.png ---\n| Rate table lookup strategy\n\nFi\n« Arate table can be loaded into memory or accessed from the database\n\n¢ By default, it is loaded into memory providing quick access\n\n« Loading a large rate table may slow system performance if there is inadequate memory\n\nEdit Rate Book\n\nRate Book Details\n\nPolicy Criteria\ncode + | gxcrtm_demo_rating Policy Line <applies toall>\nName o& | Generic RTM Demo Rating Jurisdiction % | <applies to all> +\nRate Tables | Rate Routines\nIncluded Rate Tables ~) Available Rate Tables ge\nPending Import Name ‘Lookup\nLi\n\nName\nGenericStateTax\n\nMemory\n\nNo data to display\n\nDatabase\n\n--- ch14/lesson-04/slide-07.png ---\n| Edit rate table lookup G\n\n¢ The lookup setting can be changed only when the rate book is in Draft status\n* The lookup setting is checked when a rate book is promoted from Draft to Stage\n\n« When arate table is included in multiple rate books\n* It can have only one lookup setting\n\n* The setting can be changed only in the rate book that owns the rate table when it is in Draft\n\nstatus PA RTM Demo Rating (Geemisoss)\nCode pa_rtm_demo_rating -<applies to all>\na> > ee\n= a me RSs es\n\n--- ch14/lesson-04/slide-08.png ---\n| Rate table normalization Gi\n\nSpeeds up rate factor lookups, but requires more memory\n\nApplies only when matching against more than one parameter, one of which is a\nrange parameter with overlapping ranges\n\nRemoves overlapping ranges by expanding the number of table rows in memory\n\nConfiguration parameters control whether or not PolicyCenter normalizes rate\ntable by default\n\nUsers can choose not to normalize a rate table by setting the Reduce Memory\nUsage option\n\n--- ch14/lesson-04/slide-09.png ---\n| Rate table normalization example\n\nThe rate table has two parameters: Age and Jurisdiction\n\n+ Where age is a range parameter\n\nRate table in a rate book\n\nRow#| Minimum Age | Maximum Age | Jurisdiction | * Factor\ni 1 5 California 1\n2 3 2\n3 5 8 Oregon 3\n\nRate table normalized in memory for lookup\n\nRow #| Minimum Age | Maximum Age | Jurisdiction | * Factor\n1 1 3 California 1\n2 3 5 California 1\n3 3 5 2\n4 5 6 2\n5 5 6 Oregon 3\n6 6 8 Oregon 3\n\n--- ch14/lesson-04/slide-10.png ---\n| Parameters that control rate table normalization Gi\n\n« RateTableManagementNormalizationRowThreshold\n\n« If the number of rows in the normalized table exceeds this threshold, the user is given the\n“Reduce Memory Usage” option to load a non-normalized version of the table\n\nRate Table Content\n\n¢« RateTableManagementNormalizationRowLimit\n\n« If the number of rows in the normalized table exceeds this limit, the table is automatically\nmarked as non-normalizable and PolicyCenter stores the non-normalized version of the table\n\n--- ch14/lesson-04/slide-11.png ---\n| Demonstration G\n\nRating maintenance configuration\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch14/lesson-04/slide-13.png ---\nQuestion\n\n,~ — When should you create a custom physical table?\n\n¢\n4\n¢\n\nseo eooce Sse Sbeese505\n\n--- ch14/lesson-04/slide-14.png ---\nAnswer Gi\n\n,~ — When should you create a custom physical table?\n¢\nor In the base configuration there are two physical tables that can be used as-is and as\nmodels for other custom tables that may be required for a particular implementation.\nNew custom physical table can be configured for one or a group of similar rate table\n\ndefinitions if neither table is appropriate.\n\nse sSeSo SoS Se See ese\n\n--- ch14/lesson-04/slide-15.png ---\nQuestion\n\n,~ — Arate table is normalized for what type of parameters in it?\n\n¢\n4\n¢\n\nseo eooce Sse Sbeese505\n\n--- ch14/lesson-04/slide-16.png ---\nAnswer\n\n,~ — Arate table is normalized for what type of parameters in it?\n\n¢\nor Arate table is normalized for range parameters with overlapping ranges.\n\nse sSeSo SoS Se See ese\n\n--- ch14/lesson-04/slide-17.png ---\nLesson\nobjectives * Configure the rating plugin to allow rate books\n\nreview to be tested prior to release into a production\nenvironment\n\n¢ Describe ways to enhance rating performance\n\n--- ch14/lesson-05/slide-01.png ---\nConfiguring Rate Routines and Parameter Sets\n\n--- ch14/lesson-05/slide-02.png ---\nLesson |\nobjectives * Configure parameter sets to provide data to\n\nthe rate routines\n\n¢ Configure rate routines to calculate costs\n\n¢ Configure the rate routine plugins to process\nthe rate routines.\n\n--- ch14/lesson-05/slide-03.png ---\n| Review: Rating architecture\n\nRate Book\n\n| Parameter Sets\n\nPopulates,\n\nRating Engine\n\nRate Routines\n\n--- ch14/lesson-05/slide-05.png ---\n| Review: Parameter set Gi\n\nAset of policy-related objects that provide data to the rate routines for calculations\nDefined in the PolicyCenter application\nPopulated by the rating engine at run time\n\nUsers can define new parameters and add to the parameter sets used by the rate\nroutines that have not yet been added to a rate book\n\n--- ch14/lesson-05/slide-06.png ---\n| Configure a new parameter\n\n¢ Define a new parameter in Gosu\n« Add a new parameter name in CalcRoutineParamName.ttx\n\n* Define the default parameter type in\nRatingParameterSetScreenHelper.mapFromCodeToType() (optional) or later in UI\n\n¢ Add the parameter to a parameter set in the application\n« Make the parameter writable (optional)\n« Writable parameters can be edited in a rate routine\n« Writable parameters are available in the Instruction field in a rate routine\n\n« Non-writable parameters are available in the Operand field only\n\n--- ch14/lesson-05/slide-07.png ---\n| Populate parameter map in the rating engine Gi\nvar rateRoutineParameterMap : Map<CalcRoutineParamName, Object > =\n{TC_POLICYLINE -> PolicyLine,\n\ntypecode1 -> param,\ntypecode2 -> param2, ...}\n\nwhere\ntypecode#: a typecode for the parameter from CalcRoutineParamName typelist\n\nparam#: — the policy object to map to the parameter (e.g., driver, vehicle, etc.)\n\n--- ch14/lesson-05/slide-08.png ---\n| Demonstration G\n\nParameter sets\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch14/lesson-05/slide-11.png ---\n| Review: Rate routine Gi\n\nA predefined algorithm to calculate a policy cost\n« Uses the policy objects in a parameter set\n* Looks up the rate table values\n\nDefined in the PolicyCenter application\n\nExecuted by the rating engine at run time\n\nGeneric or line-specific methods can be configured for use in the rate routine steps\n\n--- ch14/lesson-05/slide-12.png ---\n| Rate book selection Gi\n\n« Rate book selection process can be configured in the rating engine depending on\ncarrier requirements\n\n« Examples\n\n¢ For PA policies, rate book is selected once\n\n* For CP, rate book is selected for each coverable (building) in slice mode and then once in\nwindow mode\n\n--- ch14/lesson-05/slide-13.png ---\n| Method to execute a rate routine Gi\n\nRateBook.executeCalcRoutine (code : String,\ncostData : CostData<Cost, PolicyLine>,\nworksheetContainer: WorksheetEntryContainer,\nparamSet: Map<CalRoutineParamName, Object>)\n\nwhere\ncode: the rate routine code that uniquely identifies the rate routine\ncostData: the CostData object which contains the properties used to calculate rate\nworksheetContainer: holds information for the rating worksheets\n\nparamSet: the parameter map representing the parameter set for the rate routine\n\n--- ch14/lesson-05/slide-14.png ---\n| Functions for the rate routines Gi\n\n¢ Generic functions for all rate routines\n¢ Defined in gw.rating.flow.util. SharedRatingFunctions.gs\n¢ Line-specific functions\n¢ Defined in <LOB>RatingFunctions which extends RatingFunctionSource\n* Available to the rate routines via the Functions menu of the Operand field in the Ul\n\n* Override the availableForLine() method to set availability\n\n--- ch14/lesson-05/slide-15.png ---\n| Steps to configure the rate routines\n\nDefine new parameters if needed\n\nDefine the parameter set in the PolicyCenter application\nEdit/write a rate routine in the application\n\nExecute the rate routine in the <LOB>RatingEngine class\n\n* Prepare data to be passed in, such as the parameter map and CostData object\n\n--- ch14/lesson-05/slide-16.png ---\n| Demonstration G\n\nRate routines\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch14/lesson-05/slide-19.png ---\n| Rate routine plugin Gi\n\n/RateRoutinePlugin.gwp is used to\n* Set the implementation class, such as the RateRoutinePlugin\n\n« Enable worksheets for all LOBs by setting the WorksheetsEnabled parameter to true\n+ Makes the “Show Rating Worksheet” button appear on the quote page\n\n@ IRateRoutinePlugingwp\nName: _ IRateRoutinePlugin\n\nInterface: | IRateRoutinePlugin\n\n+= Gosu Class; | gw.pluginrateflow RateRoutinePlugin os\n\nRoutinePlugin}\n\nO) Disabled\n\nParameters: Name Value Enviro... Server +.\n\nWorksheetsEnabled true\n\n--- ch14/lesson-05/slide-20.png ---\n| Rate routine plugin classes Gi\n\n« RateRoutinePlugin.gs processes the\n\nrate routines\n| IRateRoutinePlugin.gwp\n« The processing can be passed to the\n\nline-specific configuration classes\n\nte)\n\n* Setup CostData using wrapper\n\nclasses\nPARateRoutineConfig.gs\n\n* Determine which cost properties appear\nwhen an instruction or operand in a rate RateRoutinePlugin.gs\nroutine step is selected\n\n¢ Enable/disable worksheet for line CPRateRoutineConfig.gs\n\n* Override worksheetsEnabledForLine()\n\n--- ch14/lesson-05/slide-21.png ---\n| Generate the rating worksheet G\n\nOrganize data on the policy in a tree-like structure in <LOB>PolicyLineMethods class\n\n(©) PaPolicylineMethods.gs x\n237/@1 override function[getWorksheetRootNode} showConditionals : boolean) : RowTreeRootNode {\n\n(238 var treeNodes List<WorksheetIreeNodeContainer> = {}\n\n239 _line. PolicyLocations.orderBy(\\ loc -> loc.CompactName) .each(\\ garage -> {\n\n‘240 var garagedVehicles = line.VersionList.Vehicles.map( \\ vl -> vl.AllVersions.last() )\n\n241 «where(\\v -> v.GarageLocation.FixedId == garage. FixedId) . coTypedArray()\n\n242 if (garagedVehicles.Count > 0) {\n\n243 var garageContainer = new WorksheetTreetodeContainer (garage.CompactName)\n\n244 garageContainer.ExpandByDefault = true\n\n245, garagedVehicles.each(\\ vehicle -> {\nRating Worksheet Download\nInstruction Result Op ( — Operand ) Actual Value(s) B\n\n‘V_ 1253 Paloma Ave, Floor 0000, Developer Unit Habitation Cube #0000, Arcadia, CA 91007\n> 2001 Acura RSX in California\n> 2002 Toyota Avalon in California\ncATax\n\n--- ch14/lesson-05/slide-22.png ---\n| Demonstration G\n\nRate routine plugins\n\nclick here\n\nNote: The demonstration opens a new tab in your browser. When the demonstration ends, the\noriginal course launch window appears. Return to this window to continue this presentation.\n\n--- ch14/lesson-05/slide-24.png ---\nQuestion\n\n,~ — Inwhich class do you configure rate routine methods available to all\nY LOBs?\n\nseo eooce Sse Sbeese505\n\nGi\n\n--- ch14/lesson-05/slide-25.png ---\nAnswer\n\n,- — Inwhich class do you configure rate routine methods available to all\nY LOBs?\n\ngsrc.gw.rating.flow.util.SharedRatingFunctions.gs\n\nse sSeSo SoS Se See ese\n\nGi\n\n--- ch14/lesson-05/slide-26.png ---\nQuestion\n\n7~ — What property can you set on a parameter so that it can be edited ina\no rate routine?\n\nseo eooce Sse Sbeese505\n\nGi\n\n--- ch14/lesson-05/slide-27.png ---\nAnswer\n\n,~ — What property can you set on a parameter so that it can be edited ina\no rate routine?\n\nwritable\n\nse sSeSo SoS Se See ese\n\nGi\n\n--- ch14/lesson-05/slide-28.png ---\nLesson\nobj ectives * Configure parameter sets to provide data to\nreview the rate routines\n\n¢ Configure rate routines to calculate costs\n¢ Configure the rate routine plugins to process\nthe rate routines.\n\n--- ch14/lesson-05/slide-29.png ---\n| Student exercise G\n\nConfiguring rate routines and parameter\nsets",
  "generated_at": "2026-02-15T18:24:59.047650"
}